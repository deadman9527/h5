!function(e,r){function n(e){if(null===e||"undefined"==typeof e)return"";var r,n,t=e+"",i="",o=0;r=n=0,o=t.length;for(var a=0;o>a;a++){var u=t.charCodeAt(a),c=null;if(128>u)n++;else if(u>127&&2048>u)c=String.fromCharCode(u>>6|192,63&u|128);else if(55296!=(63488&u))c=String.fromCharCode(u>>12|224,u>>6&63|128,63&u|128);else{if(55296!=(64512&u))throw new RangeError("Unmatched trail surrogate at "+a);var f=t.charCodeAt(++a);if(56320!=(64512&f))throw new RangeError("Unmatched lead surrogate at "+(a-1));u=((1023&u)<<10)+(1023&f)+65536,c=String.fromCharCode(u>>18|240,u>>12&63|128,u>>6&63|128,63&u|128)}null!==c&&(n>r&&(i+=t.slice(r,n)),i+=c,r=n=a+1)}return n>r&&(i+=t.slice(r,o)),i}function t(e){var r,t,i,o,a,u,c,f,s,l,d=function(e,r){return e<<r|e>>>32-r},p=function(e,r){var n,t,i,o,a;return i=2147483648&e,o=2147483648&r,n=1073741824&e,t=1073741824&r,a=(1073741823&e)+(1073741823&r),n&t?2147483648^a^i^o:n|t?1073741824&a?3221225472^a^i^o:1073741824^a^i^o:a^i^o},h=function(e,r,n){return e&r|~e&n},v=function(e,r,n){return e&n|r&~n},m=function(e,r,n){return e^r^n},g=function(e,r,n){return r^(e|~n)},w=function(e,r,n,t,i,o,a){return e=p(e,p(p(h(r,n,t),i),a)),p(d(e,o),r)},x=function(e,r,n,t,i,o,a){return e=p(e,p(p(v(r,n,t),i),a)),p(d(e,o),r)},O=function(e,r,n,t,i,o,a){return e=p(e,p(p(m(r,n,t),i),a)),p(d(e,o),r)},C=function(e,r,n,t,i,o,a){return e=p(e,p(p(g(r,n,t),i),a)),p(d(e,o),r)},y=function(e){for(var r,n=e.length,t=n+8,i=(t-t%64)/64,o=16*(i+1),a=new Array(o-1),u=0,c=0;n>c;)r=(c-c%4)/4,u=c%4*8,a[r]=a[r]|e.charCodeAt(c)<<u,c++;return r=(c-c%4)/4,u=c%4*8,a[r]=a[r]|128<<u,a[o-2]=n<<3,a[o-1]=n>>>29,a},q=function(e){var r,n,t="",i="";for(n=0;3>=n;n++)r=e>>>8*n&255,i="0"+r.toString(16),t+=i.substr(i.length-2,2);return t},b=[],k=7,S=12,L=17,U=22,A=5,T=9,$=14,j=20,D=4,N=11,E=16,J=23,K=6,R=10,M=15,P=21;for(e=n(e),b=y(e),c=1732584193,f=4023233417,s=2562383102,l=271733878,r=b.length,t=0;r>t;t+=16)i=c,o=f,a=s,u=l,c=w(c,f,s,l,b[t+0],k,3614090360),l=w(l,c,f,s,b[t+1],S,3905402710),s=w(s,l,c,f,b[t+2],L,606105819),f=w(f,s,l,c,b[t+3],U,3250441966),c=w(c,f,s,l,b[t+4],k,4118548399),l=w(l,c,f,s,b[t+5],S,1200080426),s=w(s,l,c,f,b[t+6],L,2821735955),f=w(f,s,l,c,b[t+7],U,4249261313),c=w(c,f,s,l,b[t+8],k,1770035416),l=w(l,c,f,s,b[t+9],S,2336552879),s=w(s,l,c,f,b[t+10],L,4294925233),f=w(f,s,l,c,b[t+11],U,2304563134),c=w(c,f,s,l,b[t+12],k,1804603682),l=w(l,c,f,s,b[t+13],S,4254626195),s=w(s,l,c,f,b[t+14],L,2792965006),f=w(f,s,l,c,b[t+15],U,1236535329),c=x(c,f,s,l,b[t+1],A,4129170786),l=x(l,c,f,s,b[t+6],T,3225465664),s=x(s,l,c,f,b[t+11],$,643717713),f=x(f,s,l,c,b[t+0],j,3921069994),c=x(c,f,s,l,b[t+5],A,3593408605),l=x(l,c,f,s,b[t+10],T,38016083),s=x(s,l,c,f,b[t+15],$,3634488961),f=x(f,s,l,c,b[t+4],j,3889429448),c=x(c,f,s,l,b[t+9],A,568446438),l=x(l,c,f,s,b[t+14],T,3275163606),s=x(s,l,c,f,b[t+3],$,4107603335),f=x(f,s,l,c,b[t+8],j,1163531501),c=x(c,f,s,l,b[t+13],A,2850285829),l=x(l,c,f,s,b[t+2],T,4243563512),s=x(s,l,c,f,b[t+7],$,1735328473),f=x(f,s,l,c,b[t+12],j,2368359562),c=O(c,f,s,l,b[t+5],D,4294588738),l=O(l,c,f,s,b[t+8],N,2272392833),s=O(s,l,c,f,b[t+11],E,1839030562),f=O(f,s,l,c,b[t+14],J,4259657740),c=O(c,f,s,l,b[t+1],D,2763975236),l=O(l,c,f,s,b[t+4],N,1272893353),s=O(s,l,c,f,b[t+7],E,4139469664),f=O(f,s,l,c,b[t+10],J,3200236656),c=O(c,f,s,l,b[t+13],D,681279174),l=O(l,c,f,s,b[t+0],N,3936430074),s=O(s,l,c,f,b[t+3],E,3572445317),f=O(f,s,l,c,b[t+6],J,76029189),c=O(c,f,s,l,b[t+9],D,3654602809),l=O(l,c,f,s,b[t+12],N,3873151461),s=O(s,l,c,f,b[t+15],E,530742520),f=O(f,s,l,c,b[t+2],J,3299628645),c=C(c,f,s,l,b[t+0],K,4096336452),l=C(l,c,f,s,b[t+7],R,1126891415),s=C(s,l,c,f,b[t+14],M,2878612391),f=C(f,s,l,c,b[t+5],P,4237533241),c=C(c,f,s,l,b[t+12],K,1700485571),l=C(l,c,f,s,b[t+3],R,2399980690),s=C(s,l,c,f,b[t+10],M,4293915773),f=C(f,s,l,c,b[t+1],P,2240044497),c=C(c,f,s,l,b[t+8],K,1873313359),l=C(l,c,f,s,b[t+15],R,4264355552),s=C(s,l,c,f,b[t+6],M,2734768916),f=C(f,s,l,c,b[t+13],P,1309151649),c=C(c,f,s,l,b[t+4],K,4149444226),l=C(l,c,f,s,b[t+11],R,3174756917),s=C(s,l,c,f,b[t+2],M,718787259),f=C(f,s,l,c,b[t+9],P,3951481745),c=p(c,i),f=p(f,o),s=p(s,a),l=p(l,u);var _=q(c)+q(f)+q(s)+q(l);return _.toLowerCase()}function i(e){var r,n={},t=[];for(r in e)e.hasOwnProperty(r)&&t.push(r);for(t.sort(),r=0;r<t.length;r++)n[t[r]]=e[t[r]];return n}function o(e){var r="5899ac7839178f62ffc97dbfe1f88b50";e=i(e);var n="";for(var o in e)n+=e[o];n+=r;var a=t(n);return a}var a=function(){var e=location.href,r="",n="";return-1!=e.indexOf("isonline")?(n="online",r="http://www.api.quxiu.me/"):-1!=e.indexOf("test.h5.quxiu.me")||-1!=e.indexOf("istest")?(n="test",r="http://test.api.quxiu.me/"):-1!=e.indexOf("rc.h5.quxiu.me")||-1!=e.indexOf("isrc")?(n="rc",r="http://rc.api.quxiu.me/"):-1!=e.indexOf("dev.h5.quxiu.me")||-1!=e.indexOf("isdev")?(n="dev",r="http://www.newapi.com/"):(n="online",r="http://www.api.quxiu.me/"),{apiUrl:r,platform:n}}(),u={lifetime:10,set:function(e,r,n){var t=Date.now();n=Number(n)||this.lifetime,this[e]={t:t,v:r,lifetime:60*n*1e3}},get:function(e){var r=this[e];if(r){var n=Date.now(),t=r.t;return n-t<r.lifetime?r.v:null}return null},apiKey:function(e){return JSON.stringify(e)}};r.md5=t,r.api={env:a,get:function(e){if(e.mock){console.log("mock",e);var n=e.mock;return void $.getJSON(n.path,function(r){n.error?e.error&&e.error(r):e.success&&e.success(r),e.complete&&e.complete()})}var t=e.data||{};if(t.app="h5",t.type="jsonp",e.needLogin&&r.storage&&(t.accessToken=r.storage.get("accessToken"),!t.accessToken))return void r.login.goLogin();var i=!!e.cacheLife,c=u.apiKey($.extend(!0,{},e.api,e.data));if(i){var f=u.get(c);if(f)return void(e.success&&e.success(f))}t.api_sign=o(t),t.timestamp=Math.floor(Date.now()/1e3),$.extend(!0,t,e.api);var s=e.apiUrl||a.apiUrl;$.ajax({url:s,data:t,dataType:"jsonp",success:function(n){if("00000"==n.code||"10000"==n.code)i&&u.set(c,n,e.cacheLife),e.success&&e.success(n);else{if(n.desc.indexOf("令牌错误或过期")>-1)return"online"!=a.platform&&alert(n.desc),void r.login.logout();e.error&&e.error(n)}e.complete&&e.complete()},error:function(r){e.error&&e.error(r),e.complete&&e.complete()},complete:function(){}})}}}(window,window.lib||(window.lib={}));