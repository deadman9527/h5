!function(e,n){function t(e,t){if(e&&(t||"object"!=typeof e||(t=e,e=t.id))){var a=n(e);if(!a.length)throw new Error("dom not find");this.$container=a,this.init(t||{})}}t.prototype={init:function(e){var t={index:1,pageCount:null,preFix:"!page/",objId:"Z",disableHash:null};n.extend(this,t,e),this.pageCount||(this.disableHash=!0),this.oldIndex=-1;var a=this.preFix,s=a.length;"/"!=a.charAt(s-1)&&(this.preFix+="/"),isNaN(this.index)&&(this.index=1),this.pageCount&&this.index>this.pageCount&&(this.index=this.pageCount),this.index<=0&&(this.index=1),this.createDom(),this.eventAttach(),!this.disableHash&&this.parseHash(),this.renderPage()},setIndex:function(e){var n=this;n.$select&&(e=Number(e),isNaN(e)&&(e=1),e>n.pageCount&&(e=n.pageCount),0>=e&&(e=1),n.index=e,n.renderPage())},setCount:function(e){e&&(this.pageCount=this.index=e,this.renderPage())},parseHash:function(){var e=this,n=location.hash,t=n.substr(n.lastIndexOf("/")+1),a=[],s=0,i=[];a=t.split("-"),a.shift();for(var o=0;o<a.length;o++){i=a[o].split("");var c=i.shift();c==this.objId&&(s=Number(i.join("")),(isNaN(s)||0>=s)&&(e.index=1),s>e.pageCount&&(e.index=e.pageCount),e.index=s)}},setContainer:function(e){this.$container=n(e)},getObjId:function(){return this.objId},pContainer:function(){return this.$container},changeHash:function(){var e=this,n=location.hash;if(""==n)location.hash=e.preFix+"-"+e.objId+e.index;else{var t=n.lastIndexOf(e.objId),a=t;if(-1==t)location.hash+="-"+e.objId+e.index;else{for(;;)if(a++,"-"==n[a]||!n[a])break;n=n.replace(n.substring(t,a),e.objId+e.index),location.hash=n}}},createDom:function(){var e=this,n=e.$container,t=e.pageCount,a=t&&'<i class="aw a-u"></i>'||"",s=t&&'<select class="c-p-select"></select>'||"",i=['<section class="c-p-con">','<a class="c-btn c-btn-aw c-p-pre"><span>上一页</span></a>','<div class="c-p-cur c-btn"><span>','<div class="c-p-arrow">',"<span></span>",a,"</div>",s,"</span></div>",'<a class="c-btn c-btn-awr c-p-next"><span>下一页</span></a>',"</section>"];if(n.html(i.join("")),t){s=e.$select||(e.$select=n.find("select")),i=new Array(t);for(var o=1;t>=o;o++)i[o-1]="<option>第"+o+"页</option>";s.append(i.join(""))}},renderPage:function(e){var t=this,a=t.$container,s=t.$select,i=t.pageCount,o=t.index,c=n(".c-p-pre",a),r=n(".c-p-next",a);i?(1>=i?(c.addClass("c-btn-off"),r.addClass("c-btn-off"),t.pageCount=1):1==o?(c.addClass("c-btn-off"),i>1&&r.removeClass("c-btn-off")):o==i?(r.addClass("c-btn-off"),i>1&&c.removeClass("c-btn-off")):o>1&&i>o&&(c.removeClass("c-btn-off"),r.removeClass("c-btn-off")),s&&(s.get(0).selectedIndex=o-1)):("end"==e&&(o--,r.addClass("c-btn-off"),t.pageCount=t.index=o),1>=o?c.addClass("c-btn-off"):c.removeClass("c-btn-off"));var l=o+"/"+i;s||(l="第 "+o+" 页"),n(".c-p-arrow span",a).text(l)},eventDetach:function(){var e=this,n=e.$container,t=e.$select;t&&t.off(),n.off("click"),e.$select=null,e.$arrow=null},eventAttach:function(){{var e=this,t=e.$container,a=e.$select;e.$arrow||(e.$arrow=n(".c-p-arrow i"))}commonFunc=function(n){e.triggerEvent(n)},a&&a.on({change:commonFunc}),t.on("click",".c-p-pre",commonFunc),t.on("click",".c-p-next",commonFunc)},triggerEvent:function(e){e.preventDefault();var t=this,a=e.currentTarget,s=n(a),i=a.tagName.toLowerCase(),o=t.index,c={};if("a"==i){if(s.hasClass("c-btn-off"))return;var r="";s.hasClass("c-p-pre")?(o--,r="pre"):s.hasClass("c-p-next")&&(o++,r="next")}else if("select"==i){if(o=a.selectedIndex+1,t.oldIndex==o)return;r="select"}t.index=o,c={index:o,type:r},t.$select?t.renderPage():c.callback=function(e){t.renderPage(e)},t.disableHash?t.$container.trigger("P:switchPage",c):t.changeHash(),t.oldIndex=o}},e.lib=e.lib||{},lib.PageNav=t}(window,$);