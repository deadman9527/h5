!function(a,b){function c(a,b){function c(){var c=a.querySelector(".search-ready"),d=a.querySelector(".search-cancel"),j=a.querySelector(".clear-text"),k=a.querySelector(".search-submit"),l=a.querySelector(".search-text");if(d.addEventListener("click",f,!1),c.addEventListener("click",e,!1),j.addEventListener("click",g,!1),k.addEventListener("click",h,!1),l.addEventListener("input",function(){j.style.display=l.value?"inline":"none"}),b.withIcon)for(var m=a.querySelectorAll(".search-icons"),n=0;n<m.length;n++)m[n].index=n,m[n].addEventListener("click",i,!1)}function e(){var b=a.querySelector("#mySearch"),c=a.querySelector(".ready-wraper");c.style.display="none",b.style.display="-webkit-box",a.querySelector(".search-text").focus()}function f(){var c=a.querySelector("#mySearch"),d=a.querySelector(".ready-wraper");c.style.display="none",d.style.display=b.withIcon?"-webkit-box":"block"}function g(){var b=a.querySelector(".clear-text");a.querySelector(".search-text").value="",b.style.display="none"}function h(){var b=document.createEvent("HTMLEvents");b.initEvent("submit",!1,!1),b.submitMsg=a.querySelector(".search-text").value,l.dispatchEvent(b)}function i(){var a=document.createEvent("HTMLEvents");a.initEvent("iconclick",!1,!1),a.iconIndex=this.index,l.dispatchEvent(a)}function j(a){for(var b=/[\u4e00-\u9fa5]/,c=0,d=0;d<a.length;d++)c+=b.test(a[d])?2:1;return c}var k=Date.now()+"-"+ ++d,l=document.createDocumentFragment();if(1!==arguments.length||arguments[0]instanceof HTMLElement||(b=arguments[0],a=null),a||(a=document.createElement("div"),l.appendChild(a)),b=b||{},a.setAttribute("data-ctrl-name","searchBar"),a.setAttribute("data-ctrl-id",k),b.withIcon){if(!(b.iconNum<=3&&b.iconNum>0))throw new Error("If you wanna icons , iconNum should at 1~3 ");for(var m=b.iconNum,n="";0!=m;)n+='<div class="search-icons"></div>',m--;a.innerHTML=' <div class="search-wraper"><div class="search-mid ready-wraper"><div class="search-ready search-ready-short"><i class="searchbar-iconfont">&#xe600</i><span class="placeholder">搜索宝贝、店铺</span></div>'+n+'</div><div id="mySearch" class="search-mid" style="display:none"><img class="clear-text" src="http://img1.tbcdn.cn/tfscom/TB1TifqFVXXXXaDXXXXEDhGGXXX-32-32.png" alt=""><input type="text" class="search-text"> <div class="search-func search-submit">搜索</div><div class="search-func search-cancel">取消</div></div></div>'}else a.innerHTML='<div class="search-wraper"><div class="search-ready search-ready-long ready-wraper"><i class="searchbar-iconfont">&#xe600</i><span class="placeholder">搜索宝贝、店铺</span></div><div id="mySearch" class="search-mid" style="display:none"><img class="clear-text" src="http://img1.tbcdn.cn/tfscom/TB1TifqFVXXXXaDXXXXEDhGGXXX-32-32.png" alt=""><input type="text" class="search-text"><div class="search-func search-submit">搜索</div><div class="search-func search-cancel">取消</div></div</div>';var o;Object.defineProperty(this,"placeholder",{get:function(){return o},set:function(b){var c=a.querySelector(".placeholder");c.innerHTML=b+"",o=b}}),this.placeholder=b.placeholder||"搜索宝贝、店铺";var p;Object.defineProperty(this,"submitText",{get:function(){return p},set:function(b){if(!("string"==typeof b&&j(b)<=4))throw new Error("Non expected value or out of 4 words");var c=a.querySelector(".search-submit");c.innerHTML=b+"",p=b}}),this.submitText=b.submitText||"搜索";var q;Object.defineProperty(this,"cancelText",{get:function(){return q},set:function(b){if(!("string"==typeof b&&j(b)<=4))throw new Error("Non expected value or out of 4 words");var c=a.querySelector(".search-cancel");c.innerHTML=b+"",q=b}}),this.cancelText=b.cancelText||"取消";var r;Object.defineProperty(this,"iconUrl",{get:function(){return r},set:function(c){if(!("[object Array]"===Object.prototype.toString.call(c)&&c.length<=b.iconNum))throw new Error("Non expected value or url out of iconNum");for(var d=a.querySelectorAll(".search-icons"),e=0;e<c.length;e++)d[e].style.background="url("+c[e]+") no-repeat",d[e].style.backgroundSize="100% 100%";r=c.slice()}}),b.withIcon&&(this.iconUrl=b.iconUrl||[]),this.addEventListener=function(){a.addEventListener.apply(a,arguments)},this.removeEventListener=function(){a.removeEventListener.apply(a,arguments)},this.remove=function(){a.parentNode&&a.parentNode.removeChild(a)},c(),this.element=a,this.root=l}var d=0;b.searchbar=c}(window,window.ctrl||(window.ctrl={}));
if (window.KISSY) {KISSY.add('mtb/ctrl-searchbar/0.1.0/build/searchbar.cmd',function() {return window.ctrl.searchbar;},{requries:['mtb/ctrl-searchbar/0.1.0/searchbar.css']);} else if ('undefined' !== typeof define) {define('mtb/ctrl-searchbar/0.1.0/build/searchbar.cmd', [], function(){require('mtb/ctrl-searchbar/0.1.0/searchbar.css');return window.ctrl.searchbar;});}