!function(e,t){function r(e,t){function r(){var r=e.querySelector(".search-ready"),n=e.querySelector(".search-cancel"),l=e.querySelector(".clear-text"),d=e.querySelector(".search-submit"),u=e.querySelector(".search-text");if(n.addEventListener("click",a,!1),r.addEventListener("click",c,!1),l.addEventListener("click",i,!1),d.addEventListener("click",s,!1),u.addEventListener("input",function(){l.style.display=u.value?"inline":"none"}),t.withIcon)for(var h=e.querySelectorAll(".search-icons"),v=0;v<h.length;v++)h[v].index=v,h[v].addEventListener("click",o,!1)}function c(){var t=e.querySelector("#mySearch"),r=e.querySelector(".ready-wraper");r.style.display="none",t.style.display="-webkit-box",e.querySelector(".search-text").focus()}function a(){var r=e.querySelector("#mySearch"),n=e.querySelector(".ready-wraper");r.style.display="none",n.style.display=t.withIcon?"-webkit-box":"block"}function i(){var t=e.querySelector(".clear-text");e.querySelector(".search-text").value="",t.style.display="none"}function s(){var t=document.createEvent("HTMLEvents");t.initEvent("submit",!1,!1),t.submitMsg=e.querySelector(".search-text").value,u.dispatchEvent(t)}function o(){var e=document.createEvent("HTMLEvents");e.initEvent("iconclick",!1,!1),e.iconIndex=this.index,u.dispatchEvent(e)}function l(e){for(var t=/[\u4e00-\u9fa5]/,r=0,n=0;n<e.length;n++)r+=t.test(e[n])?2:1;return r}var d=Date.now()+"-"+ ++n,u=document.createDocumentFragment();if(1!==arguments.length||arguments[0]instanceof HTMLElement||(t=arguments[0],e=null),e||(e=document.createElement("div"),u.appendChild(e)),t=t||{},e.setAttribute("data-ctrl-name","searchBar"),e.setAttribute("data-ctrl-id",d),t.withIcon){if(!(t.iconNum<=3&&t.iconNum>0))throw new Error("If you wanna icons , iconNum should at 1~3 ");for(var h=t.iconNum,v="";0!=h;)v+='<div class="search-icons"></div>',h--;e.innerHTML=' <div class="search-wraper"><div class="search-mid ready-wraper"><div class="search-ready search-ready-short"><i class="searchbar-iconfont">&#xe600</i><span class="placeholder">搜索宝贝、店铺</span></div>'+v+'</div><div id="mySearch" class="search-mid" style="display:none"><img class="clear-text" src="http://img1.tbcdn.cn/tfscom/TB1TifqFVXXXXaDXXXXEDhGGXXX-32-32.png" alt=""><input type="text" class="search-text"> <div class="search-func search-submit">搜索</div><div class="search-func search-cancel">取消</div></div></div>'}else e.innerHTML='<div class="search-wraper"><div class="search-ready search-ready-long ready-wraper"><i class="searchbar-iconfont">&#xe600</i><span class="placeholder">搜索宝贝、店铺</span></div><div id="mySearch" class="search-mid" style="display:none"><img class="clear-text" src="http://img1.tbcdn.cn/tfscom/TB1TifqFVXXXXaDXXXXEDhGGXXX-32-32.png" alt=""><input type="text" class="search-text"><div class="search-func search-submit">搜索</div><div class="search-func search-cancel">取消</div></div</div>';var y;Object.defineProperty(this,"placeholder",{get:function(){return y},set:function(t){var r=e.querySelector(".placeholder");r.innerHTML=t+"",y=t}}),this.placeholder=t.placeholder||"搜索宝贝、店铺";var p;Object.defineProperty(this,"submitText",{get:function(){return p},set:function(t){if(!("string"==typeof t&&l(t)<=4))throw new Error("Non expected value or out of 4 words");var r=e.querySelector(".search-submit");r.innerHTML=t+"",p=t}}),this.submitText=t.submitText||"搜索";var f;Object.defineProperty(this,"cancelText",{get:function(){return f},set:function(t){if(!("string"==typeof t&&l(t)<=4))throw new Error("Non expected value or out of 4 words");var r=e.querySelector(".search-cancel");r.innerHTML=t+"",f=t}}),this.cancelText=t.cancelText||"取消";var m;Object.defineProperty(this,"iconUrl",{get:function(){return m},set:function(r){if(!("[object Array]"===Object.prototype.toString.call(r)&&r.length<=t.iconNum))throw new Error("Non expected value or url out of iconNum");for(var n=e.querySelectorAll(".search-icons"),c=0;c<r.length;c++)n[c].style.background="url("+r[c]+") no-repeat",n[c].style.backgroundSize="100% 100%";m=r.slice()}}),t.withIcon&&(this.iconUrl=t.iconUrl||[]),this.addEventListener=function(){e.addEventListener.apply(e,arguments)},this.removeEventListener=function(){e.removeEventListener.apply(e,arguments)},this.remove=function(){e.parentNode&&e.parentNode.removeChild(e)},r(),this.element=e,this.root=u}var n=0;t.searchbar=r}(window,window.ctrl||(window.ctrl={}));