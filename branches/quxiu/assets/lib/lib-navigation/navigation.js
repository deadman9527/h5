!function(t,e){function n(t){t=t||"";var e=this,n={};if(t&&"string"==typeof t)for(var a=t.split("&"),i=0;i<a.length;i++){var r=a[i].split("=");n[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}else if("object"==typeof t)for(var s in t)n[s]=t[s];for(var s in n)!function(t){Object.defineProperty(e,t,{get:function(){return n[t]},set:function(e){n[t]=e},enumerable:!0})}(s);this.toString=function(){return Object.keys(n).sort().map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(n[t])}).join("&")}}function a(){function e(t){var e=i.createElement("a");e.href=t;var n=i.createEvent("HTMLEvents");n.initEvent("click",!1,!0),o&&(e.style.cssText="display:none;",i.body.appendChild(e)),e.dispatchEvent(n)}function a(t,e){var n=i.createEvent("HTMLEvents");if(n.initEvent(t,!1,!1),e)for(var a in e)n[a]=e[a];window.dispatchEvent(n)}function c(){this.exec=function(){a("navigation:push")}}function u(){this.exec=function(){a("navigation:pop")}}function d(){this.exec=function(){a("navigation:replace")}}function f(t,e){return t.name===e.name&&t.args.toString()===e.args.toString()}var p=this,h=[],v=!!s.state,l={},g="initial";h.exec=function(){h.length&&h.shift().exec()},this.push=function(t,i){var r={name:t,args:new n(i),id:l.state.id+1};if(!f(r,l.state)){g="push";var o=r.args.toString();if(v){var c="#"+r.name+(o?"?"+o:"");s.pushState({name:r.name,args:o,id:r.id},null,c),a("pushstate")}else{var c="#"+r.name+"["+r.id+"]"+(o?"?"+o:"");e(c)}}},this.pop=function(){l.state.id>1&&(g="pop",s.back())},this.replace=function(t,i){var r={name:t,args:new n(i),id:l.state.id};if(!f(r,l.state)){g="replace";var o=r.args.toString();if(v){var c="#"+r.name+(o?"?"+o:"");s.replaceState({name:r.name,args:o,id:r.id},null,c),a("replacestate")}else{var c="#"+r.name+"["+r.id+"]"+(o?"?"+o:"");e(c)}}};var m=!1;this.start=function(e){function a(){var t;if(v&&null!=s.state&&s.state!==!0)t={id:s.state.id,name:s.state.name,args:new n(s.state.args)};else{var e=r.hash,a=e.match(/#([^\[\]\?]+)(?:\[(\d+)\])?(?:\?(.*))?/)||["",o,1,f];t={name:a[1],id:parseInt(a[2]||1),args:new n(a[3]||"")}}return t}function i(){var t=a(),e=l.state;l.state=t,t.id<e.id?(g="pop",h.push(new u(t,t.id-e.id))):t.id===e.id?"replace"===p.action?h.push(new d(t)):console.error("请勿用location.hash或location.href来改变hash值"):(g="push",h.push(new c(t,t.id-e.id))),h.exec()}if(!m){m=!0;var o=e.defaultPath||"",f=e.defaultArgs||"";v&=!!e.useHistoryState,Object.defineProperty(this,"useHistoryState",{get:function(){return v}}),Object.defineProperty(this,"action",{get:function(){return g}}),Object.defineProperty(this,"state",{get:function(){return{id:l.state.id,name:l.state.name,args:l.state.args}}});var w=a();v?(t.addEventListener("pushstate",i,!1),t.addEventListener("popstate",i,!1),t.addEventListener("replacestate",i,!1)):t.addEventListener("hashchange",i,!1),l.state=w,h.push(new c(w)),h.exec()}}}var i=t.document,r=t.location,s=t.history,o=t.navigator.userAgent.match(/IEMobile\/([\d\.]+)/);!s.state&&s.replaceState&&s.replaceState(!0,null);window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,1/60)};e.navigation=a}(window,window.lib||(window.lib={}));