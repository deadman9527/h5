!function(){var t,e,n,i,o,r,a,s,l,c;t=function(t){var e={mix:function(t,e){for(var n in e)t[n]=e[n];return t},extend:function(t,e,n){this.mix(e.prototype,t.prototype),e.prototype.super=t,this.mix(e.prototype,n)},vendor:function(){for(var t,e=document.createElement("div").style,n=["t","webkitT","MozT","msT","OT"],i=0,o=n.length;o>i;i++)if(t=n[i]+"ransform",t in e)return n[i].substr(0,n[i].length-1);return!1}(),prefixStyle:function(t){return this.vendor===!1?!1:""===this.vendor?t:this.vendor+t.charAt(0).toUpperCase()+t.substr(1)},hasClass:function(t,e){return t&&t.className&&-1!=t.className.indexOf(e)},addClass:function(t,e){t&&!this.hasClass(t,e)&&(t.className+=" "+e)},removeClass:function(t,e){t&&t.className&&(t.className=t.className.replace(e,""))}};return t=e}({}),l=function(){var e=t,n={on:function(t,e,n){return t.addEventListener(e,n),this.target=t,this},detach:function(t,e,n){return this.target=null,t.removeEventListener(e,n),this},dispatchEvent:function(t,n,i){var o=document.createEvent("Event");o.initEvent(n,!0,!0),e.mix(o,i),t.dispatchEvent(o)}};return n}({}),e=function(){function t(t){if(!(t.touches.length>1||this.gestureType&&"pan"!=this.gestureType))if(""==this.gestureType&&(u=[]),u.length){if("pan"!=this.gestureType)return;f.deltaX=t.touches[0].clientX-f.startX,f.deltaY=t.touches[0].clientY-f.startY,f.directionX=t.touches[0].clientX-f.prevX>0?"right":"left",f.directionY=t.touches[0].clientY-f.prevY>0?"bottom":"top",f.prevX=t.touches[0].clientX,f.prevY=t.touches[0].clientY,t.touch=f,u.push({deltaX:f.deltaX,deltaY:f.deltaY,timeStamp:t.timeStamp}),t.deltaX=f.deltaX,t.deltaY=f.deltaY,t.velocityX=0,t.velocityY=0,t.directionX=f.directionX,t.directionY=f.directionY,o.dispatchEvent(t.target,s,t)}else f={},f.startX=t.touches[0].clientX,f.startY=t.touches[0].clientY,f.deltaX=0,f.deltaY=0,t.touch=f,f.prevX=f.startX,f.prevY=f.startY,u.push({deltaX:f.deltaX,deltaY:f.deltaY,timeStamp:t.timeStamp}),t.deltaX=f.deltaX,t.deltaY=f.deltaY,this.gestureType="pan",o.dispatchEvent(t.target,r,t)}function e(t){var e=0,r=0,s=0;if(!(t.touches.length>1)){f.deltaX=t.changedTouches[0].clientX-f.startX,f.deltaY=t.changedTouches[0].clientY-f.startY,t.deltaX=f.deltaX,t.deltaY=f.deltaY,t.touch=f,t.touch.record=u;var l=(t.touch.startX,t.touch.startY,u.length),c=u[0]&&u[0].timeStamp;if(!(2>l)&&c){{u[l-1].timeStamp-u[0].timeStamp}for(var h in u)h>0?(u[h].velocity=n(u[h].deltaX,u[h].deltaY,u[h-1].deltaX,u[h-1].deltaY)/(u[h].timeStamp-u[h-1].timeStamp),u[h].velocityX=(u[h].deltaX-u[h-1].deltaX)/(u[h].timeStamp-u[h-1].timeStamp),u[h].velocityY=(u[h].deltaY-u[h-1].deltaY)/(u[h].timeStamp-u[h-1].timeStamp)):(u[h].velocity=0,u[h].velocityX=0,u[h].velocityY=0);var p=u[0].velocityX/Math.abs(u[0].velocityX);for(var h in u)u[h].velocityX/Math.abs(u[h].velocityX)!=p&&(p=u[h].velocityX/Math.abs(u[h].velocityX),s=h);var y=u[0].velocityY/Math.abs(u[0].velocityY);for(var h in u)u[h].velocityY/Math.abs(u[h].velocityY)!=y&&(y=u[h].velocityY/Math.abs(u[h].velocityY),r=h);e=Math.max(s,r);{u[e]}t.touch.record=t.touch.record.splice(e-1);var g=i(t.touch.record);t.velocityX=Math.abs(g.velocityX)>d?g.velocityX/Math.abs(g.velocityX)*d:g.velocityX,t.velocityY=Math.abs(g.velocityY)>d?g.velocityY/Math.abs(g.velocityY)*d:g.velocityY,t.velocity=Math.sqrt(Math.pow(t.velocityX,2)+Math.pow(t.velocityY,2)),f={},u=[],"pan"==this.gestureType&&(o.dispatchEvent(t.target,a,t),this.gestureType="")}}}function n(t,e,n,i){return Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2))}function i(t){for(var e=0,n=0,i=t.length,o=0;i>o;o++)e+=t[o].velocityY,n+=t[o].velocityX;return e/=i,n/=i,{velocityY:Math.abs(t[i-1].velocityY)>c?e:0,velocityX:Math.abs(t[i-1].velocityX)>c?n:0}}var o=l,r=(window.document,"panstart"),a="panend",s="pan",c=.35,d=8,f={},u=[];return document.body.addEventListener("touchmove",t),document.body.addEventListener("touchend",e),{PAN_START:r,PAN_END:a,PAN:s}}({}),n=function(){function e(){if(v.length>2){for(var t=[],e=1;e<v.length;e++)t[e-1]=v[e];v=t}}function n(t){if(e(),0==v.length)return!1;var n=t.startTime-v[v.length-1].startTime;return 10>n?!0:!1}function i(){if(e(),1==v.length)return!1;var t=v[1].startTime-v[0].startTime;return g>t?!0:!1}function o(t){if(t.touches.length>1)return void(m=!1);var e=(t.currentTarget,t.target,t.changedTouches[0].clientX),n=t.changedTouches[0].clientY;m={startX:e,startY:n,startTime:Number(new Date),e:t},x&&clearTimeout(x);t.target;x=setTimeout(function(){if(m){var i={};a.mix(i,t),a.mix(i,{type:d,pageX:e,pageY:n,originalEvent:t}),s.dispatchEvent(t.target,d,i)}clearTimeout(x)},y)}function r(t){if(m){var o=t.changedTouches[0].clientX,r=t.changedTouches[0].clientY,l=Math.abs(o-m.startX),d=Math.abs(r-m.startY);if(a.mix(m,{endX:o,endY:r,distance:Math.sqrt(l*l+d*d),timeSpan:Number(Number(new Date)-m.startTime)}),m.timeSpan>h)return void(m=!1);if(m.distance>p)return void(m=!1);if(!n(m)){v.push(m),e();var y={};a.mix(y,t),a.mix(y,{type:c,pageX:o,pageY:r,originalEvent:t});var x=t.target;return s.dispatchEvent(x,c,y),b?(i()&&(a.mix(y,{type:u}),s.dispatchEvent(x,u,y)),clearTimeout(b),void(b=null)):void(b=setTimeout(function(){clearTimeout(b),b=null,a.mix(y,{type:f}),s.dispatchEvent(x,f,y)},g))}}}var a=t,s=l,c="tap",d="tapHold",f="singleTap",u="doubleTap",h=250,p=10,y=750,g=200,v=[],m=!1,x=null,b=null;return document.body.addEventListener("touchstart",o),document.body.addEventListener("touchend",r),{TAP:c,TAP_HOLD:d,SINGLE_TAP:f,DOUBLE_TAP:u}}({}),i=function(){function t(t,e){var n=t.pageX-e.pageX,i=t.pageY-e.pageY;return Math.sqrt(n*n+i*i)}function e(t,e){return{pageX:t.pageX/2+e.pageX/2,pageY:t.pageY/2+e.pageY/2}}function n(n){if(!(n.touches.length<2||n.changedTouches.length<1)){n.preventDefault();var i=t(n.touches[0],n.touches[1]),a=e(n.touches[0],n.touches[1]);if(n.origin=a,this.isStart){if("pinch"!=this.gestureType)return;n.distance=i,n.scale=i/this.startDistance,n.origin=a,o.dispatchEvent(n.target,s,n)}else this.isStart=1,this.startDistance=i,this.gestureType="pinch",o.dispatchEvent(n.target,r,n)}}function i(t){this.isStart=0,"pinch"==this.gestureType&&0==t.touches.length&&(o.dispatchEvent(t.target,a,t),this.gestureType="")}var o=l,r=(window.document,"gesturePinchStart"),a="gesturePinchEnd",s="gesturePinch";return document.body.addEventListener("touchmove",n),document.body.addEventListener("touchend",i),{PINCH_START:r,PINCH:s,PINCH_END:a}}({}),o=function(){var e=t,n=60,i=5,o=e.prefixStyle("transform"),r=(e.vendor?["-",e.vendor,"-transform"].join(""):"transform",e.prefixStyle("transition")),a=(e.prefixStyle("borderRadius"),[]),s=function(t){this.userConfig=t,this.init(t.xscroll)};return e.mix(s.prototype,{init:function(t){var e=this;e.xscroll=t,e.type=e.userConfig.type,e.isY="y"==e.type?!0:!1,e.containerSize=e.isY?e.xscroll.containerHeight:e.xscroll.containerWidth,e.indicateSize=e.isY?e.xscroll.height:e.xscroll.width,e.offset=e.xscroll.getOffset(),e.render(),e._bindEvt()},destroy:function(){var t=this;t.scrollbar&&t.scrollbar.remove(),t.xscroll.detach("scaleanimate",t._update,t),t.xscroll.detach("scrollend",t._update,t),t.xscroll.detach("scrollanimate",t._update,t);for(var e in a)t.xscroll.detach(a[e],t._update,t);delete t},render:function(){var t=this;if(!t.__isRender){t.__isRender=!0;var e=t.xscroll,n=t.isY?"width: 3px;position:absolute;bottom:5px;top:5px;right:2px;z-index:999;overflow:hidden;-webkit-border-radius:2px;-moz-border-radius:2px;-o-border-radius:2px;":"height:3px;position:absolute;left:5px;right:5px;bottom:2px;z-index:999;overflow:hidden;-webkit-border-radius:2px;-moz-border-radius:2px;-o-border-radius:2px;";t.scrollbar=document.createElement("div"),t.scrollbar.style.cssText=n,e.renderTo.appendChild(t.scrollbar);var i=t.isY?"width:100%;":"height:100%;";t.indicate=document.createElement("div"),t.indicate.style.cssText=i+"position:absolute;background:rgba(0,0,0,0.3);-webkit-border-radius:1.5px;-moz-border-radius:1.5px;-o-border-radius:1.5px;",t.scrollbar.appendChild(t.indicate),t._update()}},_update:function(t,e,n){var i=this,t=t||i.xscroll.getOffset(),o=i.computeScrollBar(t),r=i.isY?"height":"width";i.indicate.style[r]=o.size+"px",e&&n?i.scrollTo(o.offset,e,n):i.moveTo(o.offset)},computeScrollBar:function(t){var e=this,o=e.isY?"y":"x",t=t&&-t[o];e.containerSize=e.isY?e.xscroll.containerHeight:e.xscroll.containerWidth,e.indicateSize=e.isY?e.xscroll.height:e.xscroll.width;var r=e.indicateSize,a=e.containerSize,s=t/a,l=r*s,c=r*r/a,d=l*(r-n+c)/r;if(n>c&&(c=n,l=d),0>l)l=Math.abs(t)*c/n>c-i?i-c:t*c/n;else if(l+c>r){var f=t-a+r;l=f*c/n>c-i?r-i:r-c+f*c/n}e.barOffset=l;var u={size:c},f={};return f[o]=l,u.offset=f,u},scrollTo:function(t,e,n){var i=this;i.indicate.style[o]=i.isY?"translateY("+t.y+"px) translateZ(0)":"translateX("+t.x+"px)  translateZ(0)",i.indicate.style[r]=["all ",e,"s ",n," 0"].join("")},moveTo:function(t){var e=this;e.show(),e.indicate.style[o]=e.isY?"translateY("+t.y+"px)  translateZ(0)":"translateX("+t.x+"px)  translateZ(0)",e.indicate.style[r]=""},_bindEvt:function(){var t=this;if(!t.__isEvtBind){t.__isEvtBind=!0;var e=t.isY?"y":"x";t.xscroll.on("scaleanimate",function(e){t._update(e.offset)}),t.xscroll.on("pan",function(e){t._update(e.offset)}),t.xscroll.on("scrollend",function(n){n.zoomType.indexOf(e)>-1&&t._update(n.offset)}),t.xscroll.on("scrollanimate",function(n){n.zoomType==e&&t._update(n.offset,n.duration,n.easing)})}},reset:function(){var t=this;t.offset={x:0,y:0},t._update()},hide:function(){var t=this;t.scrollbar.style.opacity=0,t.scrollbar.style[r]="opacity 0.3s ease-out"},show:function(){var t=this;t.scrollbar.style.opacity=1}}),s}({}),c=function(){var e,n=t,i="Pull Down To Refresh",o="Loading...",r=function(t){this.init(t)};return n.mix(r.prototype,{init:function(t){var r=this;r.userConfig=n.mix({onRefresh:function(){window.location.reload()},content:i,height:60,autoRefresh:!0,downContent:"Pull Down To Refresh",upContent:"Release To Refresh",loadingContent:o,prefix:"xs-plugin-pulldown-"},t),r.xscroll=r.userConfig.xscroll,e=r.userConfig.prefix,r.xscroll&&r.xscroll.on("afterrender",function(){r.render()})},destroy:function(){var t=this;t.pulldown&&t.pulldown.remove(),t.xscroll.detach("panstart",t._panStartHandler,t),t.xscroll.detach("pan",t._panHandler,t),t.xscroll.detach("panend",t._panEndHandler,t),delete t},render:function(){var t=this;if(!t.__isRender){t.__isRender=!0;var i=e+"container",o=t.userConfig.height||60,r=t.pulldown=document.createElement("div");r.className=i,r.style.position="absolute",r.style.width="100%",r.style.height=o+"px",r.style.top=-o+"px",t.xscroll.container.appendChild(r),n.addClass(r,e+t.status),r.innerHTML=t.userConfig[t.status+"Content"]||t.userConfig.content,t._bindEvt()}},_bindEvt:function(){var t=this;if(!t._evtBinded){t._evtBinded=!0;var e=(t.pulldown,t.xscroll);e.on("pan",function(e){t._panHandler(e)}),e.on("panstart",function(e){t._panStartHandler(e)}),e.on("panend",function(e){t._panEndHandler(e)})}},_panStartHandler:function(){clearTimeout(this.loadingItv)},_changeStatus:function(t){var i=this.status;this.status=t,n.removeClass(this.pulldown,e+i),n.addClass(this.pulldown,e+t),this.setContent(this.userConfig[t+"Content"])},_panHandler:function(t){var e=this,n=t.offset.y,i=e.userConfig.height||60;0>n||e._changeStatus(Math.abs(n)<i?"down":"up")},_panEndHandler:function(){var t=this,e=t.xscroll,n=e.boundry.top,i=t.userConfig.height||60,o=e.getOffsetTop();o>i&&(e.boundry.top=n,!t._expanded&&e.boundry.expandTop(i),t._expanded=!0,e.bounce(!0),t._changeStatus("loading"),clearTimeout(t.loadingItv),t.loadingItv=setTimeout(function(){e.boundry.expandTop(-i),e.bounce(!0,function(){t.userConfig.onRefresh&&t.userConfig.onRefresh()})},800))},setContent:function(t){var e=this;t&&(e.pulldown.innerHTML=t)}}),r}({}),r=function(r){function a(t,e){return[[(t/3+(t+e)/3-t)/(e-t),(t*t/3+t*e*2/3-t*t)/(e*e-t*t)],[(e/3+(t+e)/3-t)/(e-t),(e*e/3+t*e*2/3-t*t)/(e*e-t*t)]]}var s=window,d=t,f=l,u=e,h=n,p=i,y=o,g=c,v=function(t){this.userConfig=t,this.init()};v.PullDown=g,v.version="1.0.0";for(var m="scrollend",x="scroll",b="panend",_="panstart",C="pan",Y="scrollanimate",X="scaleanimate",E="scale",S="afterrender",w="refresh",T=5e-4,k=300,I="ease-in-out",H=.1,N=.36,M=300,D=d.prefixStyle("transform"),A=d.prefixStyle("transition"),L=d.prefixStyle("transitionDuration"),O=d.prefixStyle("transformOrigin"),P=d.vendor?d.prefixStyle("transitionEnd"):"transitionend",R=d.vendor?["-",d.vendor,"-transform"].join(""):"transform",z=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},B=["webkit","moz","ms","o"],W=window.cancelAnimationFrame,q=0;q<B.length;q++)(window[B[q]+"CancelAnimationFrame"]||window[B[q]+"CancelRequestAnimationFrame"])&&(W=window[B[q]+"CancelAnimationFrame"]||window[B[q]+"CancelRequestAnimationFrame"]);W=W||window.clearTimeout;var F=function(t,e){if(!(t.touches.length>1)){var n=t.changedTouches,i=n[0],o=document.createEvent("MouseEvent");o.initMouseEvent(e,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(o)}};return d.mix(v.prototype,{init:function(){var t=this;t.__events={};var e=t.userConfig=d.mix({scalable:!1,scrollbarX:!0,scrollbarY:!0},t.userConfig,void 0,void 0,!0);t.renderTo=document.getElementById(e.renderTo.replace("#","")),t.boundryCheckEnabled=!0;var n=t.clsPrefix=e.clsPrefix||"xs-";t.SROLL_ACCELERATION=e.SROLL_ACCELERATION||T,t.containerClsName=n+"container",t.contentClsName=n+"content"},refresh:function(){var t=this;t.render(),t.scrollTo({x:0,y:0}),t.fire(w)},render:function(){var t=this,e=t.userConfig;t._createContainer();var n=e.width||t.renderTo.offsetWidth,i=e.height||t.renderTo.offsetHeight||0;t.width=n,t.height=i,t.scale=e.scale||1;var o=e.containerWidth||t.content.offsetWidth,r=e.containerHeight||t.content.offsetHeight;t.containerWidth=o<t.width?t.width:o,t.containerHeight=r<t.height?t.height:r,t.initialContainerWidth=t.containerWidth,t.initialContainerHeight=t.containerHeight;var a=t.userConfig.minScale||Math.max(t.width/t.containerWidth,t.height/t.containerHeight),s=t.userConfig.maxScale||1;t.minScale=a,t.maxScale=s,t.boundry={reset:function(){return this.left=0,this.top=0,this.right=t.width,this.bottom=t.height,this},expandTop:function(t){return this.top+=t||0,this},expandLeft:function(t){return this.left+=t||0,this},expandRight:function(t){return this.right-=t||0,this},expandBottom:function(t){return this.bottom-=t||0,this}},t.boundry.reset(),t.fire(S),t.renderScrollBars(),t._bindEvt()},renderScrollBars:function(){var t=this;t.userConfig.scrollbarX&&(t.scrollbarX?t.scrollbarX._update():t.scrollbarX=new y({xscroll:t,type:"x"})),t.userConfig.scrollbarY&&(t.scrollbarY?t.scrollbarY._update():t.scrollbarY=new y({xscroll:t,type:"y"}))},_createContainer:function(){var t=this;if(!t.__isContainerCreated){var e=(t.renderTo,t.container=t.renderTo.getElementsByClassName(t.containerClsName)[0]),n=t.content=t.renderTo.getElementsByClassName(t.contentClsName)[0];e.style.position="absolute",e.style.height="100%",e.style.width="100%",e.style[O]="0 0",n.style.position="absolute",n.style[O]="0 0",t.translate({x:0,y:0}),t.__isContainerCreated=!0}},translate:function(t){this.translateX(t.x),this.translateY(t.y)},_scale:function(t,e,n,i){var o=this;if(o.userConfig.scalable&&o.scale!=t&&t){o.isScaling||(o.scaleBegin=o.scale,o.isScaling=!0,o.scaleBeginX=o.x,o.scaleBeginY=o.y),e&&(o.originX=e),n&&(o.originY=n);var r=o.boundry,a=t*o.initialContainerWidth,s=t*o.initialContainerHeight;o.containerWidth=Math.round(a>o.width?a:o.width),o.containerHeight=Math.round(s>o.height?s:o.height),o.scale=t;var l=e*(o.initialContainerWidth*o.scaleBegin-o.containerWidth)+o.scaleBeginX,c=n*(o.initialContainerHeight*o.scaleBegin-o.containerHeight)+o.scaleBeginY;l>r.left&&(l=r.left),c>r.top&&(c=r.top),l<r.right-o.containerWidth&&(l=r.right-o.containerWidth),c<r.bottom-o.containerHeight&&(c=r.bottom-o.containerHeight),o.x=l,o.y=c,o._transform(),o.fire(E,{scale:t,origin:{x:e,y:n},triggerEvent:i})}},scaleTo:function(t,e,n,i,o){var r=this;if(r.userConfig.scalable&&r.scale!=t&&t){var i=i||1,o=o||"ease-out",a=[R," ",i/1e3,"s ",o," 0s"].join(""),s=Date.now();r.destTimeScale=s+i,W(r._rafScale);var l=(r.scale,function(){var t=Date.now();return t>s+i&&t>=r.destTimeScale?void(r.isScaling=!1):void(r._rafScale=z(l))});l(),r.container.style[A]=a,r.content.style[A]=a,r._scale(t,e,n,"scaleTo"),r.fire(X,{scale:r.scale,duration:i,easing:o,offset:{x:r.x,y:r.y},origin:{x:e,y:n}})}},translateX:function(t){this.x=t,this._transform()},translateY:function(t){this.y=t,this._transform()},_noTransition:function(){var t=this;d.isBadAndroid?(t.content.style[L]="0.001s",t.container.style[L]="0.001s"):(t.content.style[A]="none",t.container.style[A]="none")},stop:function(){var t=this;if(!t.isScaling){var e=t.boundry,n=t.getOffset();n.y>e.top||n.y+t.containerHeight<e.bottom||n.x>e.left||n.x+t.containerWidth<e.right||(t.translate(n),t._noTransition(),W(t.rafX),W(t.rafY),t.fire(m,{offset:n,scale:t.scale,zoomType:"xy"}))}},_transform:function(){var t=this.gpuAcceleration?" translateZ(0) ":"";this.content.style[D]="translate("+this.x+"px,0px)  scaleX("+this.scale+") scaleY("+this.scale+") "+t,this.container.style[D]="translate(0px,"+this.y+"px) "+t},getOffset:function(){var t=this;return{x:t.getOffsetLeft(),y:t.getOffsetTop()}},getOffsetTop:function(){if(this.lockY)return 0;var t=window.getComputedStyle(this.container)[D].match(/[-\d\.*\d*]+/g);return t?Math.round(t[5]):0},getOffsetLeft:function(){if(this.lockX)return 0;var t=window.getComputedStyle(this.content)[D].match(/[-\d\.*\d*]+/g);return t?Math.round(t[4]):0},scrollTo:function(t,e,n,i){var o=this,r=o.getOffset(),a=void 0===t.x||isNaN(t.x)?-r.x:t.x,s=void 0===t.y||isNaN(t.y)?-r.y:t.y;o.scrollX(a,e,n,i),o.scrollY(s,e,n,i)},scrollX:function(t,e,n,i){var o=this,t=Math.round(t);if(!o.userConfig.lockX){var e=e||0,n=n||"cubic-bezier(0.333333, 0.666667, 0.666667, 1)",r=o.content;o.translateX(-t);var a=e>0?[R," ",e/1e3,"s ",n," 0s"].join(""):"none";return r.style[A]=a,o._scrollHandler(-t,e,i,n,a,"x"),r.style[A]=a}},scrollY:function(t,e,n,i){var o=this,t=Math.round(t);if(!o.userConfig.lockY){var e=e||0,n=n||"cubic-bezier(0.333333, 0.666667, 0.666667, 1)",r=o.container;o.translateY(-t);var a=e>0?[R," ",e/1e3,"s ",n," 0s"].join(""):"none";return r.style[A]=a,o._scrollHandler(-t,e,i,n,a,"y"),r.style[A]=a}},_scrollHandler:function(t,e,n,i,o,r){var a=this,s=a.getOffset();if(s[r]!=t){if(0>=e)return void a.fire(x,{zoomType:r,offset:s});var l=r.toUpperCase();a["isScrolling"+l]=!0;var c=Date.now();a["destTime"+l]=c+e,W(a["raf"+l]),a["__scrollEndCallback"+l]=function(t){a["isScrolling"+l]=!1,a.fire(m,{offset:a.getOffset(),zoomType:t.type}),n&&n(t)};var d=function(){Date.now();a["isScrolling"+l]&&z(function(){a.fire(x,{zoomType:r,offset:a.getOffset()})},0),a["raf"+l]=z(d)};d(),a.fire(Y,{transition:o,offset:{x:a.x,y:a.y},duration:e/1e3,easing:i,zoomType:r})}},boundryCheckX:function(t){var e=this;if(e.boundryCheckEnabled&&!e.userConfig.lockX){var n=e.getOffset(),i=e.containerWidth,o=e.boundry;n.x>o.left?(n.x=o.left,e.scrollX(-n.x,k,I,t)):n.x+i<o.right&&(n.x=o.right-i,e.scrollX(-n.x,k,I,t))}},boundryCheckY:function(t){var e=this;if(e.boundryCheckEnabled&&!e.userConfig.lockY){var n=e.getOffset(),i=e.containerHeight,o=e.boundry;n.y>o.top?(n.y=o.top,e.scrollY(-n.y,k,I,t)):n.y+i<o.bottom&&(n.y=o.bottom-i,e.scrollY(-n.y,k,I,t))}},boundryCheck:function(t){this.boundryCheckX(t),this.boundryCheckY(t)},bounce:function(t,e){this.boundryCheckEnabled=t,t?this.boundryCheck(e):void 0},_bindEvt:function(){var t=this;if(!t.__isEvtBind){t.__isEvtBind=!0;var e=t.renderTo,n=t.container,i=t.content,o=t.containerWidth,r=t.containerHeight,a={x:0,y:0},l=t.boundry;if(f.on(e,"touchstart",function(e){e.preventDefault(),t.stop()}).on(e,h.TAP,function(e){t.boundryCheck(),t.isScrollingX||t.isScrollingY?(t.isScrollingX=!1,t.isScrollingY=!1,t.stop()):F(e,"click")}).on(e,u.PAN_START,function(){a=t.getOffset(),t.translate(a),t.fire(_,{offset:a})}).on(e,u.PAN,function(e){var n=t.userConfig.lockY?Number(a.y):Number(a.y)+e.deltaY,i=t.userConfig.lockX?Number(a.x):Number(a.x)+e.deltaX;l=t.boundry,o=t.containerWidth,r=t.containerHeight,n>l.top&&(n=(n-l.top)*N+l.top),n<l.bottom-r&&(n+=(l.bottom-r-n)*N),i>l.left&&(i=(i-l.left)*N+l.left),i<l.right-o&&(i+=(l.right-o-i)*N),t.translate({x:i,y:n}),t._noTransition(),t.isScrollingX=!1,t.isScrollingY=!1,t.directionX=e.directionX,t.directionY=e.directionY,t.fire(x,{offset:{x:i,y:n},directionX:t.directionX,directionY:t.directionY}),t.fire(C,{offset:{x:i,y:n},deltaX:e.deltaX,deltaY:e.deltaY,directionX:t.directionX,directionY:t.directionY})}).on(e,u.PAN_END,function(e){t.panEndHandler(e),t.fire(b,{velocity:e.velocity,velocityX:e.velocityX,velocityY:e.velocityY})}),f.on(n,P,function(e){e.target!=i||t.isScaling||t.__scrollEndCallbackX&&t.__scrollEndCallbackX({type:"x"}),e.target!=n||t.isScaling||t.__scrollEndCallbackY&&t.__scrollEndCallbackY({type:"y"})},!1),t.userConfig.scalable){var c,d;f.on(e,p.PINCH_START,function(e){scale=t.scale,c=(e.origin.pageX-t.x)/t.containerWidth,d=(e.origin.pageY-t.y)/t.containerHeight}),f.on(e,p.PINCH,function(e){t._scale(scale*e.scale,c,d,"pinch")}),f.on(e,p.PINCH_END,function(){t.isScaling=!1,t.scale<t.minScale?t.scaleTo(t.minScale,c,d,M):t.scale>t.maxScale&&t.scaleTo(t.maxScale,c,d,M)}),f.on(e,h.DOUBLE_TAP,function(e){c=(e.pageX-t.x)/t.containerWidth,d=(e.pageY-t.y)/t.containerHeight,t.scale>t.minScale?t.scaleTo(t.minScale,c,d,200):t.scaleTo(t.maxScale,c,d,200)})}f.on(s,"resize",function(){t.refresh()})}},panEndHandler:function(t){var e,n=this,i=(n.userConfig,n.getOffset()),o=n._bounce("x",i.x,t.velocityX,n.width,n.containerWidth),r=n._bounce("y",i.y,t.velocityY,n.height,n.containerHeight),a=o?o.offset:0,s=r?r.offset:0;o&&r&&o.status&&r.status&&o.duration&&r.duration&&(e=Math.max(o.duration,r.duration)),o&&(o.duration<100?n._scrollEndHandler("x"):n.scrollX(a,e||o.duration,o.easing,function(){n._scrollEndHandler("x")})),r&&(r.duration<100?n._scrollEndHandler("y"):n.scrollY(s,e||r.duration,r.easing,function(){n._scrollEndHandler("y")})),n.directionX=t.velocityX<0?"left":"right",n.directionY=t.velocityY<0?"up":"down"},_scrollEndHandler:function(t){var e=this,n=t.toUpperCase(),i="scroll"+n,o="boundryCheck"+n,r="_bounce"+t;if(e[r]){e.fire("outOfBoundry");var s=e[r],l=.04*(s/Math.abs(s)),c=s/l,d=e.getOffset()[t],f=d+c*s/2;e[i](-f,c,"cubic-bezier("+a(-c,0)+")",function(){e[r]=0,e[o]()})}else e[o]()},fire:function(t){var e=this;if(e.__events[t]&&e.__events[t].length)for(var n in e.__events[t])e.__events[t][n].apply(this,[].slice.call(arguments,1))},on:function(t,e){this.__events[t]||(this.__events[t]=[]),this.__events[t].push(e)},detach:function(t,e){if(t&&this.__events[t]){var n=this.__events[t].indexOf(e);n>-1&&this.__events[t].splice(n,1)}},_bounce:function(t,e,n,i,o){var r=this,s=r.boundry,l="x"==t?s.left:s.top,c="x"==t?s.right:s.bottom,i=c-l,d={};if(0===n)return void("x"==t?r.boundryCheckX():r.boundryCheckY());if(!("x"==t&&r.userConfig.lockX||"y"==t&&r.userConfig.lockY)){var f=r.userConfig,u=f.maxSpeed>0&&f.maxSpeed<6?f.maxSpeed:3;if(console.log(u),n>u&&(n=u),-u>n&&(n=-u),e>l||i-o>e){var h=H*(n/Math.abs(n)),p=n/h,y=e+p*n/2;return d.offset=-y,d.duration=p,d.easing="cubic-bezier("+a(-p,0)+")",d}var h=r.SROLL_ACCELERATION*(n/Math.abs(n)),p=n/h,y=e/1+p*n/2;if(y>l){var g=l-e,v=(n-Math.sqrt(-2*h*g+n*n))/h;d.offset=-l,d.duration=v,d.easing="cubic-bezier("+a(-p,-p+v)+")",r["_bounce"+t]=n-h*v}else if(i-o>y){var g=i-o-e,v=(n+Math.sqrt(-2*h*g+n*n))/h;d.offset=o-i,d.duration=v,d.easing="cubic-bezier("+a(-p,-p+v)+")",r["_bounce"+t]=n-h*v}else d.offset=-y,d.duration=p,d.easing="cubic-bezier("+a(-p,0)+")",d.status="normal";return r["isScrolling"+t.toUpperCase()]=!0,d}}}),"object"==typeof module&&module.exports?r=v:window.XScroll=v,v}({}),a=function(){var t=function(t){this.data=t&&t.data||[],this.id=t&&t.id||"_ds_"+Date.now()};return t.prototype.appendData=function(t){this.data=this.data.concat(t)},t.prototype.removeData=function(){this.data=[]},t.prototype.getData=function(){return this.data},t.prototype.setId=function(t){return t?(this.id=t,this.id):void 0},t.prototype.getId=function(){return this.id},t}({}),s=function(e){var n=t,i=r,o=a,s=n.prefixStyle("transform"),l=function(t){this.super.call(this,t)};return l.DataSet=o,n.extend(i,l,{init:function(){{var t=this;t.userConfig=n.mix({data:[],gpuAcceleration:!0,lockX:!0,scrollbarX:!1,itemHeight:30},t.userConfig)}this.super.prototype.init.call(this),t._initInfinite()},_getDomInfo:function(){var t=this,e=t._formatData(),n=t.userConfig.itemHeight,i=0,o=[],r=0;t.hasSticky=!1,t.userConfig.maxSpeed=.06*n;for(var a=0,s=e.length;s>a;a++){var l=e[a];r=l.style&&l.style.height>=0?l.style.height:n,l._row=a,l._top=i,l._height=r,l.recycled=l.recycled===!1?!1:!0,o.push(l),i+=r,!t.hasSticky&&l.style&&"sticky"==l.style.position&&(t.hasSticky=!0)}return t.domInfo=o,o},appendDataSet:function(t){var e=this;!t instanceof o||e.datasets.push(t)},removeDataSet:function(t){var e=this;if(t){for(var n,i=0,o=e.datasets.length;o>i;i++)t==e.datasets[i].getId()&&(n=i);e.datasets.splice(n,1)}},getDataSets:function(){var t=this;return t.datasets},getDataSetById:function(t){var e=this;if(t)for(var n=0,i=e.datasets.length;i>n;n++)if(e.datasets[n].getId()==t)return e.datasets[n]},_formatData:function(){var t=this,e=[];for(var n in t.datasets)e=e.concat(t.datasets[n].getData());return e},_getChangedRows:function(t,e){var n=this,i={};for(var o in n.elementsPos)t.hasOwnProperty(o)||(i[o]="delete");for(var o in t)!t[o].recycled||n.elementsPos.hasOwnProperty(o)&&!e||(i[o]="add");return n.elementsPos=t,i},_getElementsPos:function(t){for(var e,n=this,t=-(t||n.getOffsetTop()),i=n.domInfo,o=n.userConfig.itemHeight,r=Math.ceil(n.height/o),a=Math.max(Math.ceil(r/3),0),s=Math.max(t-a*o,0),l={},c=0,d=i.length;d>c;c++)e=i[c],e._top>=s-o&&e._top<=s+2*a*o+n.height&&(l[e._row]=e);return l},render:function(){var t=this;this.super.prototype.render.call(this),t._getDomInfo(),t._initSticky();var e=t.height,n=t.domInfo[t.domInfo.length-1],i=n&&n._top?n._top+n._height:t.height;e>i&&(i=e),t.containerHeight=i,t.container.style.height=i,t.renderScrollBars(),t._renderNoRecycledEl(),t._update(t.getOffsetTop(),!0)},_update:function(t,e){var n=this,i=n.userConfig.gpuAcceleration?" translateZ(0) ":"",t=void 0===t?n.getOffsetTop():t,o=n._getElementsPos(t),r=n._getChangedRows(o,e),a=null;if(e)for(var l=0;l<n.infiniteLength;l++)n.infiniteElementsCache[l]._visible=!1,n.infiniteElements[l].style.visibility="hidden",delete n.infiniteElementsCache[l]._row;var c=function(){for(var t=0;t<n.infiniteLength;t++)if(!n.infiniteElementsCache[t]._visible)return n.infiniteElementsCache[t]._visible=!0,t},d=function(t){for(var e=0;e<n.infiniteLength;e++)n.infiniteElementsCache[e]._row==t&&(n.infiniteElementsCache[e]._visible=!1,n.infiniteElements[e].style.visibility="hidden",delete n.infiniteElementsCache[e]._row)};for(var l in r)if("delete"==r[l]&&d(l),"add"==r[l]){var f=c(o[l]._row);if(a=n.infiniteElements[f]){n.infiniteElementsCache[f]._row=o[l]._row;for(var u in o[l].style)"height"!=u&&"display"!=u&&"position"!=u&&(a.style[u]=o[l].style[u]);a.style.visibility="visible",a.style.height=o[l]._height+"px",a.style[s]="translateY("+o[l]._top+"px) "+i,n.userConfig.renderHook.call(n,a,o[l])}}},_renderNoRecycledEl:function(){var t=this,e=t.userConfig.gpuAcceleration?" translateZ(0) ":"";for(var n in t.domInfo)if(t.domInfo[n].recycled===!1){var i=t.domInfo[n].id&&document.getElementById(t.domInfo[n].id.replace("#",""))||document.createElement("div"),o="ks-xlist-row-"+Date.now();i.id=t.domInfo[n].id||o,t.domInfo[n].id=i.id,t.content.appendChild(i);for(var r in t.domInfo[n].style)"height"!=r&&"display"!=r&&"position"!=r&&(i.style[r]=t.domInfo[n].style[r]);i.style.top=0,i.style.position="absolute",i.style.display="block",i.style.height=t.domInfo[n]._height+"px",i.style[s]="translateY("+t.domInfo[n]._top+"px) "+e,t.domInfo[n].className&&(i.className=t.domInfo[n].className),t.userConfig.renderHook.call(t,i,t.domInfo[n])}},_initSticky:function(){var t=this;if(t.hasSticky&&!t._isStickyRendered){t._isStickyRendered=!0;var e=document.createElement("div");e.style.position="absolute",e.style.top="0",e.style.display="none",t.renderTo.appendChild(e),t.stickyElement=e,t.stickyDomInfo=[];for(var n=0,i=t.domInfo.length;i>n;n++)t.domInfo[n]&&t.domInfo[n].style&&"sticky"==t.domInfo[n].style.position&&t.stickyDomInfo.push(t.domInfo[n]);t.stickyDomInfoLength=t.stickyDomInfo.length}},_stickyHandler:function(t){var e=this;if(e.stickyDomInfoLength){for(var n=Math.abs(t),i=[],o=[],r=0;r<e.stickyDomInfoLength;r++)o.push(e.stickyDomInfo[r]._top),n>=e.stickyDomInfo[r]._top&&i.push(r);if(!i.length)return e.stickyElement.style.display="none",void(e.curStickyIndex=void 0);var a=Math.max.apply(null,i);if(e.curStickyIndex!==a){e.curStickyIndex=a,e.userConfig.renderHook.call(e,e.stickyElement,e.stickyDomInfo[e.curStickyIndex]),e.stickyElement.style.display="block",e.stickyElement.style.height=e.stickyDomInfo[e.curStickyIndex].style.height+"px",e.stickyElement.className=e.stickyDomInfo[e.curStickyIndex].className||"";for(var s in e.stickyDomInfo[e.curStickyIndex].style)"height"!=s&&"display"!=s&&"position"!=s&&(e.stickyElement.style[s]=e.stickyDomInfo[e.curStickyIndex].style[s])}return-t<Math.min.apply(null,o)?(e.stickyElement.style.display="none",void(e.curStickyIndex=void 0)):void 0}},enableGPUAcceleration:function(){var t=this;t.userConfig.gpuAcceleration=!0;for(var e=0;e<t.infiniteLength;e++)/translateZ/.test(t.infiniteElements[e].style[s])||(t.infiniteElements[e].style[s]+=" translateZ(0)")},disableGPUAcceleration:function(){var t=this;t.userConfig.gpuAcceleration=!1;for(var e=0;e<t.infiniteLength;e++)t.infiniteElements[e].style[s]=t.infiniteElements[e].style[s].replace(/translateZ\(0px\)/,"")},_initInfinite:function(){var t=this,e=t.userConfig.infiniteElements;t.datasets=[],t.userConfig.data&&t.userConfig.data.length&&t.datasets.push(new o({data:t.userConfig.data})),t.infiniteElements=t.renderTo.querySelectorAll(e),t.infiniteLength=t.infiniteElements.length,t.infiniteElementsCache=function(){for(var e=[],n=0;n<t.infiniteLength;n++)e.push({}),t.infiniteElements[n].style.position="absolute",t.infiniteElements[n].style.top=0,t.infiniteElements[n].style.visibility="hidden",t.infiniteElements[n].style.display="block";return e}(),t.elementsPos={},t.on("scroll",function(e){t._update(e.offset.y),t._stickyHandler(e.offset.y)})}}),"object"==typeof module&&module.exports?e=l:window.XList=l,l}({})}(),function(t,e){e.xscroll=t.XScroll,e.xlist=t.XList}(window,window.lib||(window.lib={}));