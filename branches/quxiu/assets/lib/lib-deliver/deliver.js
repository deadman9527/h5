!function(r){function t(r){if(r){var t=document.createElement("a");t.href=r,this.url=r,this.a=t}}var e=document;t.prototype={hostname:function(){return this.a.hostname},hash:function(){return this.a.hash},search:function(){return this.a.search},setkv:function(r){if(r&&-1!==r.indexOf("=")){var t=this.a.search,e=this.url;return t?e+"&"+r:"?"==e.substr(e.length-1)?e+r:e+"?"+r}},getval:function(r){var t,e=this.a.search,a=[],n=[],i=[],f=[];if(e&&(t=0==e.indexOf("?")?e.substr(1):"")){a=t.split("&");for(var l=0;l<a.length;l++){var o=a[l].split("="),s=o.length;if(r){if(2==s){if(r==o[0])return o[1]}else if(1==s&&r==o[0])return""}else n[l]=o[0],i[l]=o[1]}}return r?void 0:f=[n,i]},changeval:function(r,t){if(r){var e,a,n,i=this.a.search;if(i){if(e=0==i.indexOf("?")?i.substr(1):""){a=e.split("&");for(var f=0;f<a.length;f++){{var n=a[f].split("=");n.length}r==n[0]&&(n[1]=t,a[f]=n.join("="))}}return a.join("&")}}}};var a=function(r,e,a){if(r&&e&&a){var n=a.href;if(n&&-1==n.indexOf("#")){var i=new t(n),f=n.indexOf("?");a.href=-1==n.indexOf("?"+r+"=")&&-1==n.indexOf("&"+r+"=")?i.setkv(r+"="+e):a.href.substr(0,f+1)+i.changeval(r,e)}}},n=function(r,t){for(var e=0;e<r[2];e++)a(r[0][e],r[1][e],t)},i=function(r,t,e,a,i){for(var f=0;t>f;f++)a[r]!=e[f]&&n(i,a[r])};r.deliver=function(r){r=r||{};var a=r.isDeliver||!0,f=r.params||[],l=r.exclude;paramsVal=[];var o=e.querySelectorAll("a");if(o&&a){var s="[object Array]"==Object.prototype.toString.apply(f)?f.length:1,h=0,v=Object.prototype.toString.apply(l);"[object Array]"==v?h=l.length:"[object String]"==v&&(h=""==l?0:1);var u=new t(location.href);if(s>0)for(var c=0;s>c;c++)paramsVal[c]=u.getval(f[c]);0==s&&(f=u.getval()[0],paramsVal=u.getval()[1],s=u.getval()[0].length),u=null;var g=[f,paramsVal,s];if(h>0)var p=e.querySelectorAll(l);for(var c=0;c<o.length;c++)h>0?i(c,h,p,o,g):n(g,o[c])}}}(window.lib||(window.lib={}));