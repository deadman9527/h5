!function(e,n){function o(e){if(!r.paused)if(r.isSupportNative){var n=e.param.playIdentifier;n&&n.toString()!==c.toString()||(r.paused=!0,r.onended&&r.onended(),console.log("endedId:"+n))}else r.paused=!0,r.onended&&r.onended(),console.log("ended")}function t(){r.error=!0,r.pause(),r.onerror&&r.onerror(),console.log("error")}function s(e,n){return e=e.toString(),new Array(n+1-e.length).join("0")+e}var r=n.audio||(n.audio={}),i=e.document,a=e.WindVane,u=n.env.taobaoApp,d=new Audio,l=1,c=0,p={};r.isSupportNative=!1,u&&a&&(r.isSupportNative=u.version&&u.version.gte("4.0.0")),d.autoplay=!1,d.addEventListener("ended",o,!1),d.addEventListener("error",t,!1),i.addEventListener("AUDIO.IDLE",o,!1),r.paused=!0,r.play=function(e,n,o){if(1===arguments.length?"string"==typeof arguments[0]?this.src=arguments[0]:"function"==typeof arguments[0]&&(this.onended=n):2===arguments.length?"string"==typeof arguments[0]?(this.src=arguments[0],this.onended=arguments[1]):"function"==typeof arguments[0]&&(this.onended=arguments[0],this.onerror=arguments[1]):3===arguments.length&&(this.src=e,this.onended=n,this.onerror=o),this.error=!1,this.src){if(this.paused=!1,this.isSupportNative){if(c=p[this.src],!c){var r=Date.now()%1e3;p[this.src]=c="1"+s(r,3)+s(l,4),l=++l%1e4}console.log("playedId:"+c),a.call("H5AudioPlayer","play",{voiceUrl:this.src,playIdentifier:c},function(){console.log("success to play")},function(){console.log("fail to play"),t()})}else d.paused||(d.pause(),d.currentTime=0),d.src=this.src,d.play();console.log("play")}else t()},r.pause=function(e){(!this.paused||e)&&(this.paused=!0,this.isSupportNative?a.call("H5AudioPlayer","stop",{voiceUrl:this.src||""},function(){console.log("success to stop")},function(){console.log("fail to stop")}):(d.pause(),r.error||(d.currentTime=0)),console.log("paused"))}}(window,window.lib||(window.lib={}));