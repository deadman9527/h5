!function(e,t){var n={getParamsFromUrl:function(){for(var e={},t=window.location.search.substring(1),n=t.split("&"),o=0;o<n.length;o++){var r=n[o].split("=");if("undefined"==typeof e[r[0]])e[r[0]]=r[1];else if("string"==typeof e[r[0]]){var i=[e[r[0]],r[1]];e[r[0]]=i}else e[r[0]].push(r[1])}return e}},o=location.href.indexOf("http://h5.quxiu.me")>-1;t.login={isLogin:function(){return!!t.storage.get("accessToken")},goLogin:function(e){e=e||location.href,location.href=o?"http://h5.quxiu.me/login.html?redirectUrl="+encodeURIComponent(e):"login.html?redirectUrl="+encodeURIComponent(e)},logout:function(e){e=e||"",t.storage.rm("accessToken");var n=this;setTimeout(function(){n.goLogin(e)},100)},login:function(e,r){if(e&&e.accessToken){if(!r){var i=n.getParamsFromUrl();r=i.redirectUrl?decodeURIComponent(i.redirectUrl):o?"http://h5.quxiu.me":"index.html"}t.storage.set("accessToken",e.accessToken),t.storage.set("userId",e.user.userId),t.storage.set("userName",e.user.userName),e.user.nickName?t.storage.set("nickName",e.user.nickName):t.storage.set("nickName",e.user.userName),setTimeout(function(){location.href=r},100)}},getUserName:function(){return t.storage.get("userName")},getNickName:function(){return t.storage.get("nickName")}}}(window,window.lib||(window.lib={}));