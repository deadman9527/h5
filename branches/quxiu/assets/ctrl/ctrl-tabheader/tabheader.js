!function(e,t){function n(){var o="scrollTop"in e.document.body?e.document.body.scrollTop:a.scrollTop;o!==t&&o>0&&e.document.body&&(e.document.body.insertBefore(s,e.document.body.firstChild),s.getBoundingClientRect&&0===s.getBoundingClientRect().top||(a.className=a.className.replace(i,"")),e.document.body.removeChild(s),e.removeEventListener?e.removeEventListener("scroll",n,!1):e.detachEvent("onscroll",n))}var i="fixed-supported",s=e.document.createElement("div"),o=e.navigator.userAgent,a=e.document.documentElement;s.style.position="fixed",s.style.top=0,o.match(/Android 2\.[1256]/)&&o.indexOf("AppleWebKit")>-1&&o.match(/Opera Mobi\/([0-9]+)/)&&RegExp.$1<7458&&e.operamini&&"[object OperaMini]"==={}.toString.call(e.operamini)&&o.match(/Fennec\/([0-9]+)/)&&RegExp.$1<6||(a.className+=" "+i,e.addEventListener?e.addEventListener("scroll",n,!1):e.attachEvent("onscroll",n)),e.FixedFixed=n}(this),function(e,t){function n(e,t,n){var i=e+":",s=document.createElement("test"),o=s.style;return o.cssText=n?i+t:i+["-webkit-","-moz-","-ms-","-o-",""].join(t+";"+i)+t+";",-1!==o[e].indexOf(t)}function i(e){return parseInt(e,10)||0}var s={classes:{plugin:"fixedsticky",active:"fixedsticky-on",inactive:"fixedsticky-off",clone:"fixedsticky-dummy",withoutFixedFixed:"fixedsticky-withoutfixedfixed"},keys:{offset:"data-fixedStickyOffset",position:"data-fixedStickyPosition"},tests:{sticky:n("position","sticky"),fixed:n("position","fixed",!0)},getScrollTop:function(){var t="pageYOffset",n="scrollTop";return e?t in e?e[t]:e.document.documentElement[n]:e.document.body[n]},bypass:function(){return s.tests.sticky||!s.tests.fixed||e.FixedFixed&&!t(e.document.documentElement).hasClass("fixed-supported")},update:function(e){function n(){var e=m+c;return e>u&&b+x>=e+l}function o(){return u+(l||0)>m+h-r&&m+h-r>=b+(l||0)}if(e.offsetWidth){var a,c,r,d=t(e),l=d.height(),u=Number(d.attr(s.keys.offset)),m=s.getScrollTop(),f=d.is("."+s.classes.active),p=function(e){d[e?"addClass":"removeClass"](s.classes.active)[e?"removeClass":"addClass"](s.classes.inactive)},h=t(window).height(),v=JSON.parse(d.attr(s.keys.position)),y=d.parent(),b=y.offset().top,x=y.height();u||(u=d.offset().top,d.attr(s.keys.offset,u),d.after(t("<div>").addClass(s.classes.clone).height(l))),v||(a="auto"!==d.css("top")||"auto"!==d.css("bottom"),a||d.css("position","fixed"),v={top:"auto"!==d.css("top"),bottom:"auto"!==d.css("bottom")},a||d.css("position",""),d.attr(s.keys.position,JSON.stringify(v))),c=i(d.css("top")),r=i(d.css("bottom")),v.top&&n()||v.bottom&&o()?f||p(!0):f&&p(!1)}},destroy:function(n){var i=t(n);if(!s.bypass())return t(e).off(".fixedsticky"),i.each(function(){t(this).removeClass(s.classes.active).removeClass(s.classes.inactive).next("."+s.classes.clone).remove(),this.removeAttribute(s.keys.offset),this.removeAttribute(s.keys.position)})},init:function(n){var i=t(n);if(!s.bypass())return i.each(function(){var n=this;t(e).on("scroll.fixedsticky",function(){s.update(n)}),s.update(this),t(e).on("resize.fixedsticky",function(){i.is("."+s.classes.active)&&s.update(n)})})}};e.FixedSticky=s,t.fn.fixedsticky=function(e){if("function"==typeof s[e])return s[e].call(s,this);if("object"!=typeof e&&e)throw new Error("Method `"+e+"` does not exist on jQuery.fixedsticky");return s.init.call(s,this)}}(this,Zepto),function(e,t){function n(e,n){var s=Date.now()+"-"+ ++i,o=document.createDocumentFragment(),a=document.createElement("div");a.className="head-container";var c=document.createElement("div");c.className="menus",1!==arguments.length||arguments[0]instanceof HTMLElement||(n=arguments[0],e=null),e||(e=document.createElement("div")),n=n||{},a.setAttribute("data-ctrl-name","tabheader"),e.setAttribute("data-ctrl-id",s),e.className="tab-header",c.appendChild(e),a.appendChild(c),o.appendChild(a);var r=document.createElement("div");r.className="content",e.appendChild(r);var d,l,u=lib.scroll(r,{direction:"x"});this.renderSelected=function(){l=document.createElement("div"),r.appendChild(l),l.className="indicator",this.updateSelected()},this.updateSelected=function(e){var t=r.childNodes[m];document.getElementsByClassName("tabheader-selected")[0]&&(document.getElementsByClassName("tabheader-selected")[0].className=""),t.className="tabheader-selected",this.active=m;t.getBoundingClientRect().width;l.style.width=t.getBoundingClientRect().width-20+"px",l.style.left=t.offsetLeft+"px",l.style.position="absolute",l.style.bottom="0",l.style.webkitTransitionDuration=Math.abs(.1*e).toFixed(1)+"s",u.scrollToElement(t,!0)};var m=0;Object.defineProperty(this,"selected",{get:function(){return m},set:function(e){if(m!=e){var t=document.createEvent("HTMLEvents");t.initEvent("select",!0,!0),t.selected=p.content[e],t.selectIndex=e,o.dispatchEvent(t);var n=m-e;return m=e,this.updateSelected(n),m}}});var f;Object.defineProperty(this,"active",{get:function(){return f},set:function(e){if(f!=e&&d){var t=d.childNodes[e];return document.getElementsByClassName("tabheader-active")[0]&&(document.getElementsByClassName("tabheader-active")[0].className=""),t.className="tabheader-active",f=e}}});var p=null;Object.defineProperty(this,"viewModel",{get:function(){return p},set:function(e){function n(e,t,n){var i=e.offsetHeight,s=document.documentElement.clientHeight,o=document.body.scrollTop,a=Number($(e).offset().top),c="auto"==$(e).css("top")?!1:!0;c?a+i+n>o+s&&(FixedSticky.destroy($(e)),$(e).css({top:"auto",bottom:void 0==n?"auto":n+"px"}),$(e).fixedsticky()):o+t>a&&(FixedSticky.destroy($(e)),$(e).css({bottom:"auto",top:void 0==t?"auto":t+"px"}),$(e).fixedsticky())}var i=this;if(r.innerHTML="",e.hasMore){var s=document.createElement("div");s.className="more-icon";var o=document.createElement("div");o.className="arrow";var l=document.createElement("div");l.className="tabheader-title",l.innerText="分类列表",d=document.createElement("div"),d.className="more-container",a.appendChild(l),s.appendChild(o),a.appendChild(s),a.appendChild(d),s.addEventListener("click",function(){$(this).hasClass("tabheader-arrow-up")?($(d).hide(),$(this).removeClass("tabheader-arrow-up"),$(c).css({position:"static",visibility:"visible"}),$(l).hide()):($(this).addClass("tabheader-arrow-up"),$(d).show(),$(c).css({position:"absolute",visibility:"hidden"}),$(l).show())});for(var m=0;m<e.content.length;m++){var f=document.createElement("div");f.innerText=e.content[m].name,e.colNumber&&$(f).css({width:100/e.colNumber+"%"}),0==e.itemBorder&&$(f).css({border:"none"}),e.itemFontsize&&$(f).css({fontSize:e.itemFontsize}),d.appendChild(f),f.addEventListener("click",function(e){return function(){i.active=e,i.selected=e,$(d).hide(),$(s).removeClass("tabheader-arrow-up"),$(c).css({position:"static",visibility:"visible"}),$(l).hide()}}(m),!1),i.active=0}}for(var m=0;m<e.content.length;m++){var f=document.createElement("span");e.menuPadding&&$(f).css({padding:"0 "+e.menuPadding/2+"px"}),f.innerText=e.content[m].name,r.appendChild(f),f.addEventListener("click",function(e){return function(){i.selected=e}}(m),!1)}this.renderSelected();var h=document.createRange();h.setStartBefore(r),h.setEndAfter(r),r.style.width=h.getBoundingClientRect().width+"px",u.init(),u.refresh();var v;e.bottom&&(v=0,t.bottomBar&&t.bottomBar.getInfo&&(v=parseInt(t.bottomBar.getInfo().height)),$(a).parent().css({bottom:v+"px"}));var y;return e.top&&(y=0,t.topBar&&t.topBar.getInfo&&(y=parseInt(t.topBar.getInfo().height))),$(a).parent().addClass("fixedsticky"),$(a).parent().fixedsticky(),$(window).on("scroll",function(){n($(a).parent()[0],y,v)}),window.onload=function(){FixedSticky.destroy($(a).parent()),$(a).parent().fixedsticky()},p=e}}),this.addEventListener=function(){o.addEventListener.apply(o,arguments)},this.removeEventListener=function(){o.removeEventListener.apply(o,arguments)},this.remove=function(){e.parentNode&&e.parentNode.removeChild(e)},this.root=o,this.element=e}var i=0;t.tabheader=n}(window,window.ctrl||(window.ctrl={}));