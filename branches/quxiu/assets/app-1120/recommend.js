(function(){var t=this,e=t._,n=Array.prototype,i=Object.prototype,r=Function.prototype,o=n.push,a=n.slice,s=n.concat,l=i.toString,c=i.hasOwnProperty,u=Array.isArray,h=Object.keys,f=r.bind,d=function(t){return t instanceof d?t:this instanceof d?void(this._wrapped=t):new d(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=d),exports._=d):t._=d,d.VERSION="1.7.0";var v=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)}}return function(){return t.apply(e,arguments)}};d.iteratee=function(t,e,n){return null==t?d.identity:d.isFunction(t)?v(t,e,n):d.isObject(t)?d.matches(t):d.property(t)},d.each=d.forEach=function(t,e,n){if(null==t)return t;e=v(e,n);var i,r=t.length;if(r===+r)for(i=0;r>i;i++)e(t[i],i,t);else{var o=d.keys(t);for(i=0,r=o.length;r>i;i++)e(t[o[i]],o[i],t)}return t},d.map=d.collect=function(t,e,n){if(null==t)return[];e=d.iteratee(e,n);for(var i,r=t.length!==+t.length&&d.keys(t),o=(r||t).length,a=Array(o),s=0;o>s;s++)i=r?r[s]:s,a[s]=e(t[i],i,t);return a};var p="Reduce of empty array with no initial value";d.reduce=d.foldl=d.inject=function(t,e,n,i){null==t&&(t=[]),e=v(e,i,4);var r,o=t.length!==+t.length&&d.keys(t),a=(o||t).length,s=0;if(arguments.length<3){if(!a)throw new TypeError(p);n=t[o?o[s++]:s++]}for(;a>s;s++)r=o?o[s]:s,n=e(n,t[r],r,t);return n},d.reduceRight=d.foldr=function(t,e,n,i){null==t&&(t=[]),e=v(e,i,4);var r,o=t.length!==+t.length&&d.keys(t),a=(o||t).length;if(arguments.length<3){if(!a)throw new TypeError(p);n=t[o?o[--a]:--a]}for(;a--;)r=o?o[a]:a,n=e(n,t[r],r,t);return n},d.find=d.detect=function(t,e,n){var i;return e=d.iteratee(e,n),d.some(t,function(t,n,r){return e(t,n,r)?(i=t,!0):void 0}),i},d.filter=d.select=function(t,e,n){var i=[];return null==t?i:(e=d.iteratee(e,n),d.each(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i)},d.reject=function(t,e,n){return d.filter(t,d.negate(d.iteratee(e)),n)},d.every=d.all=function(t,e,n){if(null==t)return!0;e=d.iteratee(e,n);var i,r,o=t.length!==+t.length&&d.keys(t),a=(o||t).length;for(i=0;a>i;i++)if(r=o?o[i]:i,!e(t[r],r,t))return!1;return!0},d.some=d.any=function(t,e,n){if(null==t)return!1;e=d.iteratee(e,n);var i,r,o=t.length!==+t.length&&d.keys(t),a=(o||t).length;for(i=0;a>i;i++)if(r=o?o[i]:i,e(t[r],r,t))return!0;return!1},d.contains=d.include=function(t,e){return null==t?!1:(t.length!==+t.length&&(t=d.values(t)),d.indexOf(t,e)>=0)},d.invoke=function(t,e){var n=a.call(arguments,2),i=d.isFunction(e);return d.map(t,function(t){return(i?e:t[e]).apply(t,n)})},d.pluck=function(t,e){return d.map(t,d.property(e))},d.where=function(t,e){return d.filter(t,d.matches(e))},d.findWhere=function(t,e){return d.find(t,d.matches(e))},d.max=function(t,e,n){var i,r,o=-1/0,a=-1/0;if(null==e&&null!=t){t=t.length===+t.length?t:d.values(t);for(var s=0,l=t.length;l>s;s++)i=t[s],i>o&&(o=i)}else e=d.iteratee(e,n),d.each(t,function(t,n,i){r=e(t,n,i),(r>a||r===-1/0&&o===-1/0)&&(o=t,a=r)});return o},d.min=function(t,e,n){var i,r,o=1/0,a=1/0;if(null==e&&null!=t){t=t.length===+t.length?t:d.values(t);for(var s=0,l=t.length;l>s;s++)i=t[s],o>i&&(o=i)}else e=d.iteratee(e,n),d.each(t,function(t,n,i){r=e(t,n,i),(a>r||1/0===r&&1/0===o)&&(o=t,a=r)});return o},d.shuffle=function(t){for(var e,n=t&&t.length===+t.length?t:d.values(t),i=n.length,r=Array(i),o=0;i>o;o++)e=d.random(0,o),e!==o&&(r[o]=r[e]),r[e]=n[o];return r},d.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=d.values(t)),t[d.random(t.length-1)]):d.shuffle(t).slice(0,Math.max(0,e))},d.sortBy=function(t,e,n){return e=d.iteratee(e,n),d.pluck(d.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var m=function(t){return function(e,n,i){var r={};return n=d.iteratee(n,i),d.each(e,function(i,o){var a=n(i,o,e);t(r,i,a)}),r}};d.groupBy=m(function(t,e,n){d.has(t,n)?t[n].push(e):t[n]=[e]}),d.indexBy=m(function(t,e,n){t[n]=e}),d.countBy=m(function(t,e,n){d.has(t,n)?t[n]++:t[n]=1}),d.sortedIndex=function(t,e,n,i){n=d.iteratee(n,i,1);for(var r=n(e),o=0,a=t.length;a>o;){var s=o+a>>>1;n(t[s])<r?o=s+1:a=s}return o},d.toArray=function(t){return t?d.isArray(t)?a.call(t):t.length===+t.length?d.map(t,d.identity):d.values(t):[]},d.size=function(t){return null==t?0:t.length===+t.length?t.length:d.keys(t).length},d.partition=function(t,e,n){e=d.iteratee(e,n);var i=[],r=[];return d.each(t,function(t,n,o){(e(t,n,o)?i:r).push(t)}),[i,r]},d.first=d.head=d.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:a.call(t,0,e)},d.initial=function(t,e,n){return a.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},d.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},d.rest=d.tail=d.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},d.compact=function(t){return d.filter(t,d.identity)};var g=function(t,e,n,i){if(e&&d.every(t,d.isArray))return s.apply(i,t);for(var r=0,a=t.length;a>r;r++){var l=t[r];d.isArray(l)||d.isArguments(l)?e?o.apply(i,l):g(l,e,n,i):n||i.push(l)}return i};d.flatten=function(t,e){return g(t,e,!1,[])},d.without=function(t){return d.difference(t,a.call(arguments,1))},d.uniq=d.unique=function(t,e,n,i){if(null==t)return[];d.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=d.iteratee(n,i));for(var r=[],o=[],a=0,s=t.length;s>a;a++){var l=t[a];if(e)a&&o===l||r.push(l),o=l;else if(n){var c=n(l,a,t);d.indexOf(o,c)<0&&(o.push(c),r.push(l))}else d.indexOf(r,l)<0&&r.push(l)}return r},d.union=function(){return d.uniq(g(arguments,!0,!0,[]))},d.intersection=function(t){if(null==t)return[];for(var e=[],n=arguments.length,i=0,r=t.length;r>i;i++){var o=t[i];if(!d.contains(e,o)){for(var a=1;n>a&&d.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},d.difference=function(t){var e=g(a.call(arguments,1),!0,!0,[]);return d.filter(t,function(t){return!d.contains(e,t)})},d.zip=function(t){if(null==t)return[];for(var e=d.max(arguments,"length").length,n=Array(e),i=0;e>i;i++)n[i]=d.pluck(arguments,i);return n},d.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},d.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=d.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}for(;r>i;i++)if(t[i]===e)return i;return-1},d.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=t.length;for("number"==typeof n&&(i=0>n?i+n+1:Math.min(i,n+1));--i>=0;)if(t[i]===e)return i;return-1},d.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),o=0;i>o;o++,t+=n)r[o]=t;return r};var y=function(){};d.bind=function(t,e){var n,i;if(f&&t.bind===f)return f.apply(t,a.call(arguments,1));if(!d.isFunction(t))throw new TypeError("Bind must be called on a function");return n=a.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(a.call(arguments)));y.prototype=t.prototype;var r=new y;y.prototype=null;var o=t.apply(r,n.concat(a.call(arguments)));return d.isObject(o)?o:r}},d.partial=function(t){var e=a.call(arguments,1);return function(){for(var n=0,i=e.slice(),r=0,o=i.length;o>r;r++)i[r]===d&&(i[r]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return t.apply(this,i)}},d.bindAll=function(t){var e,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(e=1;i>e;e++)n=arguments[e],t[n]=d.bind(t[n],t);return t},d.memoize=function(t,e){var n=function(i){var r=n.cache,o=e?e.apply(this,arguments):i;return d.has(r,o)||(r[o]=t.apply(this,arguments)),r[o]};return n.cache={},n},d.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},d.defer=function(t){return d.delay.apply(d,[t,1].concat(a.call(arguments,1)))},d.throttle=function(t,e,n){var i,r,o,a=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:d.now(),a=null,o=t.apply(i,r),a||(i=r=null)};return function(){var c=d.now();s||n.leading!==!1||(s=c);var u=e-(c-s);return i=this,r=arguments,0>=u||u>e?(clearTimeout(a),a=null,s=c,o=t.apply(i,r),a||(i=r=null)):a||n.trailing===!1||(a=setTimeout(l,u)),o}},d.debounce=function(t,e,n){var i,r,o,a,s,l=function(){var c=d.now()-a;e>c&&c>0?i=setTimeout(l,e-c):(i=null,n||(s=t.apply(o,r),i||(o=r=null)))};return function(){o=this,r=arguments,a=d.now();var c=n&&!i;return i||(i=setTimeout(l,e)),c&&(s=t.apply(o,r),o=r=null),s}},d.wrap=function(t,e){return d.partial(e,t)},d.negate=function(t){return function(){return!t.apply(this,arguments)}},d.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},d.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},d.before=function(t,e){var n;return function(){return--t>0?n=e.apply(this,arguments):e=null,n}},d.once=d.partial(d.before,2),d.keys=function(t){if(!d.isObject(t))return[];if(h)return h(t);var e=[];for(var n in t)d.has(t,n)&&e.push(n);return e},d.values=function(t){for(var e=d.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=t[e[r]];return i},d.pairs=function(t){for(var e=d.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=[e[r],t[e[r]]];return i},d.invert=function(t){for(var e={},n=d.keys(t),i=0,r=n.length;r>i;i++)e[t[n[i]]]=n[i];return e},d.functions=d.methods=function(t){var e=[];for(var n in t)d.isFunction(t[n])&&e.push(n);return e.sort()},d.extend=function(t){if(!d.isObject(t))return t;for(var e,n,i=1,r=arguments.length;r>i;i++){e=arguments[i];for(n in e)c.call(e,n)&&(t[n]=e[n])}return t},d.pick=function(t,e,n){var i,r={};if(null==t)return r;if(d.isFunction(e)){e=v(e,n);for(i in t){var o=t[i];e(o,i,t)&&(r[i]=o)}}else{var l=s.apply([],a.call(arguments,1));t=new Object(t);for(var c=0,u=l.length;u>c;c++)i=l[c],i in t&&(r[i]=t[i])}return r},d.omit=function(t,e,n){if(d.isFunction(e))e=d.negate(e);else{var i=d.map(s.apply([],a.call(arguments,1)),String);e=function(t,e){return!d.contains(i,e)}}return d.pick(t,e,n)},d.defaults=function(t){if(!d.isObject(t))return t;for(var e=1,n=arguments.length;n>e;e++){var i=arguments[e];for(var r in i)void 0===t[r]&&(t[r]=i[r])}return t},d.clone=function(t){return d.isObject(t)?d.isArray(t)?t.slice():d.extend({},t):t},d.tap=function(t,e){return e(t),t};var w=function(t,e,n,i){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof d&&(t=t._wrapped),e instanceof d&&(e=e._wrapped);var r=l.call(t);if(r!==l.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]===t)return i[o]===e;var a=t.constructor,s=e.constructor;if(a!==s&&"constructor"in t&&"constructor"in e&&!(d.isFunction(a)&&a instanceof a&&d.isFunction(s)&&s instanceof s))return!1;n.push(t),i.push(e);var c,u;if("[object Array]"===r){if(c=t.length,u=c===e.length)for(;c--&&(u=w(t[c],e[c],n,i)););}else{var h,f=d.keys(t);if(c=f.length,u=d.keys(e).length===c)for(;c--&&(h=f[c],u=d.has(e,h)&&w(t[h],e[h],n,i)););}return n.pop(),i.pop(),u};d.isEqual=function(t,e){return w(t,e,[],[])},d.isEmpty=function(t){if(null==t)return!0;if(d.isArray(t)||d.isString(t)||d.isArguments(t))return 0===t.length;for(var e in t)if(d.has(t,e))return!1;return!0},d.isElement=function(t){return!(!t||1!==t.nodeType)},d.isArray=u||function(t){return"[object Array]"===l.call(t)},d.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},d.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){d["is"+t]=function(e){return l.call(e)==="[object "+t+"]"}}),d.isArguments(arguments)||(d.isArguments=function(t){return d.has(t,"callee")}),"function"!=typeof/./&&(d.isFunction=function(t){return"function"==typeof t||!1}),d.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},d.isNaN=function(t){return d.isNumber(t)&&t!==+t},d.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===l.call(t)},d.isNull=function(t){return null===t},d.isUndefined=function(t){return void 0===t},d.has=function(t,e){return null!=t&&c.call(t,e)},d.noConflict=function(){return t._=e,this},d.identity=function(t){return t},d.constant=function(t){return function(){return t}},d.noop=function(){},d.property=function(t){return function(e){return e[t]}},d.matches=function(t){var e=d.pairs(t),n=e.length;return function(t){if(null==t)return!n;t=new Object(t);for(var i=0;n>i;i++){var r=e[i],o=r[0];if(r[1]!==t[o]||!(o in t))return!1}return!0}},d.times=function(t,e,n){var i=Array(Math.max(0,t));e=v(e,n,1);for(var r=0;t>r;r++)i[r]=e(r);return i},d.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},d.now=Date.now||function(){return(new Date).getTime()};var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},x=d.invert(b),E=function(t){var e=function(e){return t[e]},n="(?:"+d.keys(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}};d.escape=E(b),d.unescape=E(x),d.result=function(t,e){if(null==t)return void 0;var n=t[e];return d.isFunction(n)?t[e]():n};var T=0;d.uniqueId=function(t){var e=++T+"";return t?t+e:e},d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var k=/(.)^/,S={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},M=/\\|'|\r|\n|\u2028|\u2029/g,F=function(t){return"\\"+S[t]};d.template=function(t,e,n){!e&&n&&(e=n),e=d.defaults({},e,d.templateSettings);var i=RegExp([(e.escape||k).source,(e.interpolate||k).source,(e.evaluate||k).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(i,function(e,n,i,a,s){return o+=t.slice(r,s).replace(M,F),r=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(s){throw s.source=o,s}var l=function(t){return a.call(this,t,d)},c=e.variable||"obj";return l.source="function("+c+"){\n"+o+"}",l},d.chain=function(t){var e=d(t);return e._chain=!0,e};var A=function(t){return this._chain?d(t).chain():t};d.mixin=function(t){d.each(d.functions(t),function(e){var n=d[e]=t[e];d.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),A.call(this,n.apply(d,t))}})},d.mixin(d),d.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];d.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],A.call(this,n)}}),d.each(["concat","join","slice"],function(t){var e=n[t];d.prototype[t]=function(){return A.call(this,e.apply(this._wrapped,arguments))}}),d.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return d})}).call(this),function(t,e){function n(t){var e=document.createElement("style");document.head.appendChild(e),e.innerHTML=t}function i(e){this.options={},t.extend(this.options,o,e||{}),this._init()}var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,1/60*1e3)},o={trigger:null,position:null,onClick:function(){},style:".ve-gotop {            position: fixed;            right: 0.4rem;            bottom: 0.4rem;            z-index: 10000;            opacity: 0;            pointer-events: none;            -webkit-transition: opacity 0.15s linear;            transition: opacity 0.15s linear;            width: 33px;            height: 33px;            background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAD2klEQVR42u2cTUsbQRjHLWQphR6UHGrB9JP01MbmC9RGe/eY72M2viu+NBgqvq0bFFFEUQ8eNCAa4kEfRBEUBd8ufR67A6Gx3d3svGymK/xAJ9nNzC+bmf9OZmyS8ZPL5QwkgXxGMkgWsZESAkgF2UQKzmMZ57kJxBBVL1mNb0Y6kHkEAjLvnKu5URofQz4hNgKCsJ3XiIVRgIF8Qw4RkMSh85pGGAS8Qr4gFQQUUUFSVBdVElrZRyAk2EirbAlpBEJKWlZnmEUg5GSRmCgJrxELgQbBojrzlvDWCTzQYGxS3XlJeIPsINCg7FAbeOSDVQQanNVAfQbrGDUhW6+ETgQ0o8uvhHcIaEqrn9hsaSzC8hTHnXsH0JyUl1GiorsIp42Gt3sI/Un/6z7iUHUFTdMMRM6NnFk9nxF7SUS7ioaPjY3B+Pi4ChFEskaEigQ5NTUFd3d3zywsLKgQYf0pIS5bwuTkJNze3sLi4iLMzs7Cw8MDFItFDuc2Xag5pqVaRIdMCSMjI3B9fQ3r6+us7FnG4+MjLC8vyxbRUS1iXpaEoaEhuLi4gK2trZrHSMbT0xOsra3JFGFVZweQQW9vL5yenkKpVGJlf5WxsbEhSwRhkIiELBHlcplwfd7MzMyzjO3tbVkiPpCIpAQJdBXQ1UBXBf3tWcbu7q4MEUkSkREsgd5Z6heof2BlvmTs7++LFpEhET0CJdDIQCMEjRSsrC4ZBwcHIkVkSURRlATbtikrUGZgZYFkHB0dQV9fn4i6LpGIPRES5ubmKDFSemRlXGQcHx9Df38/7/qWmgRGZ5LByrjKODk5gYGBAa7nbhIYnVmZEBlnZ2cwODjIVcSewOgsVMb5+TkMDw9z+2gUBUVnKTIuLy9hdHSUS2fZIyA6S5VxdXVF8xrBvvOgMME5OiuRcXNzAxMTE3WdgwWqJMforFQGddL5fN738SxiJwJEZ+qwqqOzchk0bBcKBV/Hspsug290Vi/j/v4epqen/RxrsDkJy+PsMovO9Jl0ic5KZdBsF/3u5Rjbz1QdE0GN9x6d1fcZNVes21Rd3McVwYaqMEOdptfk2VIzne9RhE7Y3r7g0V9E0u9XfiQhCGEUWUZi7l8C6y8iHS0LcFkWwGSk/vuFItHSoZdX3oOmvPe7sq5LQwnf611raWokwYyWIP9ugxEtSsc2RNsUsO7RxhWsc7SVSca+UBqGwjxERtsdsU4qN8CmdNsAGzRvdCrYEt2JGGHdJN+OrAgUsIK0e+8M1UuJI1+RPIfG/3DOFQ9eM/VXShvyEelGskjxhX+k8dN5rNt5bpusd/4XjtUkOQ5Pct4AAAAASUVORK5CYII=) no-repeat;            background-size: contain;        }            .ve-gotop-active {            opacity: 1;            pointer-events: auto;        }"};t.extend(i.prototype,{_init:function(){n(this.options.style);var e=this,i=e.options;i.trigger||(i.trigger=t('<div class="ve-gotop"></div>').appendTo("body")),i.position&&t(i.trigger).css({bottom:i.position.bottom,right:i.position.right}),t(i.trigger).on("click",function(t){t.preventDefault(),window.scrollTo(0,0),i.onClick&&i.onClick.call(e,t)}),e._EventHandler=t(window).on("scroll touchend",function(){e._check()})},_check:function(){var e=this;r(function(){var n=t("body").scrollTop(),i=window.innerHeight;n>i?e.show():e.hide()})},destroy:function(){t(window).off({type:this._EventHandler}),t(this.trigger).remove()},show:function(){t(this.options.trigger).addClass("ve-gotop-active")},hide:function(){t(this.options.trigger).removeClass("ve-gotop-active")}}),t.fn.gotop=function(t){return t||(t={}),t.trigger=this,new i(t)},e.goTop=i}(Zepto,window.lib||(window.lib={})),function(t,e){var n=navigator.appVersion.match(/(iPhone\sOS)\s([\d_]+)/),i=n&&n[2].split("_");i=i&&parseFloat(i.length>1?i.splice(0,2).join("."):i[0],10);var r=i&&6>i,o={defaultOpts:{interval:200,threshold:5,container:null},init:function(e){this.options=t.extend(!0,{},this.defaultOpts,e),this.addEvent(),this.trigger()},addEvent:function(){var e=this,n=this.options;if(r){var i={},o=null;t(window).on("touchstart",function(){i={scrollY:window.scrollY,time:Date.now()},o&&clearTimeout(o)}).on("touchend",function(t){if(t&&t.changedTouches){var r=Math.abs(window.scrollY-i.scrollY);if(r>n.threshold){var a=Date.now()-i.time;o=setTimeout(function(){e.update(),i={},clearTimeout(o),o=null},a>n.interval?0:200)}}else e.update()}).on("touchcancel",function(){o&&clearTimeout(o),i={}})}else{var a=t(e.options.container?e.options.container:window);a.on("scroll",function(){e.update()})}},trigger:function(){var e=this,n=(this.options,r&&"touchend"||"scroll");e.prevlist&&e.prevlist.each(function(t,e){e&&(e.onerror=e.onload=null)}),e.imglist=t(".lazy"),e.prevlist=t.extend({},!0,e.imglist),t(window).trigger(n)},inviewport:function(t,e){var n=window.pageYOffset,i=window.pageYOffset+window.innerHeight,r=t.offset().top;return r>=n&&i>=r+(e||-100)},update:function(){var e=this;e.imglist.each(function(n,i){if(i&&e.inviewport(t(i))){var r=t(i),o=r.attr("dataimg"),a=new Image;a.src=o,a.onload=function(){e.imglist[n]=null,r.removeClass("lazy").removeAttr("dataimg").css("background-image","url("+o+")"),a.onload=a.onerror=null},a.onerror=function(){e.imglist[n]=null,r.removeClass("lazy").removeAttr("dataimg").css("background-image","url(http://h5.quxiu.me/assets/img/cart_img_black_640x253.png)"),a.onload=a.onerror=null}}})}};e.lazyload=o}(Zepto,window.lib?window.lib:window.lib={}),!function(t,e){function n(t,e){return[[(t/3+(t+e)/3-t)/(e-t),(t*t/3+t*e*2/3-t*t)/(e*e-t*t)],[(e/3+(t+e)/3-t)/(e-t),(e*e/3+t*e*2/3-t*t)/(e*e-t*t)]]}function i(t){if(this.v=t.v||0,this.a=t.a||0,"undefined"!=typeof t.t&&(this.t=t.t),"undefined"!=typeof t.s&&(this.s=t.s),"undefined"==typeof this.t)if("undefined"==typeof this.s)this.t=-this.v/this.a;else{var e=(Math.sqrt(this.v*this.v+2*this.a*this.s)-this.v)/this.a,n=(-Math.sqrt(this.v*this.v+2*this.a*this.s)-this.v)/this.a;this.t=Math.min(e,n)}"undefined"==typeof this.s&&(this.s=this.a*this.t*this.t/2+this.v*this.t)}i.prototype.generateCubicBezier=function(){return n(this.v/this.a,this.t+this.v/this.a)},e.motion=i}(window,window.lib||(window.lib={})),!function(t){"use strict";function e(t,e){for(var n=t;n;){if(n.contains(e)||n==e)return n;n=n.parentNode}return null}function n(t,e,n){var i=l.createEvent("HTMLEvents");if(i.initEvent(e,!0,!0),"object"==typeof n)for(var r in n)i[r]=n[r];t.dispatchEvent(i)}function i(t,e,n,i,r,o,a,s){var l=Math.atan2(s-o,a-r)-Math.atan2(i-e,n-t),c=Math.sqrt((Math.pow(s-o,2)+Math.pow(a-r,2))/(Math.pow(i-e,2)+Math.pow(n-t,2))),u=[r-c*t*Math.cos(l)+c*e*Math.sin(l),o-c*e*Math.cos(l)-c*t*Math.sin(l)];return{rotate:l,scale:c,translate:u,matrix:[[c*Math.cos(l),-c*Math.sin(l),u[0]],[c*Math.sin(l),c*Math.cos(l),u[1]],[0,0,1]]}}function r(t){0===Object.keys(h).length&&(c.addEventListener("touchmove",o,!1),c.addEventListener("touchend",a,!1),c.addEventListener("touchcancel",s,!1));for(var i=0;i<t.changedTouches.length;i++){var r=t.changedTouches[i],l={};for(var f in r)l[f]=r[f];var d={startTouch:l,startTime:Date.now(),status:"tapping",element:t.srcElement,pressingHandler:setTimeout(function(e){return function(){"tapping"===d.status&&(d.status="pressing",n(e,"press",{touchEvent:t})),clearTimeout(d.pressingHandler),d.pressingHandler=null}}(t.srcElement),500)};h[r.identifier]=d}if(2==Object.keys(h).length){var v=[];for(var f in h)v.push(h[f].element);n(e(v[0],v[1]),"dualtouchstart",{touches:u.call(t.touches),touchEvent:t})}}function o(t){for(var r=0;r<t.changedTouches.length;r++){var o=t.changedTouches[r],a=h[o.identifier];if(!a)return;a.lastTouch||(a.lastTouch=a.startTouch),a.lastTime||(a.lastTime=a.startTime),a.velocityX||(a.velocityX=0),a.velocityY||(a.velocityY=0),a.duration||(a.duration=0);var s=Date.now()-a.lastTime,l=(o.clientX-a.lastTouch.clientX)/s,c=(o.clientY-a.lastTouch.clientY)/s,u=70;s>u&&(s=u),a.duration+s>u&&(a.duration=u-s),a.velocityX=(a.velocityX*a.duration+l*s)/(a.duration+s),a.velocityY=(a.velocityY*a.duration+c*s)/(a.duration+s),a.duration+=s,a.lastTouch={};for(var f in o)a.lastTouch[f]=o[f];a.lastTime=Date.now();var d=o.clientX-a.startTouch.clientX,v=o.clientY-a.startTouch.clientY,p=Math.sqrt(Math.pow(d,2)+Math.pow(v,2));("tapping"===a.status||"pressing"===a.status)&&p>10&&(a.status="panning",a.isVertical=!(Math.abs(d)>Math.abs(v)),n(a.element,"panstart",{touch:o,touchEvent:t,isVertical:a.isVertical}),n(a.element,(a.isVertical?"vertical":"horizontal")+"panstart",{touch:o,touchEvent:t})),"panning"===a.status&&(a.panTime=Date.now(),n(a.element,"pan",{displacementX:d,displacementY:v,touch:o,touchEvent:t,isVertical:a.isVertical}),a.isVertical?n(a.element,"verticalpan",{displacementY:v,touch:o,touchEvent:t}):n(a.element,"horizontalpan",{displacementX:d,touch:o,touchEvent:t}))}if(2==Object.keys(h).length){for(var m,g=[],y=[],w=[],r=0;r<t.touches.length;r++){var o=t.touches[r],a=h[o.identifier];g.push([a.startTouch.clientX,a.startTouch.clientY]),y.push([o.clientX,o.clientY])}for(var f in h)w.push(h[f].element);m=i(g[0][0],g[0][1],g[1][0],g[1][1],y[0][0],y[0][1],y[1][0],y[1][1]),n(e(w[0],w[1]),"dualtouch",{transform:m,touches:t.touches,touchEvent:t})}}function a(t){if(2==Object.keys(h).length){var i=[];for(var r in h)i.push(h[r].element);n(e(i[0],i[1]),"dualtouchend",{touches:u.call(t.touches),touchEvent:t})}for(var l=0;l<t.changedTouches.length;l++){var d=t.changedTouches[l],v=d.identifier,p=h[v];if(p){if(p.pressingHandler&&(clearTimeout(p.pressingHandler),p.pressingHandler=null),"tapping"===p.status&&(p.timestamp=Date.now(),n(p.element,"tap",{touch:d,touchEvent:t}),f&&p.timestamp-f.timestamp<300&&n(p.element,"doubletap",{touch:d,touchEvent:t}),f=p),"panning"===p.status){var m=Date.now(),g=m-p.startTime,y=((d.clientX-p.startTouch.clientX)/g,(d.clientY-p.startTouch.clientY)/g,d.clientX-p.startTouch.clientX),w=d.clientY-p.startTouch.clientY,b=Math.sqrt(p.velocityY*p.velocityY+p.velocityX*p.velocityX),x=b>.5&&m-p.lastTime<100,E={duration:g,isflick:x,velocityX:p.velocityX,velocityY:p.velocityY,displacementX:y,displacementY:w,touch:d,touchEvent:t,isVertical:p.isVertical};n(p.element,"panend",E),x&&(n(p.element,"flick",E),p.isVertical?n(p.element,"verticalflick",E):n(p.element,"horizontalflick",E))}"pressing"===p.status&&n(p.element,"pressend",{touch:d,touchEvent:t}),delete h[v]}}0===Object.keys(h).length&&(c.removeEventListener("touchmove",o,!1),c.removeEventListener("touchend",a,!1),c.removeEventListener("touchcancel",s,!1))}function s(t){if(2==Object.keys(h).length){var i=[];for(var r in h)i.push(h[r].element);n(e(i[0],i[1]),"dualtouchend",{touches:u.call(t.touches),touchEvent:t})}for(var l=0;l<t.changedTouches.length;l++){var f=t.changedTouches[l],d=f.identifier,v=h[d];v&&(v.pressingHandler&&(clearTimeout(v.pressingHandler),v.pressingHandler=null),"panning"===v.status&&n(v.element,"panend",{touch:f,touchEvent:t}),"pressing"===v.status&&n(v.element,"pressend",{touch:f,touchEvent:t}),delete h[d])}0===Object.keys(h).length&&(c.removeEventListener("touchmove",o,!1),c.removeEventListener("touchend",a,!1),c.removeEventListener("touchcancel",s,!1))}var l=t.document,c=l.documentElement,u=Array.prototype.slice,h={},f=null;c.addEventListener("touchstart",r,!1)}(window,window.lib||(window.lib={})),!function(t,e){function n(t,e,n,i){function r(t){return(3*u*t+2*h)*t+f}function o(t){return((u*t+h)*t+f)*t}function a(t){return((d*t+v)*t+p)*t}function s(t){for(var e,n,i=t,a=0;8>a;a++){if(n=o(i)-t,Math.abs(n)<c)return i;if(e=r(i),Math.abs(e)<c)break;i-=n/e}var s=1,l=0;for(i=t;s>l;){if(n=o(i)-t,Math.abs(n)<c)return i;n>0?s=i:l=i,i=(s+l)/2}return i}function l(t){return a(s(t))}var c=1e-6,u=3*t-3*n+1,h=3*n-6*t,f=3*t,d=3*e-3*i+1,v=3*i-6*e,p=3*e;return l}e.cubicbezier=n,e.cubicbezier.liner=n(0,0,1,1),e.cubicbezier.ease=n(.25,.1,.25,1),e.cubicbezier.easeIn=n(.42,0,1,1),e.cubicbezier.easeOut=n(0,0,.58,1),e.cubicbezier.easeInOut=n(.42,0,.58,1)}(window,window.lib||(window.lib={})),!function(t,e){function n(e){function i(){r=!0,l&&l.forEach(function(t){t&&t()})}var r=!1;Object.defineProperty(this,"isRequested",{get:function(){return r}});var o,l=[],c=!1;this.request=function(){if(!r){var n=arguments;return c=!1,o=a(function(){c||(e.apply(t,n),i())}),this}},this.cancel=function(){o&&(c=!0,s(o))},this.then=function(t){return r?t&&t():l.push(t),this},this.clone=function(){return new n(e)}}function i(t,i,r,a){"function"==typeof a&&(a={0:a});for(var s=t/o,l=1/s,c=[],u=Object.keys(a).map(function(t){return parseInt(t)}),h=0;s>h;h++){var f=u[0],d=l*h;if(null!=f&&100*d>=f){var v=a[""+f];v instanceof n||(v=new n(v)),c.push(v),u.shift()}else c.length&&c.push(c[c.length-1].clone())}var p;"string"==typeof i||i instanceof Array?e.cubicbezier?"string"==typeof i?e.cubicbezier[i]&&(p=e.cubicbezier[i]):i instanceof Array&&4===i.length&&(p=e.cubicbezier.apply(e.cubicbezier,i)):console.error("require lib.cubicbezier"):"function"==typeof i&&(p=i),p||console.error("unexcept timing function");var m,g=!1,y=0,w=0;this.play=function(){function t(){g=!1,b&&b()}function e(){var t=l*(w+1).toFixed(10);m=c[w],m.request(t.toFixed(10),i(t).toFixed(10)),m.then(function(){w++,n()})}function n(){g&&(w===c.length?t():e())}return g?void 0:(g=!0,y=setTimeout(function(){y=0,n()},!w&&r||0),this)},this.stop=function(){return g?(g=!1,y&&(clearTimeout(y),y=0),m&&m.cancel(),this):void 0};var b;this.onend=function(t){b=t}}var r=60,o=1e3/r,a=window.requestAnimationFrame||window.msRequestAnimationFrame||window.webkitRequestAnimationFrame||window.mozkitRequestAnimationFrame||function(t){return setTimeout(t,o)},s=window.cancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||function(t){clearTimeout(t)};e.animation=i,e.animation.Frame=n,e.animation.requestFrame=function(t){var e=new n(t);return e.request(),e}}(window,window.lib||(window.lib={})),!function(t,e){function n(){e.scroll.outputDebugLog&&console.debug.apply(console,arguments)}function i(t){var e=t.getBoundingClientRect();if(!e){e={},e.width=t.offsetWidth,e.height=t.offsetHeight,e.left=t.offsetLeft,e.top=t.offsetTop;for(var n=t.offsetParent;n;)e.left+=n.offsetLeft,e.top+=n.offsetTop,n=n.offsetParent;e.right=e.left+e.width,e.bottom=e.top+e.height}return e}function r(t){return 0-t.options[t.axis+"Padding1"]}function o(t){var e=i(t.element),n=i(t.viewport),o=r(t);if("y"===t.axis)var a=0-e.height+n.height;else var a=0-e.width+n.width;return Math.min(a+t.options[t.axis+"Padding2"],o)}function a(t,e){return e>t.minScrollOffset?e-t.minScrollOffset:e<t.maxScrollOffset?e-t.maxScrollOffset:void 0}function s(t,e){return e>t.minScrollOffset?e=t.minScrollOffset:e<t.maxScrollOffset&&(e=t.maxScrollOffset),e}function l(t,e,i){n(t.element.scrollId,e,i);var r=f.createEvent("HTMLEvents");if(r.initEvent(e,!1,!0),r.scrollObj=t,i)for(var o in i)r[o]=i[o];t.element.dispatchEvent(r),t.viewport.dispatchEvent(r)}function c(t){var e,n={x:0,y:0},i=getComputedStyle(t.element).webkitTransform;return"none"!==i&&(e=i.match(/^matrix3d\((?:[-\d.]+,\s*){12}([-\d.]+),\s*([-\d.]+)(?:,\s*[-\d.]+){2}\)/)||i.match(/^matrix\((?:[-\d.]+,\s*){4}([-\d.]+),\s*([-\d.]+)\)$/))&&(n.x=parseFloat(e[1])||0,n.y=parseFloat(e[2])||0),n}function u(t,e){return t=parseFloat(t),e=parseFloat(e),0!=t&&(t+="px"),0!=e&&(e+="px"),m?"translate3d("+t+", "+e+", 0)":"translate("+t+", "+e+")"}function h(t,h){function f(t){return F||_?(t.preventDefault(),t.stopPropagation(),!1):!0}function m(t){F||_||setTimeout(function(){var e=document.createEvent("HTMLEvents");e.initEvent("niceclick",!0,!0),t.target.dispatchEvent(e)},300)}function y(t,n){C=null,clearTimeout(j),j=setTimeout(function(){C&&(C=null,e.animation.requestFrame(t))},n||400),C=t}function w(){if(M.enabled)if(_&&S(),h.useFrameAnimation)O&&O.stop(),O=null;else{var e=c(M);t.style.webkitTransform=u(e.x,e.y),t.style.webkitTransition="",C=null,clearTimeout(j)}}function b(){if(M.enabled){var n=c(M)[M.axis],i=a(M,n);if(i){var r=s(M,n);if(i>0?l(M,"y"===M.axis?"pulldownend":"pullrightend"):0>i&&l(M,"y"===M.axis?"pullupend":"pullleftend"),h.useFrameAnimation){var o=r-n;O=new e.animation(400,e.cubicbezier.ease,0,function(e,i){var r=(n+o*i).toFixed(2);t.style.webkitTransform="y"===M.axis?u(0,r):u(r,0),l(M,"scrolling")}),O.onend(S),O.play()}else{t.style.webkitTransition="-webkit-transform 0.4s ease 0";var f=r.toFixed(0);t.style.webkitTransform="y"===M.axis?u(0,f):u(f,0),y(S,400),e.animation.requestFrame(function(){_&&M.enabled&&(l(M,"scrolling"),e.animation.requestFrame(arguments.callee))})}}else _&&S()}}function x(t){M.enabled&&("y"!==M.axis&&t.isVertical||"x"===M.axis&&t.isVertical||(M.transformOffset=c(M),M.minScrollOffset=r(M),M.maxScrollOffset=o(M),L=2.5,q=!0,_=!0,H=!1,l(M,"scrollstart"),I=t["displacement"+M.axis.toUpperCase()]))}function E(e){if(M.enabled&&("y"===M.axis&&e.isVertical||"x"===M.axis&&!e.isVertical)){e.stopPropagation();var n=e["displacement"+M.axis.toUpperCase()];if(Math.abs(n-I)<5)return void e.stopPropagation();I=n;var i=M.transformOffset[M.axis]+n;i>M.minScrollOffset?(i=M.minScrollOffset+(i-M.minScrollOffset)/L,L*=1.003):i<M.maxScrollOffset&&(i=M.maxScrollOffset-(M.maxScrollOffset-i)/L,L*=1.003),L>4&&(L=4);var r=a(M,i);r&&(l(M,r>0?"y"===M.axis?"pulldown":"pullright":"y"===M.axis?"pullup":"pullleft",{boundaryOffset:Math.abs(r)}),M.options.noBounce&&(i=s(M,i))),t.style.webkitTransform="y"===M.axis?u(0,i.toFixed(2)):u(i.toFixed(2),0),l(M,"scrolling")
}}function T(t){M.enabled&&("y"===M.axis&&t.isVertical||"x"===M.axis&&!t.isVertical)&&(t.stopPropagation(),t.isflick&&k(t))}function k(i){q=!0;var r,o,s,f,d,v,m,g,w,b,x,E,T,k,F,A,C;f=c(M)[M.axis];var j=a(M,f);if(!j){r=i["velocity"+M.axis.toUpperCase()];var L=2,I=.0015;h.inertia&&p[h.inertia]&&(L=p[h.inertia][0],I=p[h.inertia][1]),r>L&&(r=L),-L>r&&(r=-L),o=I*(r/Math.abs(r)),v=new e.motion({v:r,a:-o}),s=v.t,d=f+v.s;var N=a(M,d);if(N){n("惯性计算超出了边缘",N),m=r,g=o,N>0?(b=M.minScrollOffset,E=1):(b=M.maxScrollOffset,E=-1),x=new e.motion({v:E*m,a:-E*g,s:Math.abs(b-f)}),w=x.t;var V=x.generateCubicBezier();if(T=m-g*w,k=.03*(T/Math.abs(T)),C=new e.motion({v:T,a:-k}),F=C.t,A=b+C.s,C.generateCubicBezier(),h.noBounce)if(n("没有回弹效果"),f!==b)if(h.useFrameAnimation){var z=b-f,R=e.cubicbezier(V[0][0],V[0][1],V[1][0],V[1][1]);O=new e.animation(w.toFixed(0),R,0,function(e,n){l(M,"scrolling",{afterFlick:!0});var i=f+z*n;t.style.webkitTransform="y"===M.axis?u(0,i.toFixed(2)):u(i.toFixed(2),0)}),O.onend(S),O.play()}else{t.style.webkitTransition="-webkit-transform "+(w/1e3).toFixed(2)+"s cubic-bezier("+V+") 0";var P=b.toFixed(0);t.style.webkitTransform="y"===M.axis?u(0,P):u(P,0),y(S,1e3*(w/1e3).toFixed(2))}else S();else if(f!==A)if(n("惯性滚动","s="+A.toFixed(0),"t="+((w+F)/1e3).toFixed(2)),h.useFrameAnimation){var z=A-f,R=e.cubicbezier.easeOut;O=new e.animation((w+F).toFixed(0),R,0,function(e,n){l(M,"scrolling",{afterFlick:!0});var i=f+z*n;t.style.webkitTransform="y"===M.axis?u(0,i.toFixed(2)):u(i.toFixed(2),0)}),O.onend(function(){if(M.enabled){var n=b-A,i=e.cubicbezier.ease;O=new e.animation(400,i,0,function(e,i){l(M,"scrolling",{afterFlick:!0});var r=A+n*i;t.style.webkitTransform="y"===M.axis?u(0,r.toFixed(2)):u(r.toFixed(2),0)}),O.onend(S),O.play()}}),O.play()}else{t.style.webkitTransition="-webkit-transform "+((w+F)/1e3).toFixed(2)+"s ease-out 0";var P=A.toFixed(0);t.style.webkitTransform="y"===M.axis?u(0,P):u(P,0),y(function(){if(M.enabled)if(n("惯性回弹","s="+b.toFixed(0),"t=400"),A!==b){t.style.webkitTransition="-webkit-transform 0.4s ease 0";var e=b.toFixed(0);t.style.webkitTransform="y"===M.axis?u(0,e):u(e,0),y(S,400)}else S()},1e3*((w+F)/1e3).toFixed(2))}else S()}else{n("惯性计算没有超出边缘");var B=v.generateCubicBezier();if(h.useFrameAnimation){var z=d-f,R=e.cubicbezier(B[0][0],B[0][1],B[1][0],B[1][1]);O=new e.animation(s.toFixed(0),R,0,function(e,n){l(M,"scrolling",{afterFlick:!0});var i=(f+z*n).toFixed(2);t.style.webkitTransform="y"===M.axis?u(0,i):u(i,0)}),O.onend(S),O.play()}else{t.style.webkitTransition="-webkit-transform "+(s/1e3).toFixed(2)+"s cubic-bezier("+B+") 0";var P=d.toFixed(0);t.style.webkitTransform="y"===M.axis?u(0,P):u(P,0),y(S,1e3*(s/1e3).toFixed(2))}}H=!0,h.useFrameAnimation||e.animation.requestFrame(function(){_&&H&&M.enabled&&(l(M,"scrolling",{afterFlick:!0}),e.animation.requestFrame(arguments.callee))})}}function S(){M.enabled&&(q=!1,setTimeout(function(){!q&&_&&(_=!1,H=!1,h.useFrameAnimation?(O&&O.stop(),O=null):t.style.webkitTransition="",l(M,"scrollend"))},50))}var M=this;if(h=h||{},h.noBounce=!!h.noBounce,h.padding=h.padding||{},h.isPrevent=null==h.isPrevent?!0:!!h.isPrevent,h.isFixScrollendClick=null==h.isFixScrollendClick?!0:!!h.isFixScrollendClick,h.padding?(h.yPadding1=-h.padding.top||0,h.yPadding2=-h.padding.bottom||0,h.xPadding1=-h.padding.left||0,h.xPadding2=-h.padding.right||0):(h.yPadding1=0,h.yPadding2=0,h.xPadding1=0,h.xPadding2=0),h.margin?(h.yMargin1=-h.margin.top||0,h.yMargin2=-h.margin.bottom||0,h.xMargin1=-h.margin.left||0,h.xMargin2=-h.margin.right||0):(h.yMargin1=0,h.yMargin2=0,h.xMargin1=0,h.xMargin2=0),h.direction=h.direction||"y",h.inertia=h.inertia||"normal",this.options=h,M.axis=h.direction,this.element=t,this.viewport=t.parentNode,this.plugins={},this.viewport.addEventListener("touchstart",w,!1),this.viewport.addEventListener("touchend",b,!1),this.viewport.addEventListener("touchcancel",b,!1),this.viewport.addEventListener("panstart",x,!1),this.viewport.addEventListener("pan",E,!1),this.viewport.addEventListener("panend",T,!1),this.element.scrollId=setTimeout(function(){d[M.element.scrollId+""]=M},1),h.isPrevent&&(this.viewport.addEventListener("touchstart",function(){g=!0},!1),M.viewport.addEventListener("touchend",function(){g=!1},!1)),h.isFixScrollendClick){var F,A;this.viewport.addEventListener("scrolling",function(){F=!0,A&&clearTimeout(A),A=setTimeout(function(){F=!1},400)},!1),this.viewport.addEventListener("click",f,!1),this.viewport.addEventListener("tap",m,!1)}if(h.useFrameAnimation){var O;Object.defineProperty(this,"animation",{get:function(){return O}})}else{var C,j=0;t.addEventListener("webkitTransitionEnd",function(t){if(C){var n=C;C=null,clearTimeout(j),e.animation.requestFrame(function(){n(t)})}},!1)}var L,_,H,q;Object.defineProperty(this,"isScrolling",{get:function(){return!!_}});var I,N={init:function(){return this.enable(),this.refresh(),this.scrollTo(0),this},enable:function(){return this.enabled=!0,this},disable:function(){var t=this.element;return this.enabled=!1,this.options.useFrameAnimation?this.animation&&this.animation.stop():e.animation.requestFrame(function(){t.style.webkitTransform=getComputedStyle(t).webkitTransform}),this},getScrollWidth:function(){return i(this.element).width},getScrollHeight:function(){return i(this.element).height},getScrollLeft:function(){return-c(this).x-this.options.xPadding1},getScrollTop:function(){return-c(this).y-this.options.yPadding1},getMaxScrollLeft:function(){return-M.maxScrollOffset-this.options.xPadding1},getMaxScrollTop:function(){return-M.maxScrollOffset-this.options.yPadding1},getBoundaryOffset:function(){return Math.abs(a(this,c(this)[this.axis])||0)},refresh:function(){var t=this.element,e="y"===this.axis,n=e?"height":"width";if(null!=this.options[n])t.style[n]=this.options[n]+"px";else if(t.childElementCount>0){var a,s,u=t.firstElementChild,h=t.lastElementChild;if(document.createRange&&(a=document.createRange(),a.selectNodeContents(t),s=i(a)),s)t.style[n]=s[n]+"px";else if(u&&h){for(;u&&0===i(u)[n]&&u.nextElementSibling;)u=u.nextElementSibling;for(;h&&h!==u&&0===i(h)[n]&&h.previousElementSibling;)h=h.previousElementSibling;t.style[n]=i(h)[e?"bottom":"right"]-i(u)[e?"top":"left"]+"px"}else t.style[n]="0"}else t.style[n]="auto",t.style[n]=i(t)[n]+"px";return this.transformOffset=c(this),this.minScrollOffset=r(this),this.maxScrollOffset=o(this),this.scrollTo(-this.transformOffset[this.axis]-this.options[this.axis+"Padding1"]),l(this,"contentrefresh"),this},offset:function(t){var e=i(this.element),n=i(t);if("y"===this.axis){var r={top:n.top-e.top-this.options.yPadding1,left:n.left-e.left,right:e.right-n.right,width:n.width,height:n.height};r.bottom=r.top+r.height}else{var r={top:n.top-e.top,bottom:e.bottom-n.bottom,left:n.left-e.left-this.options.xPadding1,width:n.width,height:n.height};r.right=r.left+r.width}return r},getRect:function(t){var e=i(this.viewport),n=i(t);if("y"===this.axis){var r={top:n.top-e.top,left:n.left-e.left,right:e.right-n.right,width:n.width,height:n.height};r.bottom=r.top+r.height}else{var r={top:n.top-e.top,bottom:e.bottom-n.bottom,left:n.left-e.left,width:n.width,height:n.height};r.right=r.left+r.width}return r},isInView:function(t){var e=i(this.viewport),n=this.getRect(t);return"y"===this.axis?e.top<n.bottom&&e.bottom>n.top:e.left<n.right&&e.right>n.left},scrollTo:function(t,n){var i=this,r=this.element;return t=-t-this.options[this.axis+"Padding1"],t=s(this,t),_=!0,n===!0?(r.style.webkitTransition="-webkit-transform 0.4s ease 0",y(S,400),e.animation.requestFrame(function(){_&&i.enabled&&(l(i,"scrolling"),e.animation.requestFrame(arguments.callee))})):(r.style.webkitTransition="",y(S,1)),r.style.webkitTransform="y"===this.axis?u(c(this).x,t):u(t,c(this).y),this},scrollToElement:function(t,e){var n=this.offset(t);return n=n["y"===this.axis?"top":"left"],this.scrollTo(n,e)},getViewWidth:function(){return i(this.viewport).width},getViewHeight:function(){return i(this.viewport).height},addPulldownHandler:function(t){var e=this;return this.element.addEventListener("pulldownend",function(n){e.disable(),t(n,function(){e.scrollTo(0,!0),e.enable()})},!1),this},addPullupHandler:function(t){var e=this;return this.element.addEventListener("pullupend",function(n){e.disable(),t(n,function(){e.scrollTo(e.getScrollHeight(),!0),e.enable()})},!1),this},addScrollstartHandler:function(t){return this.element.addEventListener("scrollstart",function(e){t(e)},!1),this},addScrollingHandler:function(t){return this.element.addEventListener("scrolling",function(e){t(e)},!1),this},addScrollendHandler:function(t){return this.element.addEventListener("scrollend",function(e){t(e)},!1),this},addEventListener:function(){this.element.addEventListener.apply(this.element,arguments)},removeEventListener:function(){this.element.removeEventListener.apply(this.element,arguments)},enablePlugin:function(t,e){var n=v[t];return n&&!this.plugins[t]&&(this.plugins[t]=!0,e=e||{},n.call(this,t,e)),this}};for(var V in N)this[V]=N[V];delete N}var f=t.document,d={},v={},p={normal:[2,.0015],slow:[1.5,.003],veryslow:[1.5,.005]},m="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,g=!1;f.addEventListener("touchmove",function(t){return g?(t.preventDefault(),!1):!0},!1),e.scroll=function(t,e){if(1===arguments.length&&!(arguments[0]instanceof HTMLElement))if(e=arguments[0],e.scrollElement)t=e.scrollElement;else{if(!e.scrollWrap)throw new Error("no scroll element");t=e.scrollWrap.firstElementChild}if(!t.parentNode)throw new Error("wrong dom tree");if(e&&e.direction&&["x","y"].indexOf(e.direction)<0)throw new Error("wrong direction");var n;return n=t.scrollId?d[t.scrollId]:new h(t,e)},e.scroll.plugin=function(t,e){return e?(t=t.split(","),void t.forEach(function(t){v[t]=e})):v[t]}}(window,window.lib||(window.lib={})),!function(t,e){var n={open:function(t,e){if(t){var n=t.firstChild;t.style.opacity=1,t.style.visibility="visible",setTimeout(function(){n.style.webkitTransform="translateY(0)",e&&e()},0)}},close:function(t,e){if(t){var n=t.firstChild;n.style.webkitTransform="translateY(100%)",setTimeout(function(){t.style.opacity=0,t.style.visibility="hidden",e&&e()},200)}}},i=0,r={container:"ctrl-selectmenu",innerBox:"ctrl-selectmenu-picker",header:"ctrl-selectmenu-header",confirm:"ctrl-selectmenu-btn-confirm",cancel:"ctrl-selectmenu-btn-cancel",col:"ctrl-selectmenu-col",option:"ctrl-selectmenu-option",wrapper:"ctrl-selectmenu-wrapper"},o=function(t,e){var o=this,a=Date.now()+"-"+ ++i,s=document.createDocumentFragment();1!==arguments.length||arguments[0]instanceof HTMLElement||(e=arguments[0],t=null),t||(t=document.createElement("div")),s.appendChild(t),t.setAttribute("data-ctrl-name","selectmenu"),t.setAttribute("data-ctrl-id",a),t.className=r.container,this.options=e;var l=e.title||"";Object.defineProperty(this,"title",{get:function(){return l},set:function(e){if(!e)throw new Error("Non expected value");l=e,t.querySelector(".tip").innerHTML=e}});var c=e.confirmText||"确定";Object.defineProperty(this,"confirmText",{get:function(){return c},set:function(e){if(!e)throw new Error("Non expected value");c=e,t.querySelector("."+r.confirm).innerHTML=e}});var u=e.cancelText||"取消";Object.defineProperty(this,"cancelText",{get:function(){return u},set:function(e){if(!e)throw new Error("Non expected value");u=e,t.querySelector("."+r.cancel).innerHTML=e}});var h;Object.defineProperty(this,"viewModel",{get:function(){return h},set:function(t){if(!t)throw new Error("Non expected value");h=t,o.syncViewModel()}}),this.syncViewModel=function(){var t=this;this.render(),setTimeout(function(){t.addEvents()},100)},this._events={},this.addEventListener=function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},this.removeEventListener=function(t,e){if(this._events[t]){var n=this._events[t].indexOf(e);n>-1&&this._events[t].splice(n,1)}},this.execEvent=function(t){if(this._events[t]){var e=0,n=this._events[t].length;if(n)for(;n>e;e++)this._events[t][e].apply(this,[].slice.call(arguments,1))}},this.remove=function(){t.parentNode&&t.parentNode.removeChild(t)},this.element=t,this.root=s;var f={},d={},v={};this.render=function(){var t=h,e=['<div class="'+r.header+'">','<a href="javascript:void(0);" class="'+r.cancel+'">'+u+"</a>",'<span class="tip">'+l+"</span>",'<a href="javascript:void(0);" class="'+r.confirm+'">'+c+"</a>","</div>"].join(""),n='<div class="'+r.wrapper+'"></div>';this.element.innerHTML='<div class="'+r.innerBox+'">'+e+n+"</div>";for(var i in t)this.renderColumn(i,t[i]);this.refresh()},this.selectedIndex={},this.renderColumn=function(t,e){var n=this;if(!Array.isArray(e))throw"select项数据列表必须是数组";var i=[];n.selectedIndex[t]=0,e.forEach(function(e,o){e.selected&&(n.selectedIndex[t]=o),i.push('<div class="'+r.option+'" data-value="'+e.value+'">'+e.key+"</div>")});var o=i.join(""),a=n.element.querySelector("."+r.wrapper),s=a.querySelector("[data-type="+t+"]");if(s)s.firstChild.innerHTML=o;else{var l='<div class="scroller">'+o+"</div>",c=document.createElement("div");c.className=r.col,c.setAttribute("data-type",t),c.innerHTML=l,a.appendChild(c)}},this.setScroll=function(){var t=this,e=[].slice.call(this.element.querySelectorAll("."+r.col));e.forEach(function(e){var n=e.querySelector(".scroller"),i=lib.scroll({scrollElement:n,inertia:"slow"}).init();n.addEventListener("click",function(t){var e=t.target;0===e.className.indexOf(r.option)&&i.scrollToElement(e,!0)},!1),i.addScrollendHandler(function(){t.scrollEndHandler(i,e)});var o=e.getAttribute("data-type");t.scrollToNthChild(i,t.selectedIndex[o]),i.handler=!0,f[o]=i}),this.selects=e,this.scrolls=f},this.currentColName="",this.scrollEndHandler=function(t,e){if(!t.handler)return void(t.handler=!0);var n=t.getScrollTop(),i=Math.round(n/this.height);t.handler=!1,this.scrollToNthChild(t,i,!1);var r=e.getAttribute("data-type");this.currentColName=r,this.setSelectedStatus(r,Math.abs(i)),this.execEvent("select",r)},this.setSelectedStatus=function(t,e){var n=this.scrolls[t].element,i=n.querySelectorAll("."+r.option);d[t]=n.querySelector(".current"),d[t]&&(d[t].className=r.option),d[t]=i[e],d[t].className=r.option+" current",v["val-"+t]=d[t].getAttribute("data-value"),v["key-"+t]=d[t].innerHTML,this.selectedValue=v,this.selectedIndex[t]=e},this.resetScrollPos=function(){var t=this;this.selects&&this.selects.forEach(function(e){var n=e.getAttribute("data-type"),i=t.scrolls[n];t.scrollToNthChild(i,t.selectedIndex[n])})},this.scrollToNthChild=function(t,e,n){var i=t.element,r=i.querySelector(":nth-child("+(1+e)+")"),o="undefined"!=typeof n?n:!0;t.scrollToElement(r,o)};var p=!1,m=!1;this.addEvents=function(){function t(){n.refresh()}var e=this.options,n=this;if(!m){var i;if(window.addEventListener("resize",function(){clearTimeout(i),i=setTimeout(t,310)},!1),e.trigger){var o=e.trigger.length>1?[].slice.call(e.trigger):[e.trigger];o.forEach(function(t){t.addEventListener("click",function(){n.trigger=t,n.show()})})}m=!0}this.element.querySelector("."+r.confirm).addEventListener("click",function(){if(e.verifyMe){if(!e.verifyMe(n.selectedValue))return;n.hide()}else n.hide();n.execEvent("confirm",n.trigger)},!1),this.element.querySelector("."+r.cancel).addEventListener("click",function(){n.execEvent("cancel",n.trigger),n.hide()},!1)},this.show=function(){var t=this;this.execEvent("beforeShow",t.trigger),n.open(this.element),setTimeout(function(){p||(t.setScroll(),p=!0)},100),this.execEvent("show")},this.hide=function(){n.close(this.element),this.execEvent("hide")},this.refresh=function(){this.element.style.height=window.innerHeight+"px";var t=this,e=setInterval(function(){var n="."+r.option,i=document.querySelector(n);i&&i.clientHeight&&(t.height=i.clientHeight,t.resetScrollPos(),clearInterval(e),e=null)},100)},this.linkage=function(t,e){this.viewModel[t]=e,this.renderColumn(t,e);var n=this.scrolls[t],i=this.selectedIndex[t];n.refresh(),this.scrollToNthChild(n,i)},this.scrollToIndex=function(t,e){var n=this.scrolls[t];this.scrollToNthChild(n,e),this.setSelectedStatus(t,e)}};e.selectmenu=o}(window,window.ctrl||(window.ctrl={})),function(t){window.Helper={compareWithNow:function(t){var e=new Date,n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=t.split("-"),r=new Date(Number(i[0]),Number(i[1])-1,Number(i[2])),o=r.getTime()-n.getTime(),a=Math.ceil(o/864e5);return a}};var e={init:function(e){this.box=t(e.boxClass),this.boxChild=this.box.children().first(),this.trigger=t(e.triggerClass),this.hideTrigger=t(e.hideClass),this.showHandler=e.onShow,this.hideHandler=e.onHide,this.addEvent()},addEvent:function(){var t=this;this.trigger.on("click",function(){t.show()}),this.box.on("click",function(){t.hide()}),this.boxChild.on("click",function(t){return t.stopPropagation(),!1}),this.hideTrigger.on("click",function(){t.hide()})},show:function(){this.box.show(),this.showHandler&&this.showHandler()},hide:function(){this.box.hide(),this.hideHandler&&this.hideHandler()}},n={isLocalStorageOk:!1,data:{},init:function(){return this.checkLocalStorage(),this},checkLocalStorage:function(){if("localStorage"in window&&null!==window.localStorage)try{localStorage.setItem("test","test"),localStorage.removeItem("test"),this.isLocalStorageOk=!0}catch(t){console.error(t)}},set:function(t,e){this.data[t]=e,this.isLocalStorageOk&&window.localStorage.setItem("recommend_"+t,e)},get:function(t){var e=this.data[t];return"undefined"==typeof e&&this.isLocalStorageOk&&(e=window.localStorage.getItem("recommend_"+t)),e}},i={data:{name:"",gender:"",birthday:""},validate:function(){if(!this.data.birthday)return alert("请输入您宝宝的生日或预产期哦"),!1;var t=Helper.compareWithNow(this.data.birthday),e=0>t;return e&&!this.data.gender?(alert("还不知道您宝宝是男宝还是女宝呢"),!1):!0},submit:function(t,e){this.validate()?t.call(this):e.call(this)}},r={date:{init:function(){var t=new Date;return this.today={y:t.getFullYear(),m:t.getMonth()+1,d:t.getDate()},this},getMDays:function(t,e){var n=new Array(31,28,31,30,31,30,31,31,30,31,30,31);return(t%40==0&&t%100!=0||t%400==0)&&(n[1]=29),n[e-1]}},init:function(t){var e=this.date.init(),n=e.today,i=n.y-14,r=n.y+1,o=this.viewModelItemFactory;this.viewModel={year:o(i,r,n.y),month:o(1,12,n.m),day:this.getDayViewData(n.y,n.m,n.d)},this.date=e,this.opts=t,this.setSelectMenu()},viewModelItemFactory:function(t,e,n){for(var i=[],r=t;e>=r;r++){var o=10>r?"0"+r:r;i.push({key:o,value:o,selected:r==n})}return i},getDayViewData:function(t,e,n){return this.viewModelItemFactory(1,this.date.getMDays(t,e),n)},setSelectMenu:function(){var t=this,e=ctrl.selectmenu,n=document.querySelector(".j-select"),i=new e({confirmText:"确定",title:"",cancelText:"取消",trigger:n});i.viewModel=this.viewModel,i.addEventListener("confirm",function(){console.log(this.selectedValue),t.opts.onConfirm&&t.opts.onConfirm.call(this)}),i.addEventListener("select",function(e){var n=this.selectedValue["val-year"],i=this.selectedValue["val-month"],r=this.selectedValue["val-day"];"day"!==e&&n&&i&&r&&this.linkage("day",t.getDayViewData(n,i,1))}),document.body.appendChild(i.root)}},o={init:function(){this.db=n.init(),this.render(),this.initDialog(),lib.lazyload.init(),new lib.goTop;var t=this;r.init({onConfirm:function(){var e=this.selectedValue,n=[e["val-year"],e["val-month"],e["val-day"]].join("-");t.renderBithday(n)}}),this.addEvent()},initDialog:function(){var n=this.db.get("data"),i=n&&JSON.parse(n)||{gender:"",name:"",birthday:""},r=t("#tpl-dialog").html();t("#dialog").html(_.template(r)(i)),e.init({boxClass:"#dialog",triggerClass:".j-trigger",hideClass:".j-cancel"}),this.renderBithday(i.birthday)},render:function(){this.renderTopInfo();var e="./data/"+(this.data||"common.json");t.getJSON(e,function(e){console.log(e);var n=t("#items"),i=t("#tpl-item").html();n.html(_.template(i)({data:e.category})),lib.lazyload.trigger()})},renderTopInfo:function(){var e=this.db.get("data"),n=e&&JSON.parse(e);if(n){i.data=n;var r=this.getAgeText(n),o=n.name?n.name+"小朋友":"宝宝";t(".main-hd").addClass("edit");var a=['<span class="name">'+o+'</span> <br> <span class="age">'+r+"</span>"].join("");t(".j-tip").html(a)}else t(".main-hd").removeClass("edit"),t(".j-tip").html("<span>添加宝宝档案，<br>打造您和宝宝的专属优品！</span>")},getAgeText:function(t){var e=t.birthday,n=t.gender;if(e){var i=Helper.compareWithNow(e),r=0>i,o="";if(r){i=Math.abs(i);var a=Math.floor(i/365),s=Math.floor((i-365*a)/30),l=i-365*a-30*s;o=a?"已经"+a+"岁"+(s?s+"个月":"")+"啦":"已经"+(s?s+"个月":"")+(l?l+"天":"")+"啦";var c=Math.min(12*a+s,12);this.getDataSrc(c,n,!0)}else{if(i){var u=Math.floor(i/7),l=i-7*u;o="离预产期还有"+(u?u+"周":"")+(l?l+"天":"")}else o="今天就要出生啦";var c=Math.floor(i/30);this.getDataSrc(c,n,!1)}return o}},getDataSrc:function(t,e,n){var i=[];n?(6>=t?i.push("0_6"):t>6&&12>t?i.push("6_12"):t>=12&&i.push("12"),i.push(e)):(t=Math.max(10-t,0),3>=t?i.push("0_3"):t>3&&7>=t?i.push("3_7"):t>7&&i.push("7_10")),this.data=i.join("_")+".json"},addEvent:function(){var n=this;t(".j-radiobox").on("click",function(){t(".radio-icon").removeClass("active"),t(this).find(".radio-icon").addClass("active");var e=t(this).attr("data-gender");i.data.gender=e}),t(".j-confirm").on("click",function(){i.data.name=t("#nickname").val(),i.data.birthday=t("#birthday").val(),i.validate()&&(e.hide(),n.db.set("data",JSON.stringify(i.data)),n.render())})},renderBithday:function(e){e?(t("#birthday").val(e),t(".j-select").html(e).removeClass("placeholder")):(t("#birthday").val(""),t(".j-select").html("点击输入").addClass("placeholder"))}};t(function(){o.init()})}(Zepto);