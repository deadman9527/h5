!function(a){Global.formatImgSrc=function(a){if(!a)return"http://h5.ve.cn/assets/img/cart_img_black_640x253.png";var b=a.match(/^http:\/\/img\.ve\.cnttp(.+)_3\.jpg/);return b?"http"+b[1]+".jpg":a};var b={init:function(){var a=new lib.httpurl(location.href),b=a.params,c=b.title?decodeURIComponent(b.title):"申请退货";document.title=c,this.orderSn=b.orderSn||0,new ctrl.topBar({isIndex:!1,title:c}),this.bottombar=new ctrl.bottomBar({showBottom:!0}),lib.lazyload.init(),this.render(!0),new lib.goTop({position:{bottom:60}})},addEventsLink:function(){a(".detail-link").on("click",function(){var b=a(this).attr("data-id"),c="order-detail.html?orderSn="+b;window.location.href=c}),a(".show").on("click",function(){a(this).closest(".order-container").find(".hidden").removeClass("hidden"),a(this).addClass("hidden")}),a(".hide").on("click",function(){a(this).closest(".order-container").find("ul li").addClass("hidden").eq(0).removeClass("hidden"),a(".show").removeClass("hidden"),a(this).addClass("hidden")})},render:function(){if(!lib.login.isLogin())return void lib.login.goLogin();var a=this;a.isAjax||(a.isAjax=!0,lib.api.get({api:{c:"order",a:"odetails"},needLogin:!0,data:{order_sn:a.orderSn},success:function(b){console.log(b),a.hideTip(),a.renderItems(b.order),a.addEventsLink()},error:function(b){"10007"==b.code&&(a.infiniteScroll.remove(),1==a.page&&a.showTip("该状态还没有订单~"))},complete:function(){a.isAjax=!1}}))},renderItems:function(b){a(".info-tip").hide(),console.log(this.status);var c=a("#orders"),d=a("#tpl-item").html();c.append(_.template(d)({item:b})),lib.lazyload.trigger()},renderError:function(a){switch(a){case"param":this.showTip("缺少必要参数");break;case"network":this.showTip("服务器开小差啦");break;case"empty":this.showTip("当前条件，列表为空")}},showTip:function(b){var c=a(".info-tip");c.html(b).show()},hideTip:function(){var b=a(".info-tip");b.html("").hide()}};a(function(){b.init()})}(Zepto,window.Global||(window.Global={}));