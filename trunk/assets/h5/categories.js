!function(a){Global.formatTitleLink=function(a,b){if(!b)return a;var c=new lib.httpurl(a);return c.params.title=b,c.toString()},Global.formatImgSrc=function(a){if(!a)return"http://img01.ve.cn/party/60c0f7c1d5a7f76f5e2ba49358072bfd.jpg";var b=a.match(/^http:\/\/img\.ve\.cnttp(.+)_3\.jpg/);return b?"http"+b[1]+".jpg":a};var b={init:function(){new ctrl.topBar({isIndex:!1}),this.bottombar=new ctrl.bottomBar({showBottom:!0}),this.categoryIndex=parseInt(window.location.hash.split("#")[1])||0,a("#callApp").on("click",function(){var a=location.href;a=a.replace(/test.h5/g,"h5");var b=!0,c=!0;lib.callapp.gotoPage(a,{point:c,params:b})}),this.render()},addEvents:function(){var b=this;a(".category-list li").on("tap",function(){a(this).hasClass("active")||(b.categoryIndex=a(this).index(),a(".category-list .indicator").css({top:50*b.categoryIndex+"px"}),a(".category-list .active").removeClass("active"),setTimeout(function(){a(".category-list li").eq(b.categoryIndex).addClass("active")},200),a(".container").remove(),b.renderItems(b.categoriesData[b.categoryIndex]))})},render:function(){var b=this;a.get("http://act.ve.cn/data/categories.json",function(c){console.log(c),b.categoriesData=c.data.list,b.renderCategories(c.data.list),a(".category-list .indicator").css({top:50*b.categoryIndex+"px"}),a(".category-list li").eq(b.categoryIndex).addClass("active"),b.renderItems(c.data.list[b.categoryIndex]);var d=lib.scroll;b.scroller=new d({scrollElement:a(".category-list")[0]}),b.addEvents(),b.scroller.init()})},renderCategories:function(b){var c=a(".category-list"),d=a("#tpl-category").html();c.prepend(_.template(d)({itemList:b}))},renderItems:function(b){var c=a(".item-container"),d=a("#tpl-item").html();c.prepend(_.template(d)({itemList:b}));var e=lib.scroll,f=new e({scrollElement:a(".container")[0]});f.init()},adjustLink:function(){a(".list-item").each(function(b,c){var d=a(c),e=d.attr("href"),f=d.find(".title").html(),g=Global.formatTitleLink(e,f);d.attr("href",g)})}};a(function(){b.init()})}(Zepto,window.Global||(window.Global={}));