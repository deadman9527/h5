(function(){var a=this,b=a._,c=Array.prototype,d=Object.prototype,e=Function.prototype,f=c.push,g=c.slice,h=c.concat,i=d.toString,j=d.hasOwnProperty,k=Array.isArray,l=Object.keys,m=e.bind,n=function(a){return a instanceof n?a:this instanceof n?void(this._wrapped=a):new n(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=n),exports._=n):a._=n,n.VERSION="1.7.0";var o=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}};n.iteratee=function(a,b,c){return null==a?n.identity:n.isFunction(a)?o(a,b,c):n.isObject(a)?n.matches(a):n.property(a)},n.each=n.forEach=function(a,b,c){if(null==a)return a;b=o(b,c);var d,e=a.length;if(e===+e)for(d=0;e>d;d++)b(a[d],d,a);else{var f=n.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},n.map=n.collect=function(a,b,c){if(null==a)return[];b=n.iteratee(b,c);for(var d,e=a.length!==+a.length&&n.keys(a),f=(e||a).length,g=Array(f),h=0;f>h;h++)d=e?e[h]:h,g[h]=b(a[d],d,a);return g};var p="Reduce of empty array with no initial value";n.reduce=n.foldl=n.inject=function(a,b,c,d){null==a&&(a=[]),b=o(b,d,4);var e,f=a.length!==+a.length&&n.keys(a),g=(f||a).length,h=0;if(arguments.length<3){if(!g)throw new TypeError(p);c=a[f?f[h++]:h++]}for(;g>h;h++)e=f?f[h]:h,c=b(c,a[e],e,a);return c},n.reduceRight=n.foldr=function(a,b,c,d){null==a&&(a=[]),b=o(b,d,4);var e,f=a.length!==+a.length&&n.keys(a),g=(f||a).length;if(arguments.length<3){if(!g)throw new TypeError(p);c=a[f?f[--g]:--g]}for(;g--;)e=f?f[g]:g,c=b(c,a[e],e,a);return c},n.find=n.detect=function(a,b,c){var d;return b=n.iteratee(b,c),n.some(a,function(a,c,e){return b(a,c,e)?(d=a,!0):void 0}),d},n.filter=n.select=function(a,b,c){var d=[];return null==a?d:(b=n.iteratee(b,c),n.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d)},n.reject=function(a,b,c){return n.filter(a,n.negate(n.iteratee(b)),c)},n.every=n.all=function(a,b,c){if(null==a)return!0;b=n.iteratee(b,c);var d,e,f=a.length!==+a.length&&n.keys(a),g=(f||a).length;for(d=0;g>d;d++)if(e=f?f[d]:d,!b(a[e],e,a))return!1;return!0},n.some=n.any=function(a,b,c){if(null==a)return!1;b=n.iteratee(b,c);var d,e,f=a.length!==+a.length&&n.keys(a),g=(f||a).length;for(d=0;g>d;d++)if(e=f?f[d]:d,b(a[e],e,a))return!0;return!1},n.contains=n.include=function(a,b){return null==a?!1:(a.length!==+a.length&&(a=n.values(a)),n.indexOf(a,b)>=0)},n.invoke=function(a,b){var c=g.call(arguments,2),d=n.isFunction(b);return n.map(a,function(a){return(d?b:a[b]).apply(a,c)})},n.pluck=function(a,b){return n.map(a,n.property(b))},n.where=function(a,b){return n.filter(a,n.matches(b))},n.findWhere=function(a,b){return n.find(a,n.matches(b))},n.max=function(a,b,c){var d,e,f=-1/0,g=-1/0;if(null==b&&null!=a){a=a.length===+a.length?a:n.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=n.iteratee(b,c),n.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-1/0&&f===-1/0)&&(f=a,g=e)});return f},n.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=a.length===+a.length?a:n.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=n.iteratee(b,c),n.each(a,function(a,c,d){e=b(a,c,d),(g>e||1/0===e&&1/0===f)&&(f=a,g=e)});return f},n.shuffle=function(a){for(var b,c=a&&a.length===+a.length?a:n.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=n.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},n.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=n.values(a)),a[n.random(a.length-1)]):n.shuffle(a).slice(0,Math.max(0,b))},n.sortBy=function(a,b,c){return b=n.iteratee(b,c),n.pluck(n.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var q=function(a){return function(b,c,d){var e={};return c=n.iteratee(c,d),n.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};n.groupBy=q(function(a,b,c){n.has(a,c)?a[c].push(b):a[c]=[b]}),n.indexBy=q(function(a,b,c){a[c]=b}),n.countBy=q(function(a,b,c){n.has(a,c)?a[c]++:a[c]=1}),n.sortedIndex=function(a,b,c,d){c=n.iteratee(c,d,1);for(var e=c(b),f=0,g=a.length;g>f;){var h=f+g>>>1;c(a[h])<e?f=h+1:g=h}return f},n.toArray=function(a){return a?n.isArray(a)?g.call(a):a.length===+a.length?n.map(a,n.identity):n.values(a):[]},n.size=function(a){return null==a?0:a.length===+a.length?a.length:n.keys(a).length},n.partition=function(a,b,c){b=n.iteratee(b,c);var d=[],e=[];return n.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},n.first=n.head=n.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:g.call(a,0,b)},n.initial=function(a,b,c){return g.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},n.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:g.call(a,Math.max(a.length-b,0))},n.rest=n.tail=n.drop=function(a,b,c){return g.call(a,null==b||c?1:b)},n.compact=function(a){return n.filter(a,n.identity)};var r=function(a,b,c,d){if(b&&n.every(a,n.isArray))return h.apply(d,a);for(var e=0,g=a.length;g>e;e++){var i=a[e];n.isArray(i)||n.isArguments(i)?b?f.apply(d,i):r(i,b,c,d):c||d.push(i)}return d};n.flatten=function(a,b){return r(a,b,!1,[])},n.without=function(a){return n.difference(a,g.call(arguments,1))},n.uniq=n.unique=function(a,b,c,d){if(null==a)return[];n.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=n.iteratee(c,d));for(var e=[],f=[],g=0,h=a.length;h>g;g++){var i=a[g];if(b)g&&f===i||e.push(i),f=i;else if(c){var j=c(i,g,a);n.indexOf(f,j)<0&&(f.push(j),e.push(i))}else n.indexOf(e,i)<0&&e.push(i)}return e},n.union=function(){return n.uniq(r(arguments,!0,!0,[]))},n.intersection=function(a){if(null==a)return[];for(var b=[],c=arguments.length,d=0,e=a.length;e>d;d++){var f=a[d];if(!n.contains(b,f)){for(var g=1;c>g&&n.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},n.difference=function(a){var b=r(g.call(arguments,1),!0,!0,[]);return n.filter(a,function(a){return!n.contains(b,a)})},n.zip=function(a){if(null==a)return[];for(var b=n.max(arguments,"length").length,c=Array(b),d=0;b>d;d++)c[d]=n.pluck(arguments,d);return c},n.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},n.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=n.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}for(;e>d;d++)if(a[d]===b)return d;return-1},n.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=a.length;for("number"==typeof c&&(d=0>c?d+c+1:Math.min(d,c+1));--d>=0;)if(a[d]===b)return d;return-1},n.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var s=function(){};n.bind=function(a,b){var c,d;if(m&&a.bind===m)return m.apply(a,g.call(arguments,1));if(!n.isFunction(a))throw new TypeError("Bind must be called on a function");return c=g.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(g.call(arguments)));s.prototype=a.prototype;var e=new s;s.prototype=null;var f=a.apply(e,c.concat(g.call(arguments)));return n.isObject(f)?f:e}},n.partial=function(a){var b=g.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===n&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},n.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=n.bind(a[c],a);return a},n.memoize=function(a,b){var c=function(d){var e=c.cache,f=b?b.apply(this,arguments):d;return n.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},n.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},n.defer=function(a){return n.delay.apply(n,[a,1].concat(g.call(arguments,1)))},n.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:n.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=n.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},n.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=n.now()-g;b>j&&j>0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=n.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},n.wrap=function(a,b){return n.partial(b,a)},n.negate=function(a){return function(){return!a.apply(this,arguments)}},n.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},n.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},n.before=function(a,b){var c;return function(){return--a>0?c=b.apply(this,arguments):b=null,c}},n.once=n.partial(n.before,2),n.keys=function(a){if(!n.isObject(a))return[];if(l)return l(a);var b=[];for(var c in a)n.has(a,c)&&b.push(c);return b},n.values=function(a){for(var b=n.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},n.pairs=function(a){for(var b=n.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},n.invert=function(a){for(var b={},c=n.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},n.functions=n.methods=function(a){var b=[];for(var c in a)n.isFunction(a[c])&&b.push(c);return b.sort()},n.extend=function(a){if(!n.isObject(a))return a;for(var b,c,d=1,e=arguments.length;e>d;d++){b=arguments[d];for(c in b)j.call(b,c)&&(a[c]=b[c])}return a},n.pick=function(a,b,c){var d,e={};if(null==a)return e;if(n.isFunction(b)){b=o(b,c);for(d in a){var f=a[d];b(f,d,a)&&(e[d]=f)}}else{var i=h.apply([],g.call(arguments,1));a=new Object(a);for(var j=0,k=i.length;k>j;j++)d=i[j],d in a&&(e[d]=a[d])}return e},n.omit=function(a,b,c){if(n.isFunction(b))b=n.negate(b);else{var d=n.map(h.apply([],g.call(arguments,1)),String);b=function(a,b){return!n.contains(d,b)}}return n.pick(a,b,c)},n.defaults=function(a){if(!n.isObject(a))return a;for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b];for(var e in d)void 0===a[e]&&(a[e]=d[e])}return a},n.clone=function(a){return n.isObject(a)?n.isArray(a)?a.slice():n.extend({},a):a},n.tap=function(a,b){return b(a),a};var t=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof n&&(a=a._wrapped),b instanceof n&&(b=b._wrapped);var e=i.call(a);if(e!==i.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]===a)return d[f]===b;var g=a.constructor,h=b.constructor;if(g!==h&&"constructor"in a&&"constructor"in b&&!(n.isFunction(g)&&g instanceof g&&n.isFunction(h)&&h instanceof h))return!1;c.push(a),d.push(b);var j,k;if("[object Array]"===e){if(j=a.length,k=j===b.length)for(;j--&&(k=t(a[j],b[j],c,d)););}else{var l,m=n.keys(a);if(j=m.length,k=n.keys(b).length===j)for(;j--&&(l=m[j],k=n.has(b,l)&&t(a[l],b[l],c,d)););}return c.pop(),d.pop(),k};n.isEqual=function(a,b){return t(a,b,[],[])},n.isEmpty=function(a){if(null==a)return!0;if(n.isArray(a)||n.isString(a)||n.isArguments(a))return 0===a.length;for(var b in a)if(n.has(a,b))return!1;return!0},n.isElement=function(a){return!(!a||1!==a.nodeType)},n.isArray=k||function(a){return"[object Array]"===i.call(a)},n.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},n.each(["Arguments","Function","String","Number","Date","RegExp"],function(a){n["is"+a]=function(b){return i.call(b)==="[object "+a+"]"}}),n.isArguments(arguments)||(n.isArguments=function(a){return n.has(a,"callee")}),"function"!=typeof/./&&(n.isFunction=function(a){return"function"==typeof a||!1}),n.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},n.isNaN=function(a){return n.isNumber(a)&&a!==+a},n.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===i.call(a)},n.isNull=function(a){return null===a},n.isUndefined=function(a){return void 0===a},n.has=function(a,b){return null!=a&&j.call(a,b)},n.noConflict=function(){return a._=b,this},n.identity=function(a){return a},n.constant=function(a){return function(){return a}},n.noop=function(){},n.property=function(a){return function(b){return b[a]}},n.matches=function(a){var b=n.pairs(a),c=b.length;return function(a){if(null==a)return!c;a=new Object(a);for(var d=0;c>d;d++){var e=b[d],f=e[0];if(e[1]!==a[f]||!(f in a))return!1}return!0}},n.times=function(a,b,c){var d=Array(Math.max(0,a));b=o(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},n.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},n.now=Date.now||function(){return(new Date).getTime()};var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},v=n.invert(u),w=function(a){var b=function(b){return a[b]},c="(?:"+n.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};n.escape=w(u),n.unescape=w(v),n.result=function(a,b){if(null==a)return void 0;var c=a[b];return n.isFunction(c)?a[b]():c};var x=0;n.uniqueId=function(a){var b=++x+"";return a?a+b:b},n.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var y=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},A=/\\|'|\r|\n|\u2028|\u2029/g,B=function(a){return"\\"+z[a]};n.template=function(a,b,c){!b&&c&&(b=c),b=n.defaults({},b,n.templateSettings);var d=RegExp([(b.escape||y).source,(b.interpolate||y).source,(b.evaluate||y).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(A,B),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,n)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},n.chain=function(a){var b=n(a);return b._chain=!0,b};var C=function(a){return this._chain?n(a).chain():a};n.mixin=function(a){n.each(n.functions(a),function(b){var c=n[b]=a[b];n.prototype[b]=function(){var a=[this._wrapped];return f.apply(a,arguments),C.call(this,c.apply(n,a))}})},n.mixin(n),n.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=c[a];n.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],C.call(this,c)}}),n.each(["concat","join","slice"],function(a){var b=c[a];n.prototype[a]=function(){return C.call(this,b.apply(this._wrapped,arguments))}}),n.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return n})}).call(this),function(a,b){function c(a){var b=document.createElement("style");document.head.appendChild(b),b.innerHTML=a}function d(b){this.options={},a.extend(this.options,f,b||{}),this._init()}var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(a){setTimeout(a,1/60*1e3)},f={trigger:null,position:null,onClick:function(){},style:".ve-gotop {            position: fixed;            right: 0.4rem;            bottom: 0.4rem;            z-index: 10000;            opacity: 0;            pointer-events: none;            -webkit-transition: opacity 0.15s linear;            transition: opacity 0.15s linear;            width: 33px;            height: 33px;            background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAD2klEQVR42u2cTUsbQRjHLWQphR6UHGrB9JP01MbmC9RGe/eY72M2viu+NBgqvq0bFFFEUQ8eNCAa4kEfRBEUBd8ufR67A6Gx3d3svGymK/xAJ9nNzC+bmf9OZmyS8ZPL5QwkgXxGMkgWsZESAkgF2UQKzmMZ57kJxBBVL1mNb0Y6kHkEAjLvnKu5URofQz4hNgKCsJ3XiIVRgIF8Qw4RkMSh85pGGAS8Qr4gFQQUUUFSVBdVElrZRyAk2EirbAlpBEJKWlZnmEUg5GSRmCgJrxELgQbBojrzlvDWCTzQYGxS3XlJeIPsINCg7FAbeOSDVQQanNVAfQbrGDUhW6+ETgQ0o8uvhHcIaEqrn9hsaSzC8hTHnXsH0JyUl1GiorsIp42Gt3sI/Un/6z7iUHUFTdMMRM6NnFk9nxF7SUS7ioaPjY3B+Pi4ChFEskaEigQ5NTUFd3d3zywsLKgQYf0pIS5bwuTkJNze3sLi4iLMzs7Cw8MDFItFDuc2Xag5pqVaRIdMCSMjI3B9fQ3r6+us7FnG4+MjLC8vyxbRUS1iXpaEoaEhuLi4gK2trZrHSMbT0xOsra3JFGFVZweQQW9vL5yenkKpVGJlf5WxsbEhSwRhkIiELBHlcplwfd7MzMyzjO3tbVkiPpCIpAQJdBXQ1UBXBf3tWcbu7q4MEUkSkREsgd5Z6heof2BlvmTs7++LFpEhET0CJdDIQCMEjRSsrC4ZBwcHIkVkSURRlATbtikrUGZgZYFkHB0dQV9fn4i6LpGIPRES5ubmKDFSemRlXGQcHx9Df38/7/qWmgRGZ5LByrjKODk5gYGBAa7nbhIYnVmZEBlnZ2cwODjIVcSewOgsVMb5+TkMDw9z+2gUBUVnKTIuLy9hdHSUS2fZIyA6S5VxdXVF8xrBvvOgMME5OiuRcXNzAxMTE3WdgwWqJMforFQGddL5fN738SxiJwJEZ+qwqqOzchk0bBcKBV/Hspsug290Vi/j/v4epqen/RxrsDkJy+PsMovO9Jl0ic5KZdBsF/3u5Rjbz1QdE0GN9x6d1fcZNVes21Rd3McVwYaqMEOdptfk2VIzne9RhE7Y3r7g0V9E0u9XfiQhCGEUWUZi7l8C6y8iHS0LcFkWwGSk/vuFItHSoZdX3oOmvPe7sq5LQwnf611raWokwYyWIP9ugxEtSsc2RNsUsO7RxhWsc7SVSca+UBqGwjxERtsdsU4qN8CmdNsAGzRvdCrYEt2JGGHdJN+OrAgUsIK0e+8M1UuJI1+RPIfG/3DOFQ9eM/VXShvyEelGskjxhX+k8dN5rNt5bpusd/4XjtUkOQ5Pct4AAAAASUVORK5CYII=) no-repeat;            background-size: contain;        }            .ve-gotop-active {            opacity: 1;            pointer-events: auto;        }"};a.extend(d.prototype,{_init:function(){c(this.options.style);var b=this,d=b.options;d.trigger||(d.trigger=a('<div class="ve-gotop"></div>').appendTo("body")),d.position&&a(d.trigger).css({bottom:d.position.bottom,right:d.position.right}),a(d.trigger).on("click",function(a){a.preventDefault(),window.scrollTo(0,0),d.onClick&&d.onClick.call(b,a)}),b._EventHandler=a(window).on("scroll touchend",function(){b._check()})},_check:function(){var b=this;e(function(){var c=a("body").scrollTop(),d=window.innerHeight;c>d?b.show():b.hide()})},destroy:function(){a(window).off({type:this._EventHandler}),a(this.trigger).remove()},show:function(){a(this.options.trigger).addClass("ve-gotop-active")},hide:function(){a(this.options.trigger).removeClass("ve-gotop-active")}}),a.fn.gotop=function(a){return a||(a={}),a.trigger=this,new d(a)},b.goTop=d}(Zepto,window.lib||(window.lib={})),function(a,b){var c=navigator.appVersion.match(/(iPhone\sOS)\s([\d_]+)/),d=c&&c[2].split("_");d=d&&parseFloat(d.length>1?d.splice(0,2).join("."):d[0],10);var e=d&&6>d,f={defaultOpts:{interval:200,threshold:5,container:null},init:function(b){this.options=a.extend(!0,{},this.defaultOpts,b),this.addEvent(),this.trigger()},addEvent:function(){var b=this,c=this.options;if(e){var d={},f=null;a(window).on("touchstart",function(){d={scrollY:window.scrollY,time:Date.now()},f&&clearTimeout(f)}).on("touchend",function(a){if(a&&a.changedTouches){var e=Math.abs(window.scrollY-d.scrollY);if(e>c.threshold){var g=Date.now()-d.time;f=setTimeout(function(){b.update(),d={},clearTimeout(f),f=null},g>c.interval?0:200)}}else b.update()}).on("touchcancel",function(){f&&clearTimeout(f),d={}})}else{var g=a(b.options.container?b.options.container:window);g.on("scroll",function(){b.update()})}},trigger:function(){var b=this,c=(this.options,e&&"touchend"||"scroll");b.prevlist&&b.prevlist.each(function(a,b){b&&(b.onerror=b.onload=null)}),b.imglist=a(".lazy"),b.prevlist=a.extend({},!0,b.imglist),a(window).trigger(c)},inviewport:function(a,b){var c=window.pageYOffset,d=window.pageYOffset+window.innerHeight,e=a.offset().top;return e>=c&&d>=e+(b||-100)},update:function(){var b=this;b.imglist.each(function(c,d){if(d&&b.inviewport(a(d))){var e=a(d),f=e.attr("dataimg"),g=new Image;g.src=f,g.onload=function(){b.imglist[c]=null,e.removeClass("lazy").removeAttr("dataimg").css("background-image","url("+f+")"),g.onload=g.onerror=null},g.onerror=function(){b.imglist[c]=null,e.removeClass("lazy").removeAttr("dataimg").css("background-image","url(http://h5.ve.cn/assets/img/cart_img_black_640x253.png)"),g.onload=g.onerror=null}}})}};b.lazyload=f}(Zepto,window.lib?window.lib:window.lib={}),!function(a,b){function c(a,b){return[[(a/3+(a+b)/3-a)/(b-a),(a*a/3+a*b*2/3-a*a)/(b*b-a*a)],[(b/3+(a+b)/3-a)/(b-a),(b*b/3+a*b*2/3-a*a)/(b*b-a*a)]]}function d(a){if(this.v=a.v||0,this.a=a.a||0,"undefined"!=typeof a.t&&(this.t=a.t),"undefined"!=typeof a.s&&(this.s=a.s),"undefined"==typeof this.t)if("undefined"==typeof this.s)this.t=-this.v/this.a;else{var b=(Math.sqrt(this.v*this.v+2*this.a*this.s)-this.v)/this.a,c=(-Math.sqrt(this.v*this.v+2*this.a*this.s)-this.v)/this.a;this.t=Math.min(b,c)}"undefined"==typeof this.s&&(this.s=this.a*this.t*this.t/2+this.v*this.t)}d.prototype.generateCubicBezier=function(){return c(this.v/this.a,this.t+this.v/this.a)},b.motion=d}(window,window.lib||(window.lib={})),!function(a){"use strict";function b(a,b){for(var c=a;c;){if(c.contains(b)||c==b)return c;c=c.parentNode}return null}function c(a,b,c){var d=i.createEvent("HTMLEvents");if(d.initEvent(b,!0,!0),"object"==typeof c)for(var e in c)d[e]=c[e];a.dispatchEvent(d)}function d(a,b,c,d,e,f,g,h){var i=Math.atan2(h-f,g-e)-Math.atan2(d-b,c-a),j=Math.sqrt((Math.pow(h-f,2)+Math.pow(g-e,2))/(Math.pow(d-b,2)+Math.pow(c-a,2))),k=[e-j*a*Math.cos(i)+j*b*Math.sin(i),f-j*b*Math.cos(i)-j*a*Math.sin(i)];return{rotate:i,scale:j,translate:k,matrix:[[j*Math.cos(i),-j*Math.sin(i),k[0]],[j*Math.sin(i),j*Math.cos(i),k[1]],[0,0,1]]}}function e(a){0===Object.keys(l).length&&(j.addEventListener("touchmove",f,!1),j.addEventListener("touchend",g,!1),j.addEventListener("touchcancel",h,!1));for(var d=0;d<a.changedTouches.length;d++){var e=a.changedTouches[d],i={};for(var m in e)i[m]=e[m];var n={startTouch:i,startTime:Date.now(),status:"tapping",element:a.srcElement,pressingHandler:setTimeout(function(b){return function(){"tapping"===n.status&&(n.status="pressing",c(b,"press",{touchEvent:a})),clearTimeout(n.pressingHandler),n.pressingHandler=null}}(a.srcElement),500)};l[e.identifier]=n}if(2==Object.keys(l).length){var o=[];for(var m in l)o.push(l[m].element);c(b(o[0],o[1]),"dualtouchstart",{touches:k.call(a.touches),touchEvent:a})}}function f(a){for(var e=0;e<a.changedTouches.length;e++){var f=a.changedTouches[e],g=l[f.identifier];if(!g)return;g.lastTouch||(g.lastTouch=g.startTouch),g.lastTime||(g.lastTime=g.startTime),g.velocityX||(g.velocityX=0),g.velocityY||(g.velocityY=0),g.duration||(g.duration=0);var h=Date.now()-g.lastTime,i=(f.clientX-g.lastTouch.clientX)/h,j=(f.clientY-g.lastTouch.clientY)/h,k=70;h>k&&(h=k),g.duration+h>k&&(g.duration=k-h),g.velocityX=(g.velocityX*g.duration+i*h)/(g.duration+h),g.velocityY=(g.velocityY*g.duration+j*h)/(g.duration+h),g.duration+=h,g.lastTouch={};for(var m in f)g.lastTouch[m]=f[m];g.lastTime=Date.now();var n=f.clientX-g.startTouch.clientX,o=f.clientY-g.startTouch.clientY,p=Math.sqrt(Math.pow(n,2)+Math.pow(o,2));("tapping"===g.status||"pressing"===g.status)&&p>10&&(g.status="panning",g.isVertical=!(Math.abs(n)>Math.abs(o)),c(g.element,"panstart",{touch:f,touchEvent:a,isVertical:g.isVertical}),c(g.element,(g.isVertical?"vertical":"horizontal")+"panstart",{touch:f,touchEvent:a})),"panning"===g.status&&(g.panTime=Date.now(),c(g.element,"pan",{displacementX:n,displacementY:o,touch:f,touchEvent:a,isVertical:g.isVertical}),g.isVertical?c(g.element,"verticalpan",{displacementY:o,touch:f,touchEvent:a}):c(g.element,"horizontalpan",{displacementX:n,touch:f,touchEvent:a}))}if(2==Object.keys(l).length){for(var q,r=[],s=[],t=[],e=0;e<a.touches.length;e++){var f=a.touches[e],g=l[f.identifier];r.push([g.startTouch.clientX,g.startTouch.clientY]),s.push([f.clientX,f.clientY])}for(var m in l)t.push(l[m].element);q=d(r[0][0],r[0][1],r[1][0],r[1][1],s[0][0],s[0][1],s[1][0],s[1][1]),c(b(t[0],t[1]),"dualtouch",{transform:q,touches:a.touches,touchEvent:a})}}function g(a){if(2==Object.keys(l).length){var d=[];for(var e in l)d.push(l[e].element);c(b(d[0],d[1]),"dualtouchend",{touches:k.call(a.touches),touchEvent:a})}for(var i=0;i<a.changedTouches.length;i++){var n=a.changedTouches[i],o=n.identifier,p=l[o];if(p){if(p.pressingHandler&&(clearTimeout(p.pressingHandler),p.pressingHandler=null),"tapping"===p.status&&(p.timestamp=Date.now(),c(p.element,"tap",{touch:n,touchEvent:a}),m&&p.timestamp-m.timestamp<300&&c(p.element,"doubletap",{touch:n,touchEvent:a}),m=p),"panning"===p.status){var q=Date.now(),r=q-p.startTime,s=((n.clientX-p.startTouch.clientX)/r,(n.clientY-p.startTouch.clientY)/r,n.clientX-p.startTouch.clientX),t=n.clientY-p.startTouch.clientY,u=Math.sqrt(p.velocityY*p.velocityY+p.velocityX*p.velocityX),v=u>.5&&q-p.lastTime<100,w={duration:r,isflick:v,velocityX:p.velocityX,velocityY:p.velocityY,displacementX:s,displacementY:t,touch:n,touchEvent:a,isVertical:p.isVertical};c(p.element,"panend",w),v&&(c(p.element,"flick",w),p.isVertical?c(p.element,"verticalflick",w):c(p.element,"horizontalflick",w))}"pressing"===p.status&&c(p.element,"pressend",{touch:n,touchEvent:a}),delete l[o]}}0===Object.keys(l).length&&(j.removeEventListener("touchmove",f,!1),j.removeEventListener("touchend",g,!1),j.removeEventListener("touchcancel",h,!1))}function h(a){if(2==Object.keys(l).length){var d=[];for(var e in l)d.push(l[e].element);c(b(d[0],d[1]),"dualtouchend",{touches:k.call(a.touches),touchEvent:a})}for(var i=0;i<a.changedTouches.length;i++){var m=a.changedTouches[i],n=m.identifier,o=l[n];o&&(o.pressingHandler&&(clearTimeout(o.pressingHandler),o.pressingHandler=null),"panning"===o.status&&c(o.element,"panend",{touch:m,touchEvent:a}),"pressing"===o.status&&c(o.element,"pressend",{touch:m,touchEvent:a}),delete l[n])}0===Object.keys(l).length&&(j.removeEventListener("touchmove",f,!1),j.removeEventListener("touchend",g,!1),j.removeEventListener("touchcancel",h,!1))}var i=a.document,j=i.documentElement,k=Array.prototype.slice,l={},m=null;j.addEventListener("touchstart",e,!1)}(window,window.lib||(window.lib={})),!function(a,b){function c(a,b,c,d){function e(a){return(3*k*a+2*l)*a+m}function f(a){return((k*a+l)*a+m)*a}function g(a){return((n*a+o)*a+p)*a}function h(a){for(var b,c,d=a,g=0;8>g;g++){if(c=f(d)-a,Math.abs(c)<j)return d;if(b=e(d),Math.abs(b)<j)break;d-=c/b}var h=1,i=0;for(d=a;h>i;){if(c=f(d)-a,Math.abs(c)<j)return d;c>0?h=d:i=d,d=(h+i)/2}return d}function i(a){return g(h(a))}var j=1e-6,k=3*a-3*c+1,l=3*c-6*a,m=3*a,n=3*b-3*d+1,o=3*d-6*b,p=3*b;return i}b.cubicbezier=c,b.cubicbezier.liner=c(0,0,1,1),b.cubicbezier.ease=c(.25,.1,.25,1),b.cubicbezier.easeIn=c(.42,0,1,1),b.cubicbezier.easeOut=c(0,0,.58,1),b.cubicbezier.easeInOut=c(.42,0,.58,1)}(window,window.lib||(window.lib={})),!function(a,b){function c(b){function d(){e=!0,i&&i.forEach(function(a){a&&a()})}var e=!1;Object.defineProperty(this,"isRequested",{get:function(){return e}});var f,i=[],j=!1;this.request=function(){if(!e){var c=arguments;return j=!1,f=g(function(){j||(b.apply(a,c),d())}),this}},this.cancel=function(){f&&(j=!0,h(f))},this.then=function(a){return e?a&&a():i.push(a),this},this.clone=function(){return new c(b)}}function d(a,d,e,g){"function"==typeof g&&(g={0:g});for(var h=a/f,i=1/h,j=[],k=Object.keys(g).map(function(a){return parseInt(a)}),l=0;h>l;l++){var m=k[0],n=i*l;if(null!=m&&100*n>=m){var o=g[""+m];o instanceof c||(o=new c(o)),j.push(o),k.shift()}else j.length&&j.push(j[j.length-1].clone())}var p;"string"==typeof d||d instanceof Array?b.cubicbezier?"string"==typeof d?b.cubicbezier[d]&&(p=b.cubicbezier[d]):d instanceof Array&&4===d.length&&(p=b.cubicbezier.apply(b.cubicbezier,d)):console.error("require lib.cubicbezier"):"function"==typeof d&&(p=d),p||console.error("unexcept timing function");var q,r=!1,s=0,t=0;this.play=function(){function a(){r=!1,u&&u()}function b(){var a=i*(t+1).toFixed(10);q=j[t],q.request(a.toFixed(10),d(a).toFixed(10)),q.then(function(){t++,c()})}function c(){r&&(t===j.length?a():b())}return r?void 0:(r=!0,s=setTimeout(function(){s=0,c()},!t&&e||0),this)},this.stop=function(){return r?(r=!1,s&&(clearTimeout(s),s=0),q&&q.cancel(),this):void 0};var u;this.onend=function(a){u=a}}var e=60,f=1e3/e,g=window.requestAnimationFrame||window.msRequestAnimationFrame||window.webkitRequestAnimationFrame||window.mozkitRequestAnimationFrame||function(a){return setTimeout(a,f)},h=window.cancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||function(a){clearTimeout(a)};b.animation=d,b.animation.Frame=c,b.animation.requestFrame=function(a){var b=new c(a);return b.request(),b}}(window,window.lib||(window.lib={})),!function(a,b){function c(){b.scroll.outputDebugLog&&console.debug.apply(console,arguments)}function d(a){var b=a.getBoundingClientRect();if(!b){b={},b.width=a.offsetWidth,b.height=a.offsetHeight,b.left=a.offsetLeft,b.top=a.offsetTop;for(var c=a.offsetParent;c;)b.left+=c.offsetLeft,b.top+=c.offsetTop,c=c.offsetParent;b.right=b.left+b.width,b.bottom=b.top+b.height}return b}function e(a){return 0-a.options[a.axis+"Padding1"]}function f(a){var b=d(a.element),c=d(a.viewport),f=e(a);if("y"===a.axis)var g=0-b.height+c.height;else var g=0-b.width+c.width;return Math.min(g+a.options[a.axis+"Padding2"],f)}function g(a,b){return b>a.minScrollOffset?b-a.minScrollOffset:b<a.maxScrollOffset?b-a.maxScrollOffset:void 0}function h(a,b){return b>a.minScrollOffset?b=a.minScrollOffset:b<a.maxScrollOffset&&(b=a.maxScrollOffset),b}function i(a,b,d){c(a.element.scrollId,b,d);var e=m.createEvent("HTMLEvents");if(e.initEvent(b,!1,!0),e.scrollObj=a,d)for(var f in d)e[f]=d[f];a.element.dispatchEvent(e),a.viewport.dispatchEvent(e)}function j(a){var b,c={x:0,y:0},d=getComputedStyle(a.element).webkitTransform;return"none"!==d&&(b=d.match(/^matrix3d\((?:[-\d.]+,\s*){12}([-\d.]+),\s*([-\d.]+)(?:,\s*[-\d.]+){2}\)/)||d.match(/^matrix\((?:[-\d.]+,\s*){4}([-\d.]+),\s*([-\d.]+)\)$/))&&(c.x=parseFloat(b[1])||0,c.y=parseFloat(b[2])||0),c}function k(a,b){return a=parseFloat(a),b=parseFloat(b),0!=a&&(a+="px"),0!=b&&(b+="px"),q?"translate3d("+a+", "+b+", 0)":"translate("+a+", "+b+")"}function l(a,l){function m(a){return B||H?(a.preventDefault(),a.stopPropagation(),!1):!0}function q(a){B||H||setTimeout(function(){var b=document.createEvent("HTMLEvents");b.initEvent("niceclick",!0,!0),a.target.dispatchEvent(b)},300)}function s(a,c){E=null,clearTimeout(F),F=setTimeout(function(){E&&(E=null,b.animation.requestFrame(a))},c||400),E=a}function t(){if(A.enabled)if(H&&z(),l.useFrameAnimation)D&&D.stop(),D=null;else{var b=j(A);a.style.webkitTransform=k(b.x,b.y),a.style.webkitTransition="",E=null,clearTimeout(F)}}function u(){if(A.enabled){var c=j(A)[A.axis],d=g(A,c);if(d){var e=h(A,c);if(d>0?i(A,"y"===A.axis?"pulldownend":"pullrightend"):0>d&&i(A,"y"===A.axis?"pullupend":"pullleftend"),l.useFrameAnimation){var f=e-c;D=new b.animation(400,b.cubicbezier.ease,0,function(b,d){var e=(c+f*d).toFixed(2);a.style.webkitTransform="y"===A.axis?k(0,e):k(e,0),i(A,"scrolling")}),D.onend(z),D.play()}else{a.style.webkitTransition="-webkit-transform 0.4s ease 0";var m=e.toFixed(0);a.style.webkitTransform="y"===A.axis?k(0,m):k(m,0),s(z,400),b.animation.requestFrame(function(){H&&A.enabled&&(i(A,"scrolling"),b.animation.requestFrame(arguments.callee))})}}else H&&z()}}function v(a){A.enabled&&("y"!==A.axis&&a.isVertical||"x"===A.axis&&a.isVertical||(A.transformOffset=j(A),A.minScrollOffset=e(A),A.maxScrollOffset=f(A),G=2.5,J=!0,H=!0,I=!1,i(A,"scrollstart"),K=a["displacement"+A.axis.toUpperCase()]))}function w(b){if(A.enabled&&("y"===A.axis&&b.isVertical||"x"===A.axis&&!b.isVertical)){b.stopPropagation();var c=b["displacement"+A.axis.toUpperCase()];if(Math.abs(c-K)<5)return void b.stopPropagation();K=c;var d=A.transformOffset[A.axis]+c;d>A.minScrollOffset?(d=A.minScrollOffset+(d-A.minScrollOffset)/G,G*=1.003):d<A.maxScrollOffset&&(d=A.maxScrollOffset-(A.maxScrollOffset-d)/G,G*=1.003),G>4&&(G=4);var e=g(A,d);e&&(i(A,e>0?"y"===A.axis?"pulldown":"pullright":"y"===A.axis?"pullup":"pullleft",{boundaryOffset:Math.abs(e)}),A.options.noBounce&&(d=h(A,d))),a.style.webkitTransform="y"===A.axis?k(0,d.toFixed(2)):k(d.toFixed(2),0),i(A,"scrolling")
}}function x(a){A.enabled&&("y"===A.axis&&a.isVertical||"x"===A.axis&&!a.isVertical)&&(a.stopPropagation(),a.isflick&&y(a))}function y(d){J=!0;var e,f,h,m,n,o,q,r,t,u,v,w,x,y,B,C,E;m=j(A)[A.axis];var F=g(A,m);if(!F){e=d["velocity"+A.axis.toUpperCase()];var G=2,K=.0015;l.inertia&&p[l.inertia]&&(G=p[l.inertia][0],K=p[l.inertia][1]),e>G&&(e=G),-G>e&&(e=-G),f=K*(e/Math.abs(e)),o=new b.motion({v:e,a:-f}),h=o.t,n=m+o.s;var L=g(A,n);if(L){c("惯性计算超出了边缘",L),q=e,r=f,L>0?(u=A.minScrollOffset,w=1):(u=A.maxScrollOffset,w=-1),v=new b.motion({v:w*q,a:-w*r,s:Math.abs(u-m)}),t=v.t;var M=v.generateCubicBezier();if(x=q-r*t,y=.03*(x/Math.abs(x)),E=new b.motion({v:x,a:-y}),B=E.t,C=u+E.s,E.generateCubicBezier(),l.noBounce)if(c("没有回弹效果"),m!==u)if(l.useFrameAnimation){var N=u-m,O=b.cubicbezier(M[0][0],M[0][1],M[1][0],M[1][1]);D=new b.animation(t.toFixed(0),O,0,function(b,c){i(A,"scrolling",{afterFlick:!0});var d=m+N*c;a.style.webkitTransform="y"===A.axis?k(0,d.toFixed(2)):k(d.toFixed(2),0)}),D.onend(z),D.play()}else{a.style.webkitTransition="-webkit-transform "+(t/1e3).toFixed(2)+"s cubic-bezier("+M+") 0";var P=u.toFixed(0);a.style.webkitTransform="y"===A.axis?k(0,P):k(P,0),s(z,1e3*(t/1e3).toFixed(2))}else z();else if(m!==C)if(c("惯性滚动","s="+C.toFixed(0),"t="+((t+B)/1e3).toFixed(2)),l.useFrameAnimation){var N=C-m,O=b.cubicbezier.easeOut;D=new b.animation((t+B).toFixed(0),O,0,function(b,c){i(A,"scrolling",{afterFlick:!0});var d=m+N*c;a.style.webkitTransform="y"===A.axis?k(0,d.toFixed(2)):k(d.toFixed(2),0)}),D.onend(function(){if(A.enabled){var c=u-C,d=b.cubicbezier.ease;D=new b.animation(400,d,0,function(b,d){i(A,"scrolling",{afterFlick:!0});var e=C+c*d;a.style.webkitTransform="y"===A.axis?k(0,e.toFixed(2)):k(e.toFixed(2),0)}),D.onend(z),D.play()}}),D.play()}else{a.style.webkitTransition="-webkit-transform "+((t+B)/1e3).toFixed(2)+"s ease-out 0";var P=C.toFixed(0);a.style.webkitTransform="y"===A.axis?k(0,P):k(P,0),s(function(){if(A.enabled)if(c("惯性回弹","s="+u.toFixed(0),"t=400"),C!==u){a.style.webkitTransition="-webkit-transform 0.4s ease 0";var b=u.toFixed(0);a.style.webkitTransform="y"===A.axis?k(0,b):k(b,0),s(z,400)}else z()},1e3*((t+B)/1e3).toFixed(2))}else z()}else{c("惯性计算没有超出边缘");var Q=o.generateCubicBezier();if(l.useFrameAnimation){var N=n-m,O=b.cubicbezier(Q[0][0],Q[0][1],Q[1][0],Q[1][1]);D=new b.animation(h.toFixed(0),O,0,function(b,c){i(A,"scrolling",{afterFlick:!0});var d=(m+N*c).toFixed(2);a.style.webkitTransform="y"===A.axis?k(0,d):k(d,0)}),D.onend(z),D.play()}else{a.style.webkitTransition="-webkit-transform "+(h/1e3).toFixed(2)+"s cubic-bezier("+Q+") 0";var P=n.toFixed(0);a.style.webkitTransform="y"===A.axis?k(0,P):k(P,0),s(z,1e3*(h/1e3).toFixed(2))}}I=!0,l.useFrameAnimation||b.animation.requestFrame(function(){H&&I&&A.enabled&&(i(A,"scrolling",{afterFlick:!0}),b.animation.requestFrame(arguments.callee))})}}function z(){A.enabled&&(J=!1,setTimeout(function(){!J&&H&&(H=!1,I=!1,l.useFrameAnimation?(D&&D.stop(),D=null):a.style.webkitTransition="",i(A,"scrollend"))},50))}var A=this;if(l=l||{},l.noBounce=!!l.noBounce,l.padding=l.padding||{},l.isPrevent=null==l.isPrevent?!0:!!l.isPrevent,l.isFixScrollendClick=null==l.isFixScrollendClick?!0:!!l.isFixScrollendClick,l.padding?(l.yPadding1=-l.padding.top||0,l.yPadding2=-l.padding.bottom||0,l.xPadding1=-l.padding.left||0,l.xPadding2=-l.padding.right||0):(l.yPadding1=0,l.yPadding2=0,l.xPadding1=0,l.xPadding2=0),l.margin?(l.yMargin1=-l.margin.top||0,l.yMargin2=-l.margin.bottom||0,l.xMargin1=-l.margin.left||0,l.xMargin2=-l.margin.right||0):(l.yMargin1=0,l.yMargin2=0,l.xMargin1=0,l.xMargin2=0),l.direction=l.direction||"y",l.inertia=l.inertia||"normal",this.options=l,A.axis=l.direction,this.element=a,this.viewport=a.parentNode,this.plugins={},this.viewport.addEventListener("touchstart",t,!1),this.viewport.addEventListener("touchend",u,!1),this.viewport.addEventListener("touchcancel",u,!1),this.viewport.addEventListener("panstart",v,!1),this.viewport.addEventListener("pan",w,!1),this.viewport.addEventListener("panend",x,!1),this.element.scrollId=setTimeout(function(){n[A.element.scrollId+""]=A},1),l.isPrevent&&(this.viewport.addEventListener("touchstart",function(){r=!0},!1),A.viewport.addEventListener("touchend",function(){r=!1},!1)),l.isFixScrollendClick){var B,C;this.viewport.addEventListener("scrolling",function(){B=!0,C&&clearTimeout(C),C=setTimeout(function(){B=!1},400)},!1),this.viewport.addEventListener("click",m,!1),this.viewport.addEventListener("tap",q,!1)}if(l.useFrameAnimation){var D;Object.defineProperty(this,"animation",{get:function(){return D}})}else{var E,F=0;a.addEventListener("webkitTransitionEnd",function(a){if(E){var c=E;E=null,clearTimeout(F),b.animation.requestFrame(function(){c(a)})}},!1)}var G,H,I,J;Object.defineProperty(this,"isScrolling",{get:function(){return!!H}});var K,L={init:function(){return this.enable(),this.refresh(),this.scrollTo(0),this},enable:function(){return this.enabled=!0,this},disable:function(){var a=this.element;return this.enabled=!1,this.options.useFrameAnimation?this.animation&&this.animation.stop():b.animation.requestFrame(function(){a.style.webkitTransform=getComputedStyle(a).webkitTransform}),this},getScrollWidth:function(){return d(this.element).width},getScrollHeight:function(){return d(this.element).height},getScrollLeft:function(){return-j(this).x-this.options.xPadding1},getScrollTop:function(){return-j(this).y-this.options.yPadding1},getMaxScrollLeft:function(){return-A.maxScrollOffset-this.options.xPadding1},getMaxScrollTop:function(){return-A.maxScrollOffset-this.options.yPadding1},getBoundaryOffset:function(){return Math.abs(g(this,j(this)[this.axis])||0)},refresh:function(){var a=this.element,b="y"===this.axis,c=b?"height":"width";if(null!=this.options[c])a.style[c]=this.options[c]+"px";else if(a.childElementCount>0){var g,h,k=a.firstElementChild,l=a.lastElementChild;if(document.createRange&&(g=document.createRange(),g.selectNodeContents(a),h=d(g)),h)a.style[c]=h[c]+"px";else if(k&&l){for(;k&&0===d(k)[c]&&k.nextElementSibling;)k=k.nextElementSibling;for(;l&&l!==k&&0===d(l)[c]&&l.previousElementSibling;)l=l.previousElementSibling;a.style[c]=d(l)[b?"bottom":"right"]-d(k)[b?"top":"left"]+"px"}else a.style[c]="0"}else a.style[c]="auto",a.style[c]=d(a)[c]+"px";return this.transformOffset=j(this),this.minScrollOffset=e(this),this.maxScrollOffset=f(this),this.scrollTo(-this.transformOffset[this.axis]-this.options[this.axis+"Padding1"]),i(this,"contentrefresh"),this},offset:function(a){var b=d(this.element),c=d(a);if("y"===this.axis){var e={top:c.top-b.top-this.options.yPadding1,left:c.left-b.left,right:b.right-c.right,width:c.width,height:c.height};e.bottom=e.top+e.height}else{var e={top:c.top-b.top,bottom:b.bottom-c.bottom,left:c.left-b.left-this.options.xPadding1,width:c.width,height:c.height};e.right=e.left+e.width}return e},getRect:function(a){var b=d(this.viewport),c=d(a);if("y"===this.axis){var e={top:c.top-b.top,left:c.left-b.left,right:b.right-c.right,width:c.width,height:c.height};e.bottom=e.top+e.height}else{var e={top:c.top-b.top,bottom:b.bottom-c.bottom,left:c.left-b.left,width:c.width,height:c.height};e.right=e.left+e.width}return e},isInView:function(a){var b=d(this.viewport),c=this.getRect(a);return"y"===this.axis?b.top<c.bottom&&b.bottom>c.top:b.left<c.right&&b.right>c.left},scrollTo:function(a,c){var d=this,e=this.element;return a=-a-this.options[this.axis+"Padding1"],a=h(this,a),H=!0,c===!0?(e.style.webkitTransition="-webkit-transform 0.4s ease 0",s(z,400),b.animation.requestFrame(function(){H&&d.enabled&&(i(d,"scrolling"),b.animation.requestFrame(arguments.callee))})):(e.style.webkitTransition="",s(z,1)),e.style.webkitTransform="y"===this.axis?k(j(this).x,a):k(a,j(this).y),this},scrollToElement:function(a,b){var c=this.offset(a);return c=c["y"===this.axis?"top":"left"],this.scrollTo(c,b)},getViewWidth:function(){return d(this.viewport).width},getViewHeight:function(){return d(this.viewport).height},addPulldownHandler:function(a){var b=this;return this.element.addEventListener("pulldownend",function(c){b.disable(),a(c,function(){b.scrollTo(0,!0),b.enable()})},!1),this},addPullupHandler:function(a){var b=this;return this.element.addEventListener("pullupend",function(c){b.disable(),a(c,function(){b.scrollTo(b.getScrollHeight(),!0),b.enable()})},!1),this},addScrollstartHandler:function(a){return this.element.addEventListener("scrollstart",function(b){a(b)},!1),this},addScrollingHandler:function(a){return this.element.addEventListener("scrolling",function(b){a(b)},!1),this},addScrollendHandler:function(a){return this.element.addEventListener("scrollend",function(b){a(b)},!1),this},addEventListener:function(){this.element.addEventListener.apply(this.element,arguments)},removeEventListener:function(){this.element.removeEventListener.apply(this.element,arguments)},enablePlugin:function(a,b){var c=o[a];return c&&!this.plugins[a]&&(this.plugins[a]=!0,b=b||{},c.call(this,a,b)),this}};for(var M in L)this[M]=L[M];delete L}var m=a.document,n={},o={},p={normal:[2,.0015],slow:[1.5,.003],veryslow:[1.5,.005]},q="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,r=!1;m.addEventListener("touchmove",function(a){return r?(a.preventDefault(),!1):!0},!1),b.scroll=function(a,b){if(1===arguments.length&&!(arguments[0]instanceof HTMLElement))if(b=arguments[0],b.scrollElement)a=b.scrollElement;else{if(!b.scrollWrap)throw new Error("no scroll element");a=b.scrollWrap.firstElementChild}if(!a.parentNode)throw new Error("wrong dom tree");if(b&&b.direction&&["x","y"].indexOf(b.direction)<0)throw new Error("wrong direction");var c;return c=a.scrollId?n[a.scrollId]:new l(a,b)},b.scroll.plugin=function(a,b){return b?(a=a.split(","),void a.forEach(function(a){o[a]=b})):o[a]}}(window,window.lib||(window.lib={})),!function(a,b){var c={open:function(a,b){if(a){var c=a.firstChild;a.style.opacity=1,a.style.visibility="visible",setTimeout(function(){c.style.webkitTransform="translateY(0)",b&&b()},0)}},close:function(a,b){if(a){var c=a.firstChild;c.style.webkitTransform="translateY(100%)",setTimeout(function(){a.style.opacity=0,a.style.visibility="hidden",b&&b()},200)}}},d=0,e={container:"ctrl-selectmenu",innerBox:"ctrl-selectmenu-picker",header:"ctrl-selectmenu-header",confirm:"ctrl-selectmenu-btn-confirm",cancel:"ctrl-selectmenu-btn-cancel",col:"ctrl-selectmenu-col",option:"ctrl-selectmenu-option",wrapper:"ctrl-selectmenu-wrapper"},f=function(a,b){var f=this,g=Date.now()+"-"+ ++d,h=document.createDocumentFragment();1!==arguments.length||arguments[0]instanceof HTMLElement||(b=arguments[0],a=null),a||(a=document.createElement("div")),h.appendChild(a),a.setAttribute("data-ctrl-name","selectmenu"),a.setAttribute("data-ctrl-id",g),a.className=e.container,this.options=b;var i=b.title||"";Object.defineProperty(this,"title",{get:function(){return i},set:function(b){if(!b)throw new Error("Non expected value");i=b,a.querySelector(".tip").innerHTML=b}});var j=b.confirmText||"确定";Object.defineProperty(this,"confirmText",{get:function(){return j},set:function(b){if(!b)throw new Error("Non expected value");j=b,a.querySelector("."+e.confirm).innerHTML=b}});var k=b.cancelText||"取消";Object.defineProperty(this,"cancelText",{get:function(){return k},set:function(b){if(!b)throw new Error("Non expected value");k=b,a.querySelector("."+e.cancel).innerHTML=b}});var l;Object.defineProperty(this,"viewModel",{get:function(){return l},set:function(a){if(!a)throw new Error("Non expected value");l=a,f.syncViewModel()}}),this.syncViewModel=function(){var a=this;this.render(),setTimeout(function(){a.addEvents()},100)},this._events={},this.addEventListener=function(a,b){this._events[a]||(this._events[a]=[]),this._events[a].push(b)},this.removeEventListener=function(a,b){if(this._events[a]){var c=this._events[a].indexOf(b);c>-1&&this._events[a].splice(c,1)}},this.execEvent=function(a){if(this._events[a]){var b=0,c=this._events[a].length;if(c)for(;c>b;b++)this._events[a][b].apply(this,[].slice.call(arguments,1))}},this.remove=function(){a.parentNode&&a.parentNode.removeChild(a)},this.element=a,this.root=h;var m={},n={},o={};this.render=function(){var a=l,b=['<div class="'+e.header+'">','<a href="javascript:void(0);" class="'+e.cancel+'">'+k+"</a>",'<span class="tip">'+i+"</span>",'<a href="javascript:void(0);" class="'+e.confirm+'">'+j+"</a>","</div>"].join(""),c='<div class="'+e.wrapper+'"></div>';this.element.innerHTML='<div class="'+e.innerBox+'">'+b+c+"</div>";for(var d in a)this.renderColumn(d,a[d]);this.refresh()},this.selectedIndex={},this.renderColumn=function(a,b){var c=this;if(!Array.isArray(b))throw"select项数据列表必须是数组";var d=[];c.selectedIndex[a]=0,b.forEach(function(b,f){b.selected&&(c.selectedIndex[a]=f),d.push('<div class="'+e.option+'" data-value="'+b.value+'">'+b.key+"</div>")});var f=d.join(""),g=c.element.querySelector("."+e.wrapper),h=g.querySelector("[data-type="+a+"]");if(h)h.firstChild.innerHTML=f;else{var i='<div class="scroller">'+f+"</div>",j=document.createElement("div");j.className=e.col,j.setAttribute("data-type",a),j.innerHTML=i,g.appendChild(j)}},this.setScroll=function(){var a=this,b=[].slice.call(this.element.querySelectorAll("."+e.col));b.forEach(function(b){var c=b.querySelector(".scroller"),d=lib.scroll({scrollElement:c,inertia:"slow"}).init();c.addEventListener("click",function(a){var b=a.target;0===b.className.indexOf(e.option)&&d.scrollToElement(b,!0)},!1),d.addScrollendHandler(function(){a.scrollEndHandler(d,b)});var f=b.getAttribute("data-type");a.scrollToNthChild(d,a.selectedIndex[f]),d.handler=!0,m[f]=d}),this.selects=b,this.scrolls=m},this.currentColName="",this.scrollEndHandler=function(a,b){if(!a.handler)return void(a.handler=!0);var c=a.getScrollTop(),d=Math.round(c/this.height);a.handler=!1,this.scrollToNthChild(a,d,!1);var e=b.getAttribute("data-type");this.currentColName=e,this.setSelectedStatus(e,Math.abs(d)),this.execEvent("select",e)},this.setSelectedStatus=function(a,b){var c=this.scrolls[a].element,d=c.querySelectorAll("."+e.option);n[a]=c.querySelector(".current"),n[a]&&(n[a].className=e.option),n[a]=d[b],n[a].className=e.option+" current",o["val-"+a]=n[a].getAttribute("data-value"),o["key-"+a]=n[a].innerHTML,this.selectedValue=o,this.selectedIndex[a]=b},this.resetScrollPos=function(){var a=this;this.selects&&this.selects.forEach(function(b){var c=b.getAttribute("data-type"),d=a.scrolls[c];a.scrollToNthChild(d,a.selectedIndex[c])})},this.scrollToNthChild=function(a,b,c){var d=a.element,e=d.querySelector(":nth-child("+(1+b)+")"),f="undefined"!=typeof c?c:!0;a.scrollToElement(e,f)};var p=!1,q=!1;this.addEvents=function(){function a(){c.refresh()}var b=this.options,c=this;if(!q){var d;if(window.addEventListener("resize",function(){clearTimeout(d),d=setTimeout(a,310)},!1),b.trigger){var f=b.trigger.length>1?[].slice.call(b.trigger):[b.trigger];f.forEach(function(a){a.addEventListener("click",function(){c.trigger=a,c.show()})})}q=!0}this.element.querySelector("."+e.confirm).addEventListener("click",function(){if(b.verifyMe){if(!b.verifyMe(c.selectedValue))return;c.hide()}else c.hide();c.execEvent("confirm",c.trigger)},!1),this.element.querySelector("."+e.cancel).addEventListener("click",function(){c.execEvent("cancel",c.trigger),c.hide()},!1)},this.show=function(){var a=this;this.execEvent("beforeShow",a.trigger),c.open(this.element),setTimeout(function(){p||(a.setScroll(),p=!0)},100),this.execEvent("show")},this.hide=function(){c.close(this.element),this.execEvent("hide")},this.refresh=function(){this.element.style.height=window.innerHeight+"px";var a=this,b=setInterval(function(){var c="."+e.option,d=document.querySelector(c);d&&d.clientHeight&&(a.height=d.clientHeight,a.resetScrollPos(),clearInterval(b),b=null)},100)},this.linkage=function(a,b){this.viewModel[a]=b,this.renderColumn(a,b);var c=this.scrolls[a],d=this.selectedIndex[a];c.refresh(),this.scrollToNthChild(c,d)},this.scrollToIndex=function(a,b){var c=this.scrolls[a];this.scrollToNthChild(c,b),this.setSelectedStatus(a,b)}};b.selectmenu=f}(window,window.ctrl||(window.ctrl={})),function(a){window.Helper={compareWithNow:function(a){var b=new Date,c=new Date(b.getFullYear(),b.getMonth(),b.getDate()),d=a.split("-"),e=new Date(Number(d[0]),Number(d[1])-1,Number(d[2])),f=e.getTime()-c.getTime(),g=Math.ceil(f/864e5);return g}};var b={init:function(b){this.box=a(b.boxClass),this.boxChild=this.box.children().first(),this.trigger=a(b.triggerClass),this.hideTrigger=a(b.hideClass),this.showHandler=b.onShow,this.hideHandler=b.onHide,this.addEvent()},addEvent:function(){var a=this;this.trigger.on("click",function(){a.show()}),this.box.on("click",function(){a.hide()}),this.boxChild.on("click",function(a){return a.stopPropagation(),!1}),this.hideTrigger.on("click",function(){a.hide()})},show:function(){this.box.show(),this.showHandler&&this.showHandler()},hide:function(){this.box.hide(),this.hideHandler&&this.hideHandler()}},c={isLocalStorageOk:!1,data:{},init:function(){return this.checkLocalStorage(),this},checkLocalStorage:function(){if("localStorage"in window&&null!==window.localStorage)try{localStorage.setItem("test","test"),localStorage.removeItem("test"),this.isLocalStorageOk=!0}catch(a){console.error(a)}},set:function(a,b){this.data[a]=b,this.isLocalStorageOk&&window.localStorage.setItem("recommend_"+a,b)},get:function(a){var b=this.data[a];return"undefined"==typeof b&&this.isLocalStorageOk&&(b=window.localStorage.getItem("recommend_"+a)),b}},d={data:{name:"",gender:"",birthday:""},validate:function(){if(!this.data.birthday)return alert("请输入您宝宝的生日或预产期哦"),!1;var a=Helper.compareWithNow(this.data.birthday),b=0>a;return b&&!this.data.gender?(alert("还不知道您宝宝是男宝还是女宝呢"),!1):!0},submit:function(a,b){this.validate()?a.call(this):b.call(this)}},e={date:{init:function(){var a=new Date;return this.today={y:a.getFullYear(),m:a.getMonth()+1,d:a.getDate()},this},getMDays:function(a,b){var c=new Array(31,28,31,30,31,30,31,31,30,31,30,31);return(a%40==0&&a%100!=0||a%400==0)&&(c[1]=29),c[b-1]}},init:function(a){var b=this.date.init(),c=b.today,d=c.y-14,e=c.y+1,f=this.viewModelItemFactory;this.viewModel={year:f(d,e,c.y),month:f(1,12,c.m),day:this.getDayViewData(c.y,c.m,c.d)},this.date=b,this.opts=a,this.setSelectMenu()},viewModelItemFactory:function(a,b,c){for(var d=[],e=a;b>=e;e++){var f=10>e?"0"+e:e;d.push({key:f,value:f,selected:e==c})}return d},getDayViewData:function(a,b,c){return this.viewModelItemFactory(1,this.date.getMDays(a,b),c)},setSelectMenu:function(){var a=this,b=ctrl.selectmenu,c=document.querySelector(".j-select"),d=new b({confirmText:"确定",title:"",cancelText:"取消",trigger:c});d.viewModel=this.viewModel,d.addEventListener("confirm",function(){console.log(this.selectedValue),a.opts.onConfirm&&a.opts.onConfirm.call(this)}),d.addEventListener("select",function(b){var c=this.selectedValue["val-year"],d=this.selectedValue["val-month"],e=this.selectedValue["val-day"];"day"!==b&&c&&d&&e&&this.linkage("day",a.getDayViewData(c,d,1))}),document.body.appendChild(d.root)}},f={init:function(){this.db=c.init(),this.render(),this.initDialog(),lib.lazyload.init(),new lib.goTop;var a=this;e.init({onConfirm:function(){var b=this.selectedValue,c=[b["val-year"],b["val-month"],b["val-day"]].join("-");a.renderBithday(c)}}),this.addEvent()},initDialog:function(){var c=this.db.get("data"),d=c&&JSON.parse(c)||{gender:"",name:"",birthday:""},e=a("#tpl-dialog").html();a("#dialog").html(_.template(e)(d)),b.init({boxClass:"#dialog",triggerClass:".j-trigger",hideClass:".j-cancel"}),this.renderBithday(d.birthday)},render:function(){this.renderTopInfo();var b="./data/"+(this.data||"common.json");a.getJSON(b,function(b){console.log(b);var c=a("#items"),d=a("#tpl-item").html();c.html(_.template(d)({data:b.category})),lib.lazyload.trigger()})},renderTopInfo:function(){var b=this.db.get("data"),c=b&&JSON.parse(b);if(c){d.data=c;var e=this.getAgeText(c),f=c.name?c.name+"小朋友":"宝宝";a(".main-hd").addClass("edit");var g=['<span class="name">'+f+'</span> <br> <span class="age">'+e+"</span>"].join("");a(".j-tip").html(g)}else a(".main-hd").removeClass("edit"),a(".j-tip").html("<span>添加宝宝档案，<br>打造您和宝宝的专属优品！</span>")},getAgeText:function(a){var b=a.birthday,c=a.gender;if(b){var d=Helper.compareWithNow(b),e=0>d,f="";if(e){d=Math.abs(d);var g=Math.floor(d/365),h=Math.floor((d-365*g)/30),i=d-365*g-30*h;f=g?"已经"+g+"岁"+(h?h+"个月":"")+"啦":"已经"+(h?h+"个月":"")+(i?i+"天":"")+"啦";var j=Math.min(12*g+h,12);this.getDataSrc(j,c,!0)}else{if(d){var k=Math.floor(d/7),i=d-7*k;f="离预产期还有"+(k?k+"周":"")+(i?i+"天":"")}else f="今天就要出生啦";var j=Math.floor(d/30);this.getDataSrc(j,c,!1)}return f}},getDataSrc:function(a,b,c){var d=[];c?(6>=a?d.push("0_6"):a>6&&12>a?d.push("6_12"):a>=12&&d.push("12"),d.push(b)):(a=Math.max(10-a,0),3>=a?d.push("0_3"):a>3&&7>=a?d.push("3_7"):a>7&&d.push("7_10")),this.data=d.join("_")+".json"},addEvent:function(){var c=this;a(".j-radiobox").on("click",function(){a(".radio-icon").removeClass("active"),a(this).find(".radio-icon").addClass("active");var b=a(this).attr("data-gender");d.data.gender=b}),a(".j-confirm").on("click",function(){d.data.name=a("#nickname").val(),d.data.birthday=a("#birthday").val(),d.validate()&&(b.hide(),c.db.set("data",JSON.stringify(d.data)),c.render())})},renderBithday:function(b){b?(a("#birthday").val(b),a(".j-select").html(b).removeClass("placeholder")):(a("#birthday").val(""),a(".j-select").html("点击输入").addClass("placeholder"))}};a(function(){f.init()})}(Zepto);