!function(a,b){function c(a,c){if(a&&(c||"object"!=typeof a||(c=a,a=c.id))){var d=b(a);if(!d.length)throw new Error("dom not find");this.$container=d,this.init(c||{})}}c.prototype={init:function(a){var c={index:1,pageCount:null,preFix:"!page/",objId:"Z",disableHash:null};b.extend(this,c,a),this.pageCount||(this.disableHash=!0),this.oldIndex=-1;var d=this.preFix,e=d.length;"/"!=d.charAt(e-1)&&(this.preFix+="/"),isNaN(this.index)&&(this.index=1),this.pageCount&&this.index>this.pageCount&&(this.index=this.pageCount),this.index<=0&&(this.index=1),this.createDom(),this.eventAttach(),!this.disableHash&&this.parseHash(),this.renderPage()},setIndex:function(a){var b=this;b.$select&&(a=Number(a),isNaN(a)&&(a=1),a>b.pageCount&&(a=b.pageCount),0>=a&&(a=1),b.index=a,b.renderPage())},setCount:function(a){a&&(this.pageCount=this.index=a,this.renderPage())},parseHash:function(){var a=this,b=location.hash,c=b.substr(b.lastIndexOf("/")+1),d=[],e=0,f=[];d=c.split("-"),d.shift();for(var g=0;g<d.length;g++){f=d[g].split("");var h=f.shift();h==this.objId&&(e=Number(f.join("")),(isNaN(e)||0>=e)&&(a.index=1),e>a.pageCount&&(a.index=a.pageCount),a.index=e)}},setContainer:function(a){this.$container=b(a)},getObjId:function(){return this.objId},pContainer:function(){return this.$container},changeHash:function(){var a=this,b=location.hash;if(""==b)location.hash=a.preFix+"-"+a.objId+a.index;else{var c=b.lastIndexOf(a.objId),d=c;if(-1==c)location.hash+="-"+a.objId+a.index;else{for(;;)if(d++,"-"==b[d]||!b[d])break;b=b.replace(b.substring(c,d),a.objId+a.index),location.hash=b}}},createDom:function(){var a=this,b=a.$container,c=a.pageCount,d=c&&'<i class="aw a-u"></i>'||"",e=c&&'<select class="c-p-select"></select>'||"",f=['<section class="c-p-con">','<a class="c-btn c-btn-aw c-p-pre"><span>上一页</span></a>','<div class="c-p-cur c-btn"><span>','<div class="c-p-arrow">',"<span></span>",d,"</div>",e,"</span></div>",'<a class="c-btn c-btn-awr c-p-next"><span>下一页</span></a>',"</section>"];if(b.html(f.join("")),c){e=a.$select||(a.$select=b.find("select")),f=new Array(c);for(var g=1;c>=g;g++)f[g-1]="<option>第"+g+"页</option>";e.append(f.join(""))}},renderPage:function(a){var c=this,d=c.$container,e=c.$select,f=c.pageCount,g=c.index,h=b(".c-p-pre",d),i=b(".c-p-next",d);f?(1>=f?(h.addClass("c-btn-off"),i.addClass("c-btn-off"),c.pageCount=1):1==g?(h.addClass("c-btn-off"),f>1&&i.removeClass("c-btn-off")):g==f?(i.addClass("c-btn-off"),f>1&&h.removeClass("c-btn-off")):g>1&&f>g&&(h.removeClass("c-btn-off"),i.removeClass("c-btn-off")),e&&(e.get(0).selectedIndex=g-1)):("end"==a&&(g--,i.addClass("c-btn-off"),c.pageCount=c.index=g),1>=g?h.addClass("c-btn-off"):h.removeClass("c-btn-off"));var j=g+"/"+f;e||(j="第 "+g+" 页"),b(".c-p-arrow span",d).text(j)},eventDetach:function(){var a=this,b=a.$container,c=a.$select;c&&c.off(),b.off("click"),a.$select=null,a.$arrow=null},eventAttach:function(){{var a=this,c=a.$container,d=a.$select;a.$arrow||(a.$arrow=b(".c-p-arrow i"))}commonFunc=function(b){a.triggerEvent(b)},d&&d.on({change:commonFunc}),c.on("click",".c-p-pre",commonFunc),c.on("click",".c-p-next",commonFunc)},triggerEvent:function(a){a.preventDefault();var c=this,d=a.currentTarget,e=b(d),f=d.tagName.toLowerCase(),g=c.index,h={};if("a"==f){if(e.hasClass("c-btn-off"))return;var i="";e.hasClass("c-p-pre")?(g--,i="pre"):e.hasClass("c-p-next")&&(g++,i="next")}else if("select"==f){if(g=d.selectedIndex+1,c.oldIndex==g)return;i="select"}c.index=g,h={index:g,type:i},c.$select?c.renderPage():h.callback=function(a){c.renderPage(a)},c.disableHash?c.$container.trigger("P:switchPage",h):c.changeHash(),c.oldIndex=g}},a.lib=a.lib||{},lib.PageNav=c}(window,$);