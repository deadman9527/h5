!function(a,b){"use strict";function c(a){return Object.prototype.toString.call(a).slice(8,-1)}var d,e,f,g,h=.15,i=300,j=700,k=5,l=200,m=Array.prototype.slice,n=Array.prototype.concat,o=Object.prototype.hasOwnProperty,p=a.document;g=function(){function b(b,f){var g,h,j,k,l=0;this.pos=0,this.page=0,this.currentPage=0,this.customEvents=[],f=f||{},"String"===c(b)&&(b=p.querySelector(b)),this.wrapper=b,this.options={direction:"h",duration:i,visible:1,play:!1,loop:!1,interval:5e3,snapThreshold:null,lazy:".lazyimg",prev:null,next:null};for(l in f)o.call(f,l)&&(this.options[l]=f[l]);for("horizontal"===this.options.direction&&(this.options.direction="h"),this.options.lazy&&(this.options.lazy=this.options.lazy.replace(/^\./,"")),this.wrapper.style.overflow="hidden",this.wrapper.style.position="relative",h=this.wrapper.firstElementChild||p.createElement("div"),h.classList.add("slider-outer"),h.style.cssText+="width:100%;height:100%",this.outer=h,j=h.firstElementChild||p.createElement("ul"),j.classList.add("slider-wrap"),j.style.cssText+="position:relative;top:0;height:100%;width:100%;"+e.cssVendor+"transition-duration:0;"+e.cssVendor+"transform:translateZ(0);"+e.cssVendor+"transition-timing-function:ease;padding:0;margin:0",this.slider=j,h.appendChild(j),this.wrapper.appendChild(h),this.items=[],f.items||(f.items=m.call(this.slider.children)),this.slider.innerHTML="",k=f.items,l=0,g=k.length;g>l;l+=1)this.__createItem(k[l]);this.items.length<2&&(this.options.loop=!1),this.__refreshSize(),this.__checkPosition(),this.__loadLazy(),this.options.play&&this.begin(),d.addEvent(a,"resize",this),d.addEvent(this.wrapper,"touchstart",this),d.addEvent(a,"touchend",this),d.addEvent(a,"touchcancel",this),d.addEvent(a,"touchmove",this),d.addEvent(this.slider,"transitionend",this)}return b.prototype={begin:function(){var a=this;this.__playtimer||(this.__playtimer=setInterval(function(){a.next()},this.options.interval))},stop:function(){clearInterval(this.__playtimer),this.__playtimer=null},onFlip:function(a){d.addEvent(this.wrapper,"slideview-flip",a),this.customEvents.push(["flip",a])},onMoveOut:function(a){d.addEvent(this.wrapper,"slideview-moveout",a,!1),this.customEvents.push(["moveout",a])},onMoveIn:function(a){d.addEvent(this.wrapper,"slideview-movein",a,!1),this.customEvents.push(["movein",a])},onTouchStart:function(a){d.addEvent(this.wrapper,"slideview-touchstart",a,!1),this.customEvents.push(["touchstart",a])},destroy:function(){for(;this.customEvents.length;)d.removeEvent(this.wrapper,"slideview-"+this.customEvents[0][0],this.customEvents[0][1],!1),this.customEvents.shift();d.removeEvent(a,"resize",this),d.removeEvent(this.wrapper,"touchstart",this),d.removeEvent(this.wrapper,"touchmove",this),d.removeEvent(this.wrapper,"touchend",this),d.removeEvent(this.slider,"transitionend",this)},__createItem:function(a){var b=this.items.length;a.id="slideview-item-"+b,a.style.cssText+=e.cssVendor+"transform:translateZ(0);position:absolute;top:0;height:100%;width:100%;"+("h"===this.options.direction?"left":"top")+":"+100*b+"%",this.slider.appendChild(a),this.items[b]=a,this.__refreshSize()},prev:function(){(this.options.loop||this.currentPage)&&(this.pos+=1,this.isShowingNext=-1,this.__setAroundPage(),this.__checkPosition())},next:function(){(this.options.loop||this.currentPage!==this.items.length-1)&&(this.pos-=1,this.isShowingNext=1,this.__setAroundPage(),this.__checkPosition())},slideTo:function(a){this.items[a]&&(this.slider.style[e.transitionDuration]=Math.min(j,Math.abs(this.currentPage-a)*this.options.duration)+"ms",this.currentPage=a,this.__pos(-this.currentPage*this.pageSize),this.__loadLazy(),this.__refreshPosition())},handleEvent:function(a){switch(a.type){case f.touchstart:this.__start(a);break;case f.touchmove:this.__move(a);break;case f.touchcancel:case f.touchend:this.__end(a);break;case f.resize:this.__resize(a);break;case f.transitionend:case"otransitionend":a.target===this.slider&&this.__transitionend(a)}},__refreshPosition:function(){for(var a,b=this.items,c=0,d=b.length;d>c;c+=1)a=b[c],a.id="slideview-item-"+c,a.style.cssText+=e.cssVendor+"transform:translateZ(0);position:absolute;top:0;height:100%;width:100%;"+("h"===this.options.direction?"left":"top")+":"+100*c+"%"},__refreshSize:function(){this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.sliderWidth=this.slider.clientWidth,this.sliderHeight=this.slider.clientHeight,this.pageWidth=this.wrapperWidth,this.pageHeight=this.wrapperHeight,this.maxX=-this.items.length*this.pageWidth+this.wrapperWidth,this.maxY=-this.items.length*this.pageHeight+this.wrapperHeight,this.maxPos="h"===this.options.direction?this.maxX:this.maxY,this.pageSize="h"===this.options.direction?this.pageWidth:this.pageHeight,this.snapThreshold=null===this.options.snapThreshold?Math.round(this.pageSize*h):/%/.test(this.options.snapThreshold)?Math.round(this.pageSize*this.options.snapThreshold.replace("%","")/100):this.options.snapThreshold},__resize:function(){this.__refreshSize(),this.slider.style[e.transitionDuration]="0s",this.__pos(-this.currentPage*this.pageSize)},__start:function(a){if(!this.initiated){this.__playtimer&&this.stop();var b=d.hasTouch?a.touches[0]:a;this.initiated=!0,this.moved=!1,this.startX=b.pageX,this.startY=b.pageY,this.pointX=b.pageX,this.pointY=b.pageY,this.startTime=+new Date,this.pointTime=+new Date,this.stepsX=0,this.stepsY=0,this.isShowingNext=0,this.directionLocked=!1,this.settedAround=!1,"h"===this.options.direction?(this.startPos=b.pageX,this.pointPos=b.pageX):(this.startPos=b.pageY,this.pointPos=b.pageY),this.slider.style[e.transitionDuration]="0s",this.__event("touchstart")}},__move:function(a){if(this.initiated){var b=d.hasTouch?a.touches[0]:a,c=b.pageX-this.pointX,e=b.pageY-this.pointY,f=+new Date,g=("h"===this.options.direction?"left":"top",this.pos+("h"===this.options.direction?c:e));if(this.moved=!0,this.pointX=b.pageX,this.pointY=b.pageY,this.pointTime=f,this.isMovingRight=c>0?1:0>c?-1:0,this.isMovingDown=e>0?1:0>e?-1:0,this.isShowingNext=-1*("h"===this.options.direction?this.isMovingRight:this.isMovingDown),this.stepsX+=Math.abs(c),this.stepsY+=Math.abs(e),a.preventDefault(),!(this.stepsX<10&&this.stepsY<10)){if("h"===this.options.direction){if(this.pointPos=b.pageX,!this.directionLocked&&this.stepsY>this.stepsX)return void(this.initiated=!1)}else if(this.pointPos=b.pageY,!this.directionLocked&&this.stepsX>this.stepsY)return void(this.initiated=!1);this.options.loop&&!this.settedAround&&(this.__setAroundPage(),this.settedAround=!0),this.directionLocked=!0,!this.options.loop&&(g>0||g<this.maxPos)&&(g=this.pos+("h"===this.options.direction?c:e)/k),this.__pos(g)}}},__end:function(a){if(this.initiated){var b=d.hasTouch?a.changedTouches[0]:a,c=+new Date,f=Math.abs(b.pageX-this.startX),g=Math.abs(b.pageY-this.startY),h="h"===this.options.direction?f:g,i=Math.sqrt(Math.pow(f,2)+Math.pow(g,2))/(c-this.startTime),j=i>.5;if(this.initiated=!1,this.moved){if(!this.options.loop&&(this.pos>0||this.pos<this.maxPos))return this.options.noBounceEasing||(this.slider.style[e.transitionDuration]=l+"ms"),this.__pos(this.page*this.pageSize),void this.__event("movein");if(!j&&h<this.snapThreshold)return this.options.noBounceEasing||(this.slider.style[e.transitionDuration]=Math.floor(this.options.duration*h/this.snapThreshold)+"ms"),void this.__pos(this.page*this.pageSize);this.pageSize<h&&this.__pos(this.page*this.pageSize-this.isShowingNext),this.__checkPosition()}}},__transitionend:function(){this.__setAroundPage()},__loadLazy:function(){for(var a=this.items[this.currentPage],b=this.items[this.currentPage===this.items.length-1?0:this.currentPage+1],c=n.call(m.call(a.querySelectorAll("."+this.options.lazy)),m.call(b.querySelectorAll("."+this.options.lazy))),d=0,e=c.length;e>d;d+=1)c[d].classList.contains(this.options.lazy)&&(c[d].src=c[d].getAttribute("dataimg"),c[d].removeAttribute("dataimg"),c[d].classList.remove(this.options.lazy))},__event:function(a){var b=p.createEvent("Event");b.initEvent("slideview-"+a,!0,!0),this.wrapper.dispatchEvent(b)},__checkPosition:function(){var a,b,c;this.page=this.isShowingNext>0?Math.floor(this.pos/this.pageSize):Math.ceil(this.pos/this.pageSize),a=this.page*this.pageSize,this.slider.style[e.transitionDuration]=Math.floor(500*Math.abs(this.pos-a)/this.pageSize)+"ms",c=this.page%this.items.length,c>0&&(c=this.items.length-c),c=Math.abs(c),this.__pos(a),this.currentPage!==c&&(b=this.items[this.currentPage],b&&b.classList.remove("slideview-active"),this.currentPage=c,this.__loadLazy(),this.__event("flip")),b=this.items[this.currentPage],b&&b.classList.add("slideview-active")},__setAroundPage:function(){var a,b,c,d="h"===this.options.direction?"left":"top",e=1===this.isShowingNext?Math.ceil:Math.floor;this.items.length<2||(this.pos>0?(a=this.items.length-e(this.pos/this.pageSize)%this.items.length,a===this.items.length&&(a=0)):a=Math.abs(e(this.pos/this.pageSize)%this.items.length),1===this.isShowingNext?(c=a+1,c===this.items.length&&(c=0),this.items[c].style[d]=parseInt(this.items[a].style[d],10)+100+"%"):-1===this.isShowingNext&&(b=a-1,-1===b&&(b=this.items.length-1),this.items[b].style[d]=parseInt(this.items[a].style[d],10)-100+"%"))},__pos:function(a){this.pos=a,this.slider.style[e.transform]="h"===this.options.direction?"translate("+a+"px,0)"+e.translateZ:"translate(0,"+a+"px)"+e.translateZ}},b}(),b.slideview=function(a,b){var c=new g(a,b);return c},d=function(){var b={},c=p.createElement("slideview").style,d=function(){for(var a,b=["t","webkitT","MozT","msT","OT"],d=0,e=b.length;e>d;d+=1)if(a=b[d]+"ransform",a in c)return b[d].substr(0,b[d].length-1);return!1}(),e=function(a){return d===!1?!1:""===d?a:(a=a.charAt(0).toUpperCase()+a.substr(1),d+a)},f="ontouchstart"in a,g=e("perspective")in c;return b.extend=function(a,b){for(var c in b)o.call(b,c)&&(a[c]=b[c])},b.extend(b,{hasTouch:f,has3d:g,hasTransform:!!d,hasTransitionEnd:e("transition")in c,styles:{cssVendor:d?"-"+d.toLowerCase()+"-":"",transform:e("transform"),transitionDuration:e("transitionDuration"),translateZ:g?" translateZ(0)":""},events:{resize:"onorientationchange"in a?"orientationchange":"resize",touchstart:f?"touchstart":"mousedown",touchmove:f?"touchmove":"mousemove",touchend:f?"touchend":"mouseup",touchcancel:f?"touchcancel":"mouseup",transitionend:function(){if(d===!1)return!1;var a={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"oTransitionEnd",ms:"MSTransitionEnd"};return a[d]}()},addEvent:function(a,b,c,d){a.addEventListener(this.events[b]||b,c,!!d)},removeEvent:function(a,b,c,d){a.removeEventListener(this.events[b],c,!!d)}}),b}(),e=d.styles,f=d.events}(this,this.lib||(this.lib={}));