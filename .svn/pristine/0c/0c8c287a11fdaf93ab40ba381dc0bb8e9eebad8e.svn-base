!function(a,b){var c,d,e=a.MutationObserver||a.WebKitMutationObserver;if(e){var f=[],g=new e(function(){var a=f.slice();f=[],a.forEach(function(a){a[0].call(a[1])})}),h=document.createElement("div");g.observe(h,{attributes:!0}),window.addEventListener("unload",function(){g.disconnect(),g=null}),c=function(a,b){f.push([a,b]),h.setAttribute("drainQueue","drainQueue")}}else c=function(a,b){setTimeout(function(){a.call(b)},1)};var i=function(a,b,c,d){return{enumerable:!!b,configurable:!0,writable:!0,value:a||function(){}}},j=function(a){return i(a,0,1,0)},k=function(a){return i(a,1)},l=function(a){if(void 0===a)return!1;try{var b=a.then;if("function"==typeof b)return!0}catch(c){}return!1},m=function(a){Error.call(this,a)};m.prototype=Object.create(Error.prototype);var n=function(){var a=[];return a.pump=function(b){c(function(){for(var c=a.length,d=0;c>d;)d++,a.shift()(b)})},a},o=function(a,b,d,e,f,g){var h=!1,i=this,j=function(a){c(function(){g("fulfilled"),e(a),b.pump(a)})},k=function(a){c(function(){g("rejected"),f(a),d.pump(a)})},m=function(a){return l(a)?void a.then(m,k):void j(a)},n=function(a){return function(b){h?"undefined"!=typeof console&&console.error("Cannot resolve a Promise multiple times."):(h=!0,a(b))}};this.resolve=n(m,"resolve"),this.fulfill=n(j,"fulfill"),this.reject=n(k,"reject"),this.cancel=function(){i.reject(new Error("Cancel"))},this.timeout=function(){i.reject(new Error("Timeout"))},g("pending")},d=function(a){var b,c,d=new n,e=new n,f="pending";Object.defineProperties(this,{_addAcceptCallback:j(function(a){d.push(a),"fulfilled"==f&&d.pump(b)}),_addRejectCallback:j(function(a){e.push(a),"rejected"==f&&e.pump(c)})});var g=new o(this,d,e,function(a){b=a},function(a){c=a},function(a){f=a});try{a&&a(g)}catch(h){g.reject(h),console.log(h)}},p=function(a){return"function"==typeof a},q=function(a,b,c){if(!p(a)){var d=b[c];b[c]=function(){d.apply(b,arguments)}}return function(){try{var c=a.apply(null,arguments);b.resolve(c)}catch(d){b.reject(d),console.log(d)}}},r=function(a,b,c){return p(a)&&c._addAcceptCallback(a),p(b)&&c._addRejectCallback(b),c};d.prototype=Object.create(null,{then:k(function(a,b){var c=this;return new d(function(d){r(q(a,d,"resolve"),q(b,d,"reject"),c)})}),"catch":k(function(a){var b=this;return new d(function(c){r(null,q(a,c,"reject"),b)})})}),d.isThenable=l;var s=function(a){return Array.prototype.slice.call(a).map(d.resolve)};d.any=function(){var a=s(arguments);return new d(function(b){if(a.length){var c=!1,d=function(a){c||(c=!0,b.resolve(a))},e=function(a){c||(c=!0,b.reject(a))};a.forEach(function(a){a.then(d,e)})}else b.reject("No futures passed to Promise.any()")})},d.every=function(){var a=s(arguments);return new d(function(b){if(a.length){var c=new Array(a.length),d=0,e=function(e,f){d++,c[e]=f,d==a.length&&b.resolve(c)};a.forEach(function(a,c){var d=function(){var a=Array.prototype.slice.call(arguments);return a.unshift(c),e.apply(null,a)};a.then(d,b.reject)})}else b.reject("No futures passed to Promise.every()")})},d.some=function(){var a=s(arguments);return new d(function(b){if(a.length){var c=0,d=function(){c++,c==a.length&&b.reject()};a.forEach(function(a){a.then(b.resolve,d)})}else b.reject("No futures passed to Promise.some()")})},d.fulfill=function(a){return new d(function(b){b.fulfill(a)})},d.resolve=function(a){return new d(function(b){b.resolve(a)})},d.reject=function(a){return new d(function(b){b.reject(a)})},d.deferred=function(){var a,b=new d(function(b){a=b}),c={};return["resolve","reject","fulfill","timeout","cancel"].forEach(function(b){c[b]=function(){a[b].apply(b,arguments)}}),c.promise=function(a){return a?(["then","catch"].forEach(function(c){a[c]=function(){return b[c].apply(b,arguments)}}),a):b},c},window.$&&!window.$.Deferred&&(window.$.Deferred=function(){var a=d.deferred();return a.resolveWith=function(a,b){this.resolve.apply(a,b)},a.rejectWith=function(a,b){this.reject.apply(a,b)},a}),b.promise=d}(window,window.lib||(window.lib={}));