!function(t){Global.formatTitleLink=function(t,e){if(!e)return t;var a=new lib.httpurl(t);return a.params.title=e,a.toString()},Global.formatImgSrc=function(t){if(!t)return"http://img01.ve.cn/party/60c0f7c1d5a7f76f5e2ba49358072bfd.jpg";var e=t.match(/^http:\/\/img\.ve\.cnttp(.+)_3\.jpg/);return e?"http"+e[1]+".jpg":t};var e={init:function(){new ctrl.topBar({isIndex:!1}),this.bottombar=new ctrl.bottomBar({showBottom:!0}),this.categoryIndex=parseInt(window.location.hash.split("#")[1])||0,t("#callApp").on("click",function(){var t=location.href;t=t.replace(/test.h5/g,"h5");var e=!0,a=!0;lib.callapp.gotoPage(t,{point:a,params:e})}),this.render()},addEvents:function(){var e=this;t(".category-list li").on("tap",function(){t(this).hasClass("active")||(e.categoryIndex=t(this).index(),t(".category-list .indicator").css({top:50*e.categoryIndex+"px"}),t(".category-list .active").removeClass("active"),setTimeout(function(){t(".category-list li").eq(e.categoryIndex).addClass("active")},200),t(".container").remove(),e.renderItems(e.categoriesData[e.categoryIndex]))})},render:function(){var e=this;t.get("http://act.quxiu.me/data/categories.json",function(a){console.log(a),e.categoriesData=a.data.list,e.renderCategories(a.data.list),t(".category-list .indicator").css({top:50*e.categoryIndex+"px"}),t(".category-list li").eq(e.categoryIndex).addClass("active"),e.renderItems(a.data.list[e.categoryIndex]);var i=lib.scroll;e.scroller=new i({scrollElement:t(".category-list")[0]}),e.addEvents(),e.scroller.init()})},renderCategories:function(e){var a=t(".category-list"),i=t("#tpl-category").html();a.prepend(_.template(i)({itemList:e}))},renderItems:function(e){var a=t(".item-container"),i=t("#tpl-item").html();a.prepend(_.template(i)({itemList:e}));var r=lib.scroll,n=new r({scrollElement:t(".container")[0]});n.init()},adjustLink:function(){t(".list-item").each(function(e,a){var i=t(a),r=i.attr("href"),n=i.find(".title").html(),o=Global.formatTitleLink(r,n);i.attr("href",o)})}};t(function(){e.init()})}(Zepto,window.Global||(window.Global={}));