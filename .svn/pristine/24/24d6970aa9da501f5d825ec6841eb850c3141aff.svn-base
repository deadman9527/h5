!function(a,b){var c={getParamsFromUrl:function(){for(var a={},b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if("undefined"==typeof a[e[0]])a[e[0]]=e[1];else if("string"==typeof a[e[0]]){var f=[a[e[0]],e[1]];a[e[0]]=f}else a[e[0]].push(e[1])}return a}},d=location.href.indexOf("http://h5.ve.cn")>-1;b.login={isLogin:function(){return!!b.storage.get("accessToken")},goLogin:function(a){a=a||location.href,location.href=d?"http://h5.ve.cn/login.html?redirectUrl="+encodeURIComponent(a):"login.html?redirectUrl="+encodeURIComponent(a)},logout:function(a){a=a||"",b.storage.rm("accessToken");var c=this;setTimeout(function(){c.goLogin(a)},100)},login:function(a,e){if(a&&a.accessToken){if(!e){var f=c.getParamsFromUrl();e=f.redirectUrl?decodeURIComponent(f.redirectUrl):d?"http://h5.ve.cn":"index.html"}b.storage.set("accessToken",a.accessToken),b.storage.set("userId",a.user.userId),b.storage.set("userName",a.user.userName),a.user.nickName?b.storage.set("nickName",a.user.nickName):b.storage.set("nickName",a.user.userName),setTimeout(function(){location.href=e},100)}},getUserName:function(){return b.storage.get("userName")},getNickName:function(){return b.storage.get("nickName")}}}(window,window.lib||(window.lib={}));