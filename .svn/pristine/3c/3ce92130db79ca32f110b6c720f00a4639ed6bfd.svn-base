!function(a,b){function c(a){if(!f.paused)if(f.isSupportNative){var b=a.param.playIdentifier;b&&b.toString()!==l.toString()||(f.paused=!0,f.onended&&f.onended(),console.log("endedId:"+b))}else f.paused=!0,f.onended&&f.onended(),console.log("ended")}function d(){f.error=!0,f.pause(),f.onerror&&f.onerror(),console.log("error")}function e(a,b){return a=a.toString(),new Array(b+1-a.length).join("0")+a}var f=b.audio||(b.audio={}),g=a.document,h=a.WindVane,i=b.env.taobaoApp,j=new Audio,k=1,l=0,m={};f.isSupportNative=!1,i&&h&&(f.isSupportNative=i.version&&i.version.gte("4.0.0")),j.autoplay=!1,j.addEventListener("ended",c,!1),j.addEventListener("error",d,!1),g.addEventListener("AUDIO.IDLE",c,!1),f.paused=!0,f.play=function(a,b,c){if(1===arguments.length?"string"==typeof arguments[0]?this.src=arguments[0]:"function"==typeof arguments[0]&&(this.onended=b):2===arguments.length?"string"==typeof arguments[0]?(this.src=arguments[0],this.onended=arguments[1]):"function"==typeof arguments[0]&&(this.onended=arguments[0],this.onerror=arguments[1]):3===arguments.length&&(this.src=a,this.onended=b,this.onerror=c),this.error=!1,this.src){if(this.paused=!1,this.isSupportNative){if(l=m[this.src],!l){var f=Date.now()%1e3;m[this.src]=l="1"+e(f,3)+e(k,4),k=++k%1e4}console.log("playedId:"+l),h.call("H5AudioPlayer","play",{voiceUrl:this.src,playIdentifier:l},function(){console.log("success to play")},function(){console.log("fail to play"),d()})}else j.paused||(j.pause(),j.currentTime=0),j.src=this.src,j.play();console.log("play")}else d()},f.pause=function(a){(!this.paused||a)&&(this.paused=!0,this.isSupportNative?h.call("H5AudioPlayer","stop",{voiceUrl:this.src||""},function(){console.log("success to stop")},function(){console.log("fail to stop")}):(j.pause(),f.error||(j.currentTime=0)),console.log("paused"))}}(window,window.lib||(window.lib={}));
if (window.KISSY) {KISSY.add('mtb/lib-audio/1.0.6/audio.cmd',function() {return window.lib.audio;},{requries:['mtb/lib-env']});} else if ('undefined' !== typeof define) {define('mtb/lib-audio/1.0.6/audio.cmd', [], function(require){require('mtb/lib-env');return window.lib.audio;});}