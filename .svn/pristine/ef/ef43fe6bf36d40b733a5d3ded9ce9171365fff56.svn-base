!function(t,n){function e(t,n,e){void 0==e&&(e=!0);for(var i in n)i in t&&!e||(t[i]=n[i]);return t}n||(window.lib={}),n=window.lib;var i=function(){var t=0;return function(){return t++}}();n.AMap=function(t){var n={lon:116.404,lat:39.915,autoPosition:!0};this._cfg=e(n,t),this.mapObj=new AMap.Map(this._cfg.container,{center:new AMap.LngLat(this._cfg.lon,this._cfg.lat)}),this._initDefaultPlugins()},n.AMap.prototype={_initDefaultPlugins:function(){var t=this.mapObj,n=this._cfg;this.markers=[],t.plugin(["AMap.ToolBar","AMap.Scale"],function(){tool=new AMap.ToolBar({direction:!0,ruler:!0,autoPosition:n.autoPosition}),t.addControl(tool),scale=new AMap.Scale,t.addControl(scale)})},getCenter:function(){var t=this.mapObj.getCenter();return{lon:t.getLng(),lat:t.getLat()}},setCenter:function(t,n){var e=new AMap.LngLat(t,n);return this.mapObj.setCenter(e),this},getZoom:function(){return this.mapObj.getZoom()},setZoom:function(t){return t=Math.max(Math.min(18,parseInt(t)),3),this.mapObj.setZoom(t),this},getScale:function(){return this.mapObj.getScale()},moveTo:function(t,n){var e=new AMap.LngLat(t,n);return this.mapObj.panTo(e),this},addLayer:function(t){void 0==t.id&&(t.id=i()),t.offset||(t.offset=[0,0]);var n=new AMap.Marker({map:this.mapObj,position:new AMap.LngLat(t.lon,t.lat),offset:new AMap.Pixel(t.offset[0],t.offset[1]),content:t.content});return n.id=t.id,this.markers.push(n),this},getLayer:function(t){for(var n=0;n<this.markers.length;n++)if(t===this.markers[n].id)return this.markers[n];return null},removeLayer:function(t){for(var n=0;n<this.markers.length;n++)if(t===this.markers[n].id)return this.markers[n].hide(),this.markers[n]=null,this.markers.splice(n,1)},destory:function(){return this.mapObj.destory()}}}(window,window.lib);