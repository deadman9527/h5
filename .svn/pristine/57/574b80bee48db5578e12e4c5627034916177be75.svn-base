!function(e,t){"use strict";var n=function(){return document.body.classList?!0:!1}(),i={hasClass:function(e,t){if(n)return e.classList.contains(t);if(0==t.length||-1!=t.indexOf(" "))throw new Error('Invalid class name: "'+t+'".');var i=e.className;return i?i==t?!0:-1!=i.search("\\b"+t+"\\b"):!1},addClass:function(e,t){if(n)return e.classList.add(t);if(!i.hasClass(e,t)){var s=e.className;s&&" "!=s[s.length-1]&&(t=" "+t),e.className+=t}},removeClass:function(e,t){if(n)return e.classList.remove(t);if(0==t.length||-1!=t.indexOf(" "))throw new Error('Invalid class name: "'+t+'".');var s=new RegExp("\\b"+t+"\\b\\s*","g"),a=e.className;e.className=i.trim(a.replace(s,""))}};t.pagenav=t.pagenav||{},t.pagenav.utils=i}(window,window.ctrl||(window.ctrl={})),function(e,t){"use strict";function n(e,t){var n=this,a=Date.now()+"-"+ ++s,r=i.createDocumentFragment();if(t||"object"!=typeof e||(t=e,e=t.elem),e&&e.nodeType!=i.ELEMENT_NODE)throw new Error("Require a dom element.");e||(e=document.createElement("div")),r.appendChild(e),e.setAttribute("data-ctrl-name","pagenav"),e.setAttribute("data-ctrl-id",a),this.root=r,this.element=e;var c={};Object.defineProperty(this,"viewModel",{get:function(){return c},set:function(e){var t=e.index;t=+t,(isNaN(t)||0>=t)&&(t=1);var i=e.total;null!=i&&(i=+i,(isNaN(i)||0>=i)&&(i=1),t>i&&(t=i)),c.index=t,c.total=i,n.syncViewModel()}}),this.init(t||{})}var i=document,s=0,a=t.pagenav.utils,r=a.hasClass,c=a.addClass,l=a.removeClass;n.prototype={constructor:n,init:function(e){e=e||{};var t={index:e.index,total:e.total};this.viewModel=t},syncViewModel:function(){this.oldIndex=this.viewModel.index,this.createDom(),this.eventAttach(),this.renderPage()},createDom:function(){var e=this.element,t=this.viewModel.total,n=t&&'<i class="aw a-u"></i>'||"",i=t&&'<select class="c-p-select"></select>'||"",s="";if(s+='<div class="c-p-con"><a class="c-btn c-btn-aw c-p-pre"><span>上一页</span></a><div class="c-p-cur c-btn"><span><div class="c-p-arrow"><span></span>'+n+"</div>"+i+'</span></div><a class="c-btn c-btn-awr c-p-next"><span>下一页</span></a></div>',e.innerHTML=s,this.prevElem=e.querySelector(".c-p-pre"),this.nextElem=e.querySelector(".c-p-next"),this.selectElem=e.querySelector("select"),t){s="";for(var a=0;t>a;a++)s+="<option>第"+(a+1)+"页</option>";this.selectElem.innerHTML=s}},renderPage:function(e){var t=this.selectElem,n=this.viewModel.index,i=this.viewModel.total,s=this.prevElem,a=this.nextElem;i?(1==i?(c(s,"c-btn-off"),c(a,"c-btn-off")):1==n?(c(s,"c-btn-off"),i>1&&l(a,"c-btn-off")):n==i?(c(a,"c-btn-off"),i>1&&l(s,"c-btn-off")):n>1&&i>n&&(l(s,"c-btn-off"),l(a,"c-btn-off")),t&&(t.selectedIndex=n-1)):("end"==e&&(n--,c(a,"c-btn-off"),this.viewModel.total=this.viewModel.index=n),1>=n?c(s,"c-btn-off"):l(s,"c-btn-off"));{var r;this.element}r=t?n+"/"+i:"第 "+n+" 页",this.element.querySelector(".c-p-arrow span").innerText=r},eventDetach:function(){var e=this.prevElem,t=this.nextElem,n=this.selectElem;e.removeEventListener("click",this.handler,!1),t.removeEventListener("click",this.handler,!1),n&&n.removeEventListener("change",this.handler,!1)},eventAttach:function(){var e=this,t=this.prevElem,n=this.nextElem,i=this.selectElem,s=this.handler=function(t){e.triggerEvent.call(e,t)};t.addEventListener("click",s,!1),n.addEventListener("click",s,!1),i&&i.addEventListener("change",s,!1)},triggerEvent:function(e){e.preventDefault();var t,n=this,s=e.currentTarget,a=e.type,c=this.viewModel.index,l={};if("click"==a){if(r(s,"c-btn-off"))return;r(s,"c-p-pre")?(c--,t="prev"):r(s,"c-p-next")&&(c++,t="next")}else if("change"==a){if(c=s.selectedIndex+1,this.oldIndex==c)return;t="select"}this.viewModel.index=c,this.oldIndex=c,l.index=c,l.type=t,this.selectElem?this.renderPage():l.callback=function(e){n.renderPage(e)};var o=i.createEvent("HTMLEvents");o.initEvent("pagenav:switchPage",!0,!0),o.page=l,this.element.dispatchEvent(o)},addEventListener:function(){var e=this.element;e.addEventListener.apply(e,arguments)},removeEventListener:function(){var e=this.element;e.removeEventListener.apply(e,arguments)},remove:function(){this.eventDetach();var e=this.element;e.parentNode&&e.parentNode.removeChild(e)}},t.pagenav=n}(window,window.ctrl||(window.ctrl={}));