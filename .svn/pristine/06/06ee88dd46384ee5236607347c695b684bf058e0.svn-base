!function(t,e){function n(t){var e;if("number"==typeof t)e=new Date(1e3*t);else if("string"==typeof t){var n=t.charAt(0),r="+"===n,i="-"===n;if(r||i){for(var d,u=t.substr(1),l=u.split(":"),c=[0,0,0,0],f=4;l.length&&--f>=0;)c[f]=parseInt(l.pop())||0;d=a*c[0]+o*c[1]+s*c[2]+c[3],e=new Date,e.setSeconds(e.getSeconds()+d*(i?-1:1)),e.setMilliseconds(0)}}return e||(e=new Date(t)),e}function r(t,e){return e.replace(FORMATTER_REGEXP,function(e){var n=e.length,r=e.charAt(0);if("\\"===r)return e.replace("\\","");var a=("d"===r?t.days:"h"===r?t.hours:"m"===r?t.minutes:"s"===r?t.seconds:0)+"";return("00000"+a).substr(-Math.max(a.length,n))})}var a=86400,o=3600,s=60,i="d天hh时mm分ss秒";FORMATTER_REGEXP=/(\\)?(dd*|hh?|mm?|ss?)/gi;var d=function(t){t=t||{};var e=this,r=n(t.endDate);if(!r||!r.getTime())throw new Error("Invalid endDate");e.endDate=r,e.onUpdate=t.onUpdate,e.onEnd=t.onEnd,e.interval=t.interval||1e3,e.stringFormatter=t.stringFormatter||i,e.correctDateOffset=t.correctDateOffset||0,e.updateElement=t.updateElement,e._data={days:0,hours:0,minutes:0,seconds:0}};d.prototype={start:function(){var t=this;return t.stop(),t._update()&&(t._intervalId=setInterval(function(){t._update()},t.interval)),t},_update:function(){var t,e=this,n=e._data,i=e.updateElement,d=+new Date+1e3*e.correctDateOffset,u=Math.max(0,Math.round((e.endDate.getTime()-d)/1e3)),l=0>=u;return n.totalSeconds=u,u-=(n.days=Math.floor(u/a))*a,u-=(n.hours=Math.floor(u/o))*o,u-=(n.minutes=Math.floor(u/s))*s,n.seconds=u,n.stringValue=r(n,e.stringFormatter),i&&(i.innerHTML=n.stringValue),(t=e.onUpdate)&&t.call(e,n),l?(e.stop(),(t=e.onEnd)&&t.call(e),!1):!0},stop:function(){var t=this;return t._intervalId&&(clearInterval(t._intervalId),t._intervalId=null),t},setEndDate:function(t){var e=this;return e.endDate=n(t),e}},e.countdown=function(t){return new d(t)}}(window,window.lib||(window.lib={}));